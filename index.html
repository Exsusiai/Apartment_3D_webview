<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>公寓3D模型展示</title>
    <link rel="stylesheet" href="css/style.css">
    <link href='https://unpkg.com/boxicons@2.1.4/css/boxicons.min.css' rel='stylesheet'>
</head>
<body>
    <header>
        <div class="header-container">
            <h1>公寓3D模型展示</h1>
            <p>通过交互式3D模型探索公寓空间</p>
        </div>
    </header>

    <main>
        <div class="container">
            <div class="sidebar">
                <div class="panel">
                    <h3><i class='bx bx-buildings'></i> 公寓选择</h3>
                    <select id="apartmentSelector" class="mt-10">
                        <option value="berlin_pankow">柏林潘科区公寓</option>
                        <option value="example_apartment">示例公寓（演示用）</option>
                    </select>
                </div>

                <div class="panel">
                    <h3><i class='bx bx-joystick'></i> 视角控制</h3>
                    <div class="controls-info mt-10">
                        <p><i class='bx bx-mouse'></i> 鼠标：控制视角</p>
                        <p><i class='bx bx-joystick'></i> WASD：前后左右移动</p>
                    </div>
                    <div class="controls-group mt-10">
                        <button id="toggleControlModeBtn" class="btn primary full-width"><i class='bx bx-transfer'></i> <span id="controlModeText">切换到鼠标模式</span></button>
                    </div>
                    <div class="controls-group mt-10">
                        <button id="viewTopBtn" class="btn secondary"><i class='bx bx-up-arrow'></i> 顶视图</button>
                        <button id="viewFrontBtn" class="btn secondary"><i class='bx bx-right-arrow'></i> 正视图</button>
                        <button id="viewSideBtn" class="btn secondary"><i class='bx bx-right-arrow-alt'></i> 侧视图</button>
                    </div>
                    <div class="controls-group mt-10">
                        <button id="resetViewBtn" class="btn primary full-width"><i class='bx bx-reset'></i> 重置视图</button>
                    </div>
                    <div class="controls-group mt-10">
                        <button id="toggleWireframeBtn" class="btn secondary full-width"><i class='bx bx-grid-alt'></i> 切换线框模式</button>
                    </div>
                </div>

                <div class="panel quality-control">
                    <h3><i class='bx bx-slider'></i> 质量控制</h3>
                    <label for="qualitySelector">渲染质量:</label>
                    <select id="qualitySelector" class="mt-10">
                        <option value="low">低 (更流畅)</option>
                        <option value="medium" selected>中 (平衡)</option>
                        <option value="high">高 (更清晰)</option>
                    </select>
                </div>

                <div class="panel screenshot-control">
                    <h3><i class='bx bx-camera'></i> 截图</h3>
                    <button id="screenshotBtn" class="btn accent full-width mt-10"><i class='bx bx-screenshot'></i> 保存截图</button>
                </div>
                
                <div class="panel debug-panel">
                    <h3>
                        <i class='bx bx-bug'></i> 调试信息
                        <button id="toggleDebugBtn" class="btn small"><i class='bx bx-chevron-down'></i></button>
                    </h3>
                    <div class="debug-content collapsed">
                        <div id="debugOutput"></div>
                    </div>
                </div>
            </div>

            <div class="model-view">
                <div id="modelContainer">
                    <div class="view-info">
                        <div id="rotationInfo" class="info-item">视角: 0°</div>
                        <div id="zoomInfo" class="info-item">高度: 1.7m</div>
                    </div>
                    <div id="escExitPrompt" class="esc-prompt hidden">
                        <i class='bx bx-exit'></i> 按ESC退出FPS模式
                    </div>
                    <div id="loadingOverlay">
                        <div class="spinner"></div>
                        <div class="loading-text">正在加载模型...</div>
                        <div class="progress-container">
                            <div class="progress-bar"></div>
                        </div>
                    </div>
                    <div id="pointerLockPrompt" class="center-screen hidden">
                        <div class="prompt-content">
                            <button id="enterFPSBtn" class="btn primary full-width" style="font-size:1.3rem;padding:1.2em 2em;">点击以启用FPS控制</button>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </main>

    <footer>
        <p>&copy; 2023 公寓3D模型展示 | 由 Three.js 提供技术支持</p>
    </footer>

    <!-- 引入Three.js库 -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/three.js/r128/three.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/three@0.128.0/examples/js/controls/OrbitControls.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/three@0.128.0/examples/js/controls/PointerLockControls.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/three@0.128.0/examples/js/loaders/OBJLoader.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/three@0.128.0/examples/js/loaders/MTLLoader.min.js"></script>
    
    <!-- 引入键盘控制脚本 -->
    <script src="js/keyboardControls.js"></script>
    
    <!-- 引入应用程序主脚本 -->
    <script src="js/main.js"></script>
</body>
</html> 