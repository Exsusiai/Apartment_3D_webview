"use strict";
/*
 * ATTENTION: An "eval-source-map" devtool has been used.
 * This devtool is neither made for production nor for readable output files.
 * It uses "eval()" calls to create a separate source file with attached SourceMaps in the browser devtools.
 * If you are trying to read the output file, select a different devtool (https://webpack.js.org/configuration/devtool/)
 * or disable the default devtool with "devtool: false".
 * If you are looking for production-ready output files, see mode: "production" (https://webpack.js.org/configuration/mode/).
 */
self["webpackHotUpdate_N_E"]("app/page",{

/***/ "(app-pages-browser)/./components/apartment-3d-viewer.tsx":
/*!********************************************!*\
  !*** ./components/apartment-3d-viewer.tsx ***!
  \********************************************/
/***/ ((module, __webpack_exports__, __webpack_require__) => {

eval(__webpack_require__.ts("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   Apartment3DViewer: () => (/* binding */ Apartment3DViewer)\n/* harmony export */ });\n/* harmony import */ var react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! react/jsx-dev-runtime */ \"(app-pages-browser)/./node_modules/next/dist/compiled/react/jsx-dev-runtime.js\");\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! react */ \"(app-pages-browser)/./node_modules/next/dist/compiled/react/index.js\");\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_1__);\n/* __next_internal_client_entry_do_not_use__ Apartment3DViewer auto */ \nvar _s = $RefreshSig$();\n\nfunction Apartment3DViewer(param) {\n    let { apartment, onClose } = param;\n    _s();\n    const iframeRef = (0,react__WEBPACK_IMPORTED_MODULE_1__.useRef)(null);\n    const [isLoading, setIsLoading] = (0,react__WEBPACK_IMPORTED_MODULE_1__.useState)(true);\n    const [error, setError] = (0,react__WEBPACK_IMPORTED_MODULE_1__.useState)(null);\n    const [iframeKey, setIframeKey] = (0,react__WEBPACK_IMPORTED_MODULE_1__.useState)(0) // 添加key来强制重新创建iframe\n    ;\n    (0,react__WEBPACK_IMPORTED_MODULE_1__.useEffect)({\n        \"Apartment3DViewer.useEffect\": ()=>{\n            if (!apartment.hasModel) {\n                setError(\"该公寓暂无3D模型\");\n                setIsLoading(false);\n                return;\n            }\n            // 重置状态\n            setError(null);\n            setIsLoading(true);\n            // 延迟一点时间确保iframe完全重新创建\n            const timer = setTimeout({\n                \"Apartment3DViewer.useEffect.timer\": ()=>{\n                    // 创建3D查看器的HTML内容\n                    const create3DViewerHTML = {\n                        \"Apartment3DViewer.useEffect.timer.create3DViewerHTML\": ()=>{\n                            return '\\n<!DOCTYPE html>\\n<html lang=\"zh-CN\">\\n<head>\\n    <meta charset=\"UTF-8\">\\n    <meta name=\"viewport\" content=\"width=device-width, initial-scale=1.0\">\\n    <title>'.concat(apartment.title, ' - 3D查看器</title>\\n    <style>\\n        body {\\n            margin: 0;\\n            padding: 0;\\n            font-family: -apple-system, BlinkMacSystemFont, \\'Segoe UI\\', Roboto, sans-serif;\\n            background: #f5f5f5;\\n            overflow: hidden;\\n        }\\n        \\n        .viewer-container {\\n            display: flex;\\n            height: 100vh;\\n            width: 100vw;\\n        }\\n        \\n        .sidebar {\\n            width: 280px;\\n            background: white;\\n            border-right: 1px solid #e5e5e5;\\n            padding: 20px;\\n            overflow-y: auto;\\n            box-shadow: 2px 0 10px rgba(0,0,0,0.1);\\n        }\\n        \\n        .model-view {\\n            flex: 1;\\n            position: relative;\\n            background: #f0f0f0;\\n        }\\n        \\n        #modelContainer {\\n            width: 100%;\\n            height: 100%;\\n            position: relative;\\n        }\\n        \\n        .panel {\\n            background: #f8f9fa;\\n            border: 1px solid #e9ecef;\\n            border-radius: 8px;\\n            padding: 16px;\\n            margin-bottom: 16px;\\n        }\\n        \\n        .panel h3 {\\n            margin: 0 0 12px 0;\\n            font-size: 14px;\\n            font-weight: 600;\\n            color: #333;\\n            display: flex;\\n            align-items: center;\\n            gap: 8px;\\n        }\\n        \\n        .btn {\\n            background: #007bff;\\n            color: white;\\n            border: none;\\n            padding: 8px 16px;\\n            border-radius: 6px;\\n            cursor: pointer;\\n            font-size: 13px;\\n            margin: 4px;\\n            transition: background-color 0.2s;\\n        }\\n        \\n        .btn:hover {\\n            background: #0056b3;\\n        }\\n        \\n        .btn.secondary {\\n            background: #6c757d;\\n        }\\n        \\n        .btn.secondary:hover {\\n            background: #545b62;\\n        }\\n        \\n        .btn.full-width {\\n            width: 100%;\\n            margin: 4px 0;\\n        }\\n        \\n        .controls-group {\\n            display: flex;\\n            flex-wrap: wrap;\\n            gap: 4px;\\n            margin-top: 8px;\\n        }\\n        \\n        .controls-group .btn {\\n            flex: 1;\\n            min-width: 80px;\\n        }\\n        \\n        select {\\n            width: 100%;\\n            padding: 8px;\\n            border: 1px solid #ddd;\\n            border-radius: 4px;\\n            font-size: 13px;\\n            margin-top: 8px;\\n        }\\n        \\n        .view-info {\\n            position: absolute;\\n            top: 20px;\\n            right: 20px;\\n            background: rgba(0,0,0,0.7);\\n            color: white;\\n            padding: 8px 12px;\\n            border-radius: 6px;\\n            font-size: 12px;\\n            z-index: 100;\\n        }\\n        \\n        .esc-prompt {\\n            position: absolute;\\n            top: 20px;\\n            left: 20px;\\n            background: rgba(255,0,0,0.8);\\n            color: white;\\n            padding: 8px 12px;\\n            border-radius: 6px;\\n            font-size: 12px;\\n            z-index: 100;\\n        }\\n        \\n        .esc-prompt.hidden {\\n            display: none;\\n        }\\n        \\n        #loadingOverlay {\\n            position: absolute;\\n            top: 0;\\n            left: 0;\\n            width: 100%;\\n            height: 100%;\\n            background: rgba(255,255,255,0.9);\\n            display: flex;\\n            flex-direction: column;\\n            justify-content: center;\\n            align-items: center;\\n            z-index: 1000;\\n        }\\n        \\n        .spinner {\\n            width: 40px;\\n            height: 40px;\\n            border: 4px solid #f3f3f3;\\n            border-top: 4px solid #007bff;\\n            border-radius: 50%;\\n            animation: spin 1s linear infinite;\\n        }\\n        \\n        @keyframes spin {\\n            0% { transform: rotate(0deg); }\\n            100% { transform: rotate(360deg); }\\n        }\\n        \\n        .loading-text {\\n            margin-top: 16px;\\n            font-size: 14px;\\n            color: #666;\\n        }\\n        \\n        .center-screen {\\n            position: absolute;\\n            top: 50%;\\n            left: 50%;\\n            transform: translate(-50%, -50%);\\n            z-index: 200;\\n        }\\n        \\n        .center-screen.hidden {\\n            display: none;\\n        }\\n        \\n        .prompt-content {\\n            background: white;\\n            padding: 20px;\\n            border-radius: 8px;\\n            box-shadow: 0 4px 20px rgba(0,0,0,0.3);\\n        }\\n        \\n        .close-btn {\\n            position: absolute;\\n            top: 10px;\\n            right: 10px;\\n            background: rgba(0,0,0,0.5);\\n            color: white;\\n            border: none;\\n            width: 30px;\\n            height: 30px;\\n            border-radius: 50%;\\n            cursor: pointer;\\n            font-size: 16px;\\n            z-index: 1001;\\n        }\\n        \\n        .close-btn:hover {\\n            background: rgba(0,0,0,0.7);\\n        }\\n    </style>\\n</head>\\n<body>\\n    <div class=\"viewer-container\">\\n        <div class=\"sidebar\">\\n            <div class=\"panel\">\\n                <h3>\\uD83C\\uDFE0 公寓信息</h3>\\n                <h4 style=\"margin: 0; color: #333;\">').concat(apartment.title, '</h4>\\n                <p style=\"font-size: 12px; color: #666; margin: 8px 0 0 0;\">').concat(apartment.description, '</p>\\n            </div>\\n\\n            <div class=\"panel\">\\n                <h3>\\uD83C\\uDFAE 视角控制</h3>\\n                <div class=\"controls-group\">\\n                    <button id=\"toggleControlModeBtn\" class=\"btn full-width\">\\n                        <span id=\"controlModeText\">切换到FPS模式</span>\\n                    </button>\\n                </div>\\n                <div class=\"controls-group\">\\n                    <button id=\"viewTopBtn\" class=\"btn secondary\">顶视图</button>\\n                    <button id=\"viewFrontBtn\" class=\"btn secondary\">正视图</button>\\n                    <button id=\"viewSideBtn\" class=\"btn secondary\">侧视图</button>\\n                </div>\\n                <div class=\"controls-group\">\\n                    <button id=\"resetViewBtn\" class=\"btn full-width\">重置视图</button>\\n                </div>\\n                <div class=\"controls-group\">\\n                    <button id=\"toggleWireframeBtn\" class=\"btn secondary full-width\">切换线框模式</button>\\n                </div>\\n            </div>\\n\\n            <div class=\"panel\">\\n                <h3>⚙️ 质量控制</h3>\\n                <label for=\"qualitySelector\">渲染质量:</label>\\n                <select id=\"qualitySelector\">\\n                    <option value=\"low\">低 (更流畅)</option>\\n                    <option value=\"medium\" selected>中 (平衡)</option>\\n                    <option value=\"high\">高 (更清晰)</option>\\n                </select>\\n            </div>\\n\\n            <div class=\"panel\">\\n                <h3>\\uD83D\\uDCF7 截图</h3>\\n                <button id=\"screenshotBtn\" class=\"btn full-width\">保存截图</button>\\n            </div>\\n        </div>\\n\\n        <div class=\"model-view\">\\n            <button class=\"close-btn\" onclick=\"window.parent.postMessage(\\'close\\', \\'*\\')\" title=\"关闭\">\\xd7</button>\\n            <div id=\"modelContainer\">\\n                <div class=\"view-info\">\\n                    <div id=\"rotationInfo\">视角: 0\\xb0</div>\\n                    <div id=\"zoomInfo\">高度: ').concat(apartment.config.camera.height, 'm</div>\\n                </div>\\n                <div id=\"escExitPrompt\" class=\"esc-prompt hidden\">\\n                    按ESC退出FPS模式\\n                </div>\\n                <div id=\"loadingOverlay\">\\n                    <div class=\"spinner\"></div>\\n                    <div class=\"loading-text\">正在加载模型...</div>\\n                </div>\\n                <div id=\"pointerLockPrompt\" class=\"center-screen hidden\">\\n                    <div class=\"prompt-content\">\\n                        <button id=\"enterFPSBtn\" class=\"btn full-width\" style=\"font-size:1.1rem;padding:1em 2em;\">点击以启用FPS控制</button>\\n                    </div>\\n                </div>\\n            </div>\\n        </div>\\n    </div>\\n\\n    <!-- Three.js 库 -->\\n    <script src=\"https://cdnjs.cloudflare.com/ajax/libs/three.js/r128/three.min.js\"></script>\\n    <script src=\"https://cdn.jsdelivr.net/npm/three@0.128.0/examples/js/controls/OrbitControls.min.js\"></script>\\n    <script src=\"https://cdn.jsdelivr.net/npm/three@0.128.0/examples/js/controls/PointerLockControls.min.js\"></script>\\n    <script src=\"https://cdn.jsdelivr.net/npm/three@0.128.0/examples/js/loaders/OBJLoader.min.js\"></script>\\n    <script src=\"https://cdn.jsdelivr.net/npm/three@0.128.0/examples/js/loaders/MTLLoader.min.js\"></script>\\n    \\n    <script>\\n        // 强制重置所有全局变量\\n        if (window.scene) {\\n            window.scene.clear();\\n        }\\n        if (window.renderer) {\\n            window.renderer.dispose();\\n        }\\n        \\n        // 3D查看器初始化脚本\\n        let scene, camera, renderer, controls, model;\\n        let orbitControls, pointerLockControls;\\n        let isWireframe = false;\\n        let currentControlMode = \\'orbit\\'; // \\'orbit\\' or \\'fps\\'\\n        let animationId = null; // 用于清理动画循环\\n        \\n        // 公寓配置\\n        const apartmentConfig = ').concat(JSON.stringify(apartment.config), ';\\n        const modelPath = \"').concat(apartment.modelPath, \"\\\";\\n        \\n        // 清理之前的资源\\n        function cleanup() {\\n            if (animationId) {\\n                cancelAnimationFrame(animationId);\\n                animationId = null;\\n            }\\n            \\n            if (renderer) {\\n                renderer.dispose();\\n                renderer.forceContextLoss();\\n                if (renderer.domElement && renderer.domElement.parentNode) {\\n                    renderer.domElement.parentNode.removeChild(renderer.domElement);\\n                }\\n            }\\n            \\n            if (scene) {\\n                scene.clear();\\n            }\\n            \\n            // 清理事件监听器\\n            window.removeEventListener('resize', onWindowResize);\\n            document.removeEventListener('keydown', onKeyDown);\\n        }\\n        \\n        // 初始化3D场景\\n        function init() {\\n            try {\\n                // 先清理之前的资源\\n                cleanup();\\n                \\n                // 创建场景\\n                scene = new THREE.Scene();\\n                scene.background = new THREE.Color(0xf0f0f0);\\n                \\n                // 创建相机\\n                camera = new THREE.PerspectiveCamera(75, window.innerWidth / window.innerHeight, 0.1, 1000);\\n                camera.position.set(apartmentConfig.camera.init_point[0], apartmentConfig.camera.height, apartmentConfig.camera.init_point[1]);\\n                \\n                // 创建渲染器\\n                renderer = new THREE.WebGLRenderer({ antialias: true });\\n                renderer.setSize(window.innerWidth - 280, window.innerHeight);\\n                renderer.shadowMap.enabled = true;\\n                renderer.shadowMap.type = THREE.PCFSoftShadowMap;\\n                \\n                const container = document.getElementById('modelContainer');\\n                const canvas = container.querySelector('canvas');\\n                if (canvas) {\\n                    container.removeChild(canvas);\\n                }\\n                container.appendChild(renderer.domElement);\\n                \\n                // 创建控制器\\n                setupControls();\\n                \\n                // 添加光源\\n                setupLighting();\\n                \\n                // 加载模型\\n                loadModel();\\n                \\n                // 设置事件监听\\n                setupEventListeners();\\n                \\n                // 开始渲染循环\\n                animate();\\n                \\n            } catch (error) {\\n                console.error('初始化3D场景失败:', error);\\n                const loadingOverlay = document.getElementById('loadingOverlay');\\n                if (loadingOverlay) {\\n                    loadingOverlay.innerHTML = '<div style=\\\"color: red;\\\">3D场景初始化失败</div>';\\n                }\\n            }\\n        }\\n        \\n        function setupControls() {\\n            // 轨道控制器\\n            orbitControls = new THREE.OrbitControls(camera, renderer.domElement);\\n            orbitControls.enableDamping = true;\\n            orbitControls.dampingFactor = 0.05;\\n            orbitControls.target.set(0, 0, 0);\\n            \\n            // FPS控制器\\n            pointerLockControls = new THREE.PointerLockControls(camera, renderer.domElement);\\n            scene.add(pointerLockControls.getObject());\\n            \\n            // 默认使用轨道控制器\\n            orbitControls.enabled = true;\\n            pointerLockControls.enabled = false;\\n        }\\n        \\n        function setupLighting() {\\n            // 环境光\\n            const ambientLight = new THREE.AmbientLight(0x404040, 0.6);\\n            scene.add(ambientLight);\\n            \\n            // 方向光\\n            const directionalLight = new THREE.DirectionalLight(0xffffff, 0.8);\\n            directionalLight.position.set(10, 10, 5);\\n            directionalLight.castShadow = true;\\n            scene.add(directionalLight);\\n            \\n            // 点光源\\n            const pointLight = new THREE.PointLight(0xffffff, 0.5);\\n            pointLight.position.set(0, 5, 0);\\n            scene.add(pointLight);\\n        }\\n        \\n        function loadModel() {\\n            const loadingOverlay = document.getElementById('loadingOverlay');\\n            \\n            // MTL加载器\\n            const mtlLoader = new THREE.MTLLoader();\\n            mtlLoader.setPath(modelPath + '/');\\n            \\n            mtlLoader.load('textured_output.mtl', function(materials) {\\n                materials.preload();\\n                \\n                // OBJ加载器\\n                const objLoader = new THREE.OBJLoader();\\n                objLoader.setMaterials(materials);\\n                objLoader.setPath(modelPath + '/');\\n                \\n                objLoader.load('textured_output.obj', \\n                    function(object) {\\n                        // 模型加载成功\\n                        model = object;\\n                        scene.add(model);\\n                        \\n                        // 计算模型边界盒\\n                        const box = new THREE.Box3().setFromObject(model);\\n                        const center = box.getCenter(new THREE.Vector3());\\n                        const size = box.getSize(new THREE.Vector3());\\n                        \\n                        // 调整相机位置\\n                        const maxDim = Math.max(size.x, size.y, size.z);\\n                        const fov = camera.fov * (Math.PI / 180);\\n                        let cameraZ = Math.abs(maxDim / 2 / Math.tan(fov / 2));\\n                        cameraZ *= 1.5; // 增加一些距离\\n                        \\n                        camera.position.set(center.x, center.y + apartmentConfig.camera.height, center.z + cameraZ);\\n                        orbitControls.target.copy(center);\\n                        \\n                        // 隐藏加载界面\\n                        loadingOverlay.style.display = 'none';\\n                    },\\n                    function(progress) {\\n                        // 加载进度\\n                        console.log('Loading progress:', progress);\\n                    },\\n                    function(error) {\\n                        // 加载错误\\n                        console.error('Error loading model:', error);\\n                        loadingOverlay.innerHTML = '<div style=\\\"color: red;\\\">模型加载失败</div>';\\n                    }\\n                );\\n            }, undefined, function(error) {\\n                console.error('Error loading materials:', error);\\n                loadingOverlay.innerHTML = '<div style=\\\"color: red;\\\">材质加载失败</div>';\\n            });\\n        }\\n        \\n        function setupEventListeners() {\\n            // 控制模式切换\\n            document.getElementById('toggleControlModeBtn').addEventListener('click', toggleControlMode);\\n            \\n            // 视角按钮\\n            document.getElementById('viewTopBtn').addEventListener('click', () => setView('top'));\\n            document.getElementById('viewFrontBtn').addEventListener('click', () => setView('front'));\\n            document.getElementById('viewSideBtn').addEventListener('click', () => setView('side'));\\n            document.getElementById('resetViewBtn').addEventListener('click', resetView);\\n            \\n            // 线框模式\\n            document.getElementById('toggleWireframeBtn').addEventListener('click', toggleWireframe);\\n            \\n            // 截图\\n            document.getElementById('screenshotBtn').addEventListener('click', takeScreenshot);\\n            \\n            // 质量控制\\n            document.getElementById('qualitySelector').addEventListener('change', changeQuality);\\n            \\n            // FPS模式相关\\n            document.getElementById('enterFPSBtn').addEventListener('click', enterFPSMode);\\n            \\n            // 键盘事件\\n            document.addEventListener('keydown', onKeyDown);\\n            \\n            // 窗口大小调整\\n            window.addEventListener('resize', onWindowResize);\\n        }\\n        \\n        function toggleControlMode() {\\n            if (currentControlMode === 'orbit') {\\n                // 切换到FPS模式\\n                document.getElementById('pointerLockPrompt').classList.remove('hidden');\\n            } else {\\n                // 切换到轨道模式\\n                exitFPSMode();\\n            }\\n        }\\n        \\n        function enterFPSMode() {\\n            pointerLockControls.lock();\\n            currentControlMode = 'fps';\\n            orbitControls.enabled = false;\\n            pointerLockControls.enabled = true;\\n            document.getElementById('pointerLockPrompt').classList.add('hidden');\\n            document.getElementById('escExitPrompt').classList.remove('hidden');\\n            document.getElementById('controlModeText').textContent = '切换到鼠标模式';\\n        }\\n        \\n        function exitFPSMode() {\\n            pointerLockControls.unlock();\\n            currentControlMode = 'orbit';\\n            orbitControls.enabled = true;\\n            pointerLockControls.enabled = false;\\n            document.getElementById('escExitPrompt').classList.add('hidden');\\n            document.getElementById('controlModeText').textContent = '切换到FPS模式';\\n        }\\n        \\n        function setView(viewType) {\\n            if (!model) return;\\n            \\n            const box = new THREE.Box3().setFromObject(model);\\n            const center = box.getCenter(new THREE.Vector3());\\n            const size = box.getSize(new THREE.Vector3());\\n            const maxDim = Math.max(size.x, size.y, size.z);\\n            \\n            switch(viewType) {\\n                case 'top':\\n                    camera.position.set(center.x, center.y + maxDim, center.z);\\n                    break;\\n                case 'front':\\n                    camera.position.set(center.x, center.y, center.z + maxDim);\\n                    break;\\n                case 'side':\\n                    camera.position.set(center.x + maxDim, center.y, center.z);\\n                    break;\\n            }\\n            \\n            orbitControls.target.copy(center);\\n            orbitControls.update();\\n        }\\n        \\n        function resetView() {\\n            if (!model) return;\\n            \\n            const box = new THREE.Box3().setFromObject(model);\\n            const center = box.getCenter(new THREE.Vector3());\\n            const size = box.getSize(new THREE.Vector3());\\n            const maxDim = Math.max(size.x, size.y, size.z);\\n            \\n            camera.position.set(center.x, center.y + apartmentConfig.camera.height, center.z + maxDim * 1.5);\\n            orbitControls.target.copy(center);\\n            orbitControls.update();\\n        }\\n        \\n        function toggleWireframe() {\\n            if (!model) return;\\n            \\n            isWireframe = !isWireframe;\\n            model.traverse(function(child) {\\n                if (child.isMesh) {\\n                    child.material.wireframe = isWireframe;\\n                }\\n            });\\n        }\\n        \\n        function takeScreenshot() {\\n            const link = document.createElement('a');\\n            link.download = `${apartmentConfig.name}_screenshot.png`;\\n            link.href = renderer.domElement.toDataURL();\\n            link.click();\\n        }\\n        \\n        function changeQuality(event) {\\n            const quality = event.target.value;\\n            let pixelRatio;\\n            \\n            switch(quality) {\\n                case 'low':\\n                    pixelRatio = 0.5;\\n                    break;\\n                case 'medium':\\n                    pixelRatio = 1;\\n                    break;\\n                case 'high':\\n                    pixelRatio = Math.min(window.devicePixelRatio, 2);\\n                    break;\\n            }\\n            \\n            renderer.setPixelRatio(pixelRatio);\\n        }\\n        \\n        function onKeyDown(event) {\\n            if (event.code === 'Escape' && currentControlMode === 'fps') {\\n                exitFPSMode();\\n            }\\n        }\\n        \\n        function onWindowResize() {\\n            camera.aspect = (window.innerWidth - 280) / window.innerHeight;\\n            camera.updateProjectionMatrix();\\n            renderer.setSize(window.innerWidth - 280, window.innerHeight);\\n        }\\n        \\n        function animate() {\\n            animationId = requestAnimationFrame(animate);\\n            \\n            if (orbitControls.enabled) {\\n                orbitControls.update();\\n            }\\n            \\n            renderer.render(scene, camera);\\n        }\\n        \\n        // 初始化\\n        init();\\n    </script>\\n</body>\\n</html>\\n      \");\n                        }\n                    }[\"Apartment3DViewer.useEffect.timer.create3DViewerHTML\"];\n                    // 创建iframe并设置内容\n                    const iframe = iframeRef.current;\n                    if (iframe) {\n                        var _iframe_contentWindow;\n                        const doc = iframe.contentDocument || ((_iframe_contentWindow = iframe.contentWindow) === null || _iframe_contentWindow === void 0 ? void 0 : _iframe_contentWindow.document);\n                        if (doc) {\n                            doc.open();\n                            doc.write(create3DViewerHTML());\n                            doc.close();\n                            setIsLoading(false);\n                        }\n                    }\n                }\n            }[\"Apartment3DViewer.useEffect.timer\"], 100) // 100ms延迟\n            ;\n            return ({\n                \"Apartment3DViewer.useEffect\": ()=>{\n                    clearTimeout(timer);\n                }\n            })[\"Apartment3DViewer.useEffect\"];\n        }\n    }[\"Apartment3DViewer.useEffect\"], [\n        apartment,\n        iframeKey\n    ]) // 添加iframeKey作为依赖\n    ;\n    // 组件卸载时重置iframe key来强制重新创建\n    (0,react__WEBPACK_IMPORTED_MODULE_1__.useEffect)({\n        \"Apartment3DViewer.useEffect\": ()=>{\n            return ({\n                \"Apartment3DViewer.useEffect\": ()=>{\n                    setIframeKey({\n                        \"Apartment3DViewer.useEffect\": (prev)=>prev + 1\n                    }[\"Apartment3DViewer.useEffect\"]);\n                }\n            })[\"Apartment3DViewer.useEffect\"];\n        }\n    }[\"Apartment3DViewer.useEffect\"], []);\n    // 监听iframe消息\n    (0,react__WEBPACK_IMPORTED_MODULE_1__.useEffect)({\n        \"Apartment3DViewer.useEffect\": ()=>{\n            const handleMessage = {\n                \"Apartment3DViewer.useEffect.handleMessage\": (event)=>{\n                    if (event.data === 'close' && onClose) {\n                        onClose();\n                    }\n                }\n            }[\"Apartment3DViewer.useEffect.handleMessage\"];\n            window.addEventListener('message', handleMessage);\n            return ({\n                \"Apartment3DViewer.useEffect\": ()=>window.removeEventListener('message', handleMessage)\n            })[\"Apartment3DViewer.useEffect\"];\n        }\n    }[\"Apartment3DViewer.useEffect\"], [\n        onClose\n    ]);\n    if (error) {\n        return /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n            className: \"flex items-center justify-center h-full\",\n            children: /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                className: \"text-center p-8\",\n                children: [\n                    /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"p\", {\n                        className: \"text-gray-500 mb-4\",\n                        children: error\n                    }, void 0, false, {\n                        fileName: \"/Users/jason/Project/My_Apartment_Web/components/apartment-3d-viewer.tsx\",\n                        lineNumber: 704,\n                        columnNumber: 11\n                    }, this),\n                    /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"p\", {\n                        className: \"text-sm text-gray-400\",\n                        children: \"该公寓模型正在准备中，敬请期待\"\n                    }, void 0, false, {\n                        fileName: \"/Users/jason/Project/My_Apartment_Web/components/apartment-3d-viewer.tsx\",\n                        lineNumber: 705,\n                        columnNumber: 11\n                    }, this)\n                ]\n            }, void 0, true, {\n                fileName: \"/Users/jason/Project/My_Apartment_Web/components/apartment-3d-viewer.tsx\",\n                lineNumber: 703,\n                columnNumber: 9\n            }, this)\n        }, void 0, false, {\n            fileName: \"/Users/jason/Project/My_Apartment_Web/components/apartment-3d-viewer.tsx\",\n            lineNumber: 702,\n            columnNumber: 7\n        }, this);\n    }\n    return /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n        className: \"w-full h-full relative\",\n        children: [\n            isLoading && /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                className: \"absolute inset-0 flex items-center justify-center bg-white z-10\",\n                children: /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                    className: \"text-center\",\n                    children: [\n                        /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                            className: \"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-500 mx-auto mb-4\"\n                        }, void 0, false, {\n                            fileName: \"/Users/jason/Project/My_Apartment_Web/components/apartment-3d-viewer.tsx\",\n                            lineNumber: 716,\n                            columnNumber: 13\n                        }, this),\n                        /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"p\", {\n                            className: \"text-gray-500\",\n                            children: \"正在初始化3D查看器...\"\n                        }, void 0, false, {\n                            fileName: \"/Users/jason/Project/My_Apartment_Web/components/apartment-3d-viewer.tsx\",\n                            lineNumber: 717,\n                            columnNumber: 13\n                        }, this)\n                    ]\n                }, void 0, true, {\n                    fileName: \"/Users/jason/Project/My_Apartment_Web/components/apartment-3d-viewer.tsx\",\n                    lineNumber: 715,\n                    columnNumber: 11\n                }, this)\n            }, void 0, false, {\n                fileName: \"/Users/jason/Project/My_Apartment_Web/components/apartment-3d-viewer.tsx\",\n                lineNumber: 714,\n                columnNumber: 9\n            }, this),\n            /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"iframe\", {\n                ref: iframeRef,\n                className: \"w-full h-full border-0\",\n                title: \"\".concat(apartment.title, \" 3D查看器\"),\n                sandbox: \"allow-scripts allow-same-origin allow-downloads allow-pointer-lock\"\n            }, void 0, false, {\n                fileName: \"/Users/jason/Project/My_Apartment_Web/components/apartment-3d-viewer.tsx\",\n                lineNumber: 721,\n                columnNumber: 7\n            }, this)\n        ]\n    }, void 0, true, {\n        fileName: \"/Users/jason/Project/My_Apartment_Web/components/apartment-3d-viewer.tsx\",\n        lineNumber: 712,\n        columnNumber: 5\n    }, this);\n}\n_s(Apartment3DViewer, \"v9vXjC02A8v/NliTWBIniYKROxk=\");\n_c = Apartment3DViewer;\nvar _c;\n$RefreshReg$(_c, \"Apartment3DViewer\");\n\n\n;\n    // Wrapped in an IIFE to avoid polluting the global scope\n    ;\n    (function () {\n        var _a, _b;\n        // Legacy CSS implementations will `eval` browser code in a Node.js context\n        // to extract CSS. For backwards compatibility, we need to check we're in a\n        // browser context before continuing.\n        if (typeof self !== 'undefined' &&\n            // AMP / No-JS mode does not inject these helpers:\n            '$RefreshHelpers$' in self) {\n            // @ts-ignore __webpack_module__ is global\n            var currentExports = module.exports;\n            // @ts-ignore __webpack_module__ is global\n            var prevSignature = (_b = (_a = module.hot.data) === null || _a === void 0 ? void 0 : _a.prevSignature) !== null && _b !== void 0 ? _b : null;\n            // This cannot happen in MainTemplate because the exports mismatch between\n            // templating and execution.\n            self.$RefreshHelpers$.registerExportsForReactRefresh(currentExports, module.id);\n            // A module can be accepted automatically based on its exports, e.g. when\n            // it is a Refresh Boundary.\n            if (self.$RefreshHelpers$.isReactRefreshBoundary(currentExports)) {\n                // Save the previous exports signature on update so we can compare the boundary\n                // signatures. We avoid saving exports themselves since it causes memory leaks (https://github.com/vercel/next.js/pull/53797)\n                module.hot.dispose(function (data) {\n                    data.prevSignature =\n                        self.$RefreshHelpers$.getRefreshBoundarySignature(currentExports);\n                });\n                // Unconditionally accept an update to this module, we'll check if it's\n                // still a Refresh Boundary later.\n                // @ts-ignore importMeta is replaced in the loader\n                module.hot.accept();\n                // This field is set when the previous version of this module was a\n                // Refresh Boundary, letting us know we need to check for invalidation or\n                // enqueue an update.\n                if (prevSignature !== null) {\n                    // A boundary can become ineligible if its exports are incompatible\n                    // with the previous exports.\n                    //\n                    // For example, if you add/remove/change exports, we'll want to\n                    // re-execute the importing modules, and force those components to\n                    // re-render. Similarly, if you convert a class component to a\n                    // function, we want to invalidate the boundary.\n                    if (self.$RefreshHelpers$.shouldInvalidateReactRefreshBoundary(prevSignature, self.$RefreshHelpers$.getRefreshBoundarySignature(currentExports))) {\n                        module.hot.invalidate();\n                    }\n                    else {\n                        self.$RefreshHelpers$.scheduleUpdate();\n                    }\n                }\n            }\n            else {\n                // Since we just executed the code for the module, it's possible that the\n                // new exports made it ineligible for being a boundary.\n                // We only care about the case when we were _previously_ a boundary,\n                // because we already accepted this update (accidental side effect).\n                var isNoLongerABoundary = prevSignature !== null;\n                if (isNoLongerABoundary) {\n                    module.hot.invalidate();\n                }\n            }\n        }\n    })();\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKGFwcC1wYWdlcy1icm93c2VyKS8uL2NvbXBvbmVudHMvYXBhcnRtZW50LTNkLXZpZXdlci50c3giLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7O0FBRW1EO0FBUTVDLFNBQVNHLGtCQUFrQixLQUE4QztRQUE5QyxFQUFFQyxTQUFTLEVBQUVDLE9BQU8sRUFBMEIsR0FBOUM7O0lBQ2hDLE1BQU1DLFlBQVlMLDZDQUFNQSxDQUFvQjtJQUM1QyxNQUFNLENBQUNNLFdBQVdDLGFBQWEsR0FBR04sK0NBQVFBLENBQUM7SUFDM0MsTUFBTSxDQUFDTyxPQUFPQyxTQUFTLEdBQUdSLCtDQUFRQSxDQUFnQjtJQUNsRCxNQUFNLENBQUNTLFdBQVdDLGFBQWEsR0FBR1YsK0NBQVFBLENBQUMsR0FBRyxxQkFBcUI7O0lBRW5FRixnREFBU0E7dUNBQUM7WUFDUixJQUFJLENBQUNJLFVBQVVTLFFBQVEsRUFBRTtnQkFDdkJILFNBQVM7Z0JBQ1RGLGFBQWE7Z0JBQ2I7WUFDRjtZQUVBLE9BQU87WUFDUEUsU0FBUztZQUNURixhQUFhO1lBRWIsdUJBQXVCO1lBQ3ZCLE1BQU1NLFFBQVFDO3FEQUFXO29CQUN2QixpQkFBaUI7b0JBQ2pCLE1BQU1DO2dGQUFxQjs0QkFDekIsT0FBTyxzS0F5TnVDWixPQW5OekNBLFVBQVVhLEtBQUssRUFBQyw0dktBb05pRGIsT0FEeEJBLFVBQVVhLEtBQUssRUFBQyx1RkE2Q3pCYixPQTVDaUNBLFVBQVVjLFdBQVcsRUFBQyxvNkRBc0ZsRUMsT0ExQ1dmLFVBQVVnQixNQUFNLENBQUNDLE1BQU0sQ0FBQ0MsTUFBTSxFQUFDLDR4REEyQy9DbEIsT0FES2UsS0FBS0ksU0FBUyxDQUFDbkIsVUFBVWdCLE1BQU0sR0FBRSxrQ0FDbEIsT0FBcEJoQixVQUFVb0IsU0FBUyxFQUFDO3dCQW9VM0M7O29CQUVBLGdCQUFnQjtvQkFDaEIsTUFBTUMsU0FBU25CLFVBQVVvQixPQUFPO29CQUNoQyxJQUFJRCxRQUFROzRCQUM0QkE7d0JBQXRDLE1BQU1FLE1BQU1GLE9BQU9HLGVBQWUsTUFBSUgsd0JBQUFBLE9BQU9JLGFBQWEsY0FBcEJKLDRDQUFBQSxzQkFBc0JLLFFBQVE7d0JBQ3BFLElBQUlILEtBQUs7NEJBQ1BBLElBQUlJLElBQUk7NEJBQ1JKLElBQUlLLEtBQUssQ0FBQ2hCOzRCQUNWVyxJQUFJTSxLQUFLOzRCQUNUekIsYUFBYTt3QkFDZjtvQkFDRjtnQkFDRjtvREFBRyxLQUFLLFVBQVU7O1lBRWxCOytDQUFPO29CQUNMMEIsYUFBYXBCO2dCQUNmOztRQUNGO3NDQUFHO1FBQUNWO1FBQVdPO0tBQVUsRUFBRSxrQkFBa0I7O0lBRTdDLDJCQUEyQjtJQUMzQlgsZ0RBQVNBO3VDQUFDO1lBQ1I7K0NBQU87b0JBQ0xZO3VEQUFhdUIsQ0FBQUEsT0FBUUEsT0FBTzs7Z0JBQzlCOztRQUNGO3NDQUFHLEVBQUU7SUFFTCxhQUFhO0lBQ2JuQyxnREFBU0E7dUNBQUM7WUFDUixNQUFNb0M7NkRBQWdCLENBQUNDO29CQUNyQixJQUFJQSxNQUFNQyxJQUFJLEtBQUssV0FBV2pDLFNBQVM7d0JBQ3JDQTtvQkFDRjtnQkFDRjs7WUFFQWtDLE9BQU9DLGdCQUFnQixDQUFDLFdBQVdKO1lBQ25DOytDQUFPLElBQU1HLE9BQU9FLG1CQUFtQixDQUFDLFdBQVdMOztRQUNyRDtzQ0FBRztRQUFDL0I7S0FBUTtJQUVaLElBQUlJLE9BQU87UUFDVCxxQkFDRSw4REFBQ2lDO1lBQUlDLFdBQVU7c0JBQ2IsNEVBQUNEO2dCQUFJQyxXQUFVOztrQ0FDYiw4REFBQ0M7d0JBQUVELFdBQVU7a0NBQXNCbEM7Ozs7OztrQ0FDbkMsOERBQUNtQzt3QkFBRUQsV0FBVTtrQ0FBd0I7Ozs7Ozs7Ozs7Ozs7Ozs7O0lBSTdDO0lBRUEscUJBQ0UsOERBQUNEO1FBQUlDLFdBQVU7O1lBQ1pwQywyQkFDQyw4REFBQ21DO2dCQUFJQyxXQUFVOzBCQUNiLDRFQUFDRDtvQkFBSUMsV0FBVTs7c0NBQ2IsOERBQUNEOzRCQUFJQyxXQUFVOzs7Ozs7c0NBQ2YsOERBQUNDOzRCQUFFRCxXQUFVO3NDQUFnQjs7Ozs7Ozs7Ozs7Ozs7Ozs7MEJBSW5DLDhEQUFDbEI7Z0JBQ0NvQixLQUFLdkM7Z0JBQ0xxQyxXQUFVO2dCQUNWMUIsT0FBTyxHQUFtQixPQUFoQmIsVUFBVWEsS0FBSyxFQUFDO2dCQUMxQjZCLFNBQVE7Ozs7Ozs7Ozs7OztBQUloQjtHQTlzQmdCM0M7S0FBQUEiLCJzb3VyY2VzIjpbIi9Vc2Vycy9qYXNvbi9Qcm9qZWN0L015X0FwYXJ0bWVudF9XZWIvY29tcG9uZW50cy9hcGFydG1lbnQtM2Qtdmlld2VyLnRzeCJdLCJzb3VyY2VzQ29udGVudCI6WyJcInVzZSBjbGllbnRcIlxuXG5pbXBvcnQgeyB1c2VFZmZlY3QsIHVzZVJlZiwgdXNlU3RhdGUgfSBmcm9tIFwicmVhY3RcIlxuaW1wb3J0IHsgQXBhcnRtZW50RGF0YSB9IGZyb20gXCJAL3V0aWxzL2FwYXJ0bWVudC1kYXRhXCJcblxuaW50ZXJmYWNlIEFwYXJ0bWVudDNEVmlld2VyUHJvcHMge1xuICBhcGFydG1lbnQ6IEFwYXJ0bWVudERhdGFcbiAgb25DbG9zZT86ICgpID0+IHZvaWRcbn1cblxuZXhwb3J0IGZ1bmN0aW9uIEFwYXJ0bWVudDNEVmlld2VyKHsgYXBhcnRtZW50LCBvbkNsb3NlIH06IEFwYXJ0bWVudDNEVmlld2VyUHJvcHMpIHtcbiAgY29uc3QgaWZyYW1lUmVmID0gdXNlUmVmPEhUTUxJRnJhbWVFbGVtZW50PihudWxsKVxuICBjb25zdCBbaXNMb2FkaW5nLCBzZXRJc0xvYWRpbmddID0gdXNlU3RhdGUodHJ1ZSlcbiAgY29uc3QgW2Vycm9yLCBzZXRFcnJvcl0gPSB1c2VTdGF0ZTxzdHJpbmcgfCBudWxsPihudWxsKVxuICBjb25zdCBbaWZyYW1lS2V5LCBzZXRJZnJhbWVLZXldID0gdXNlU3RhdGUoMCkgLy8g5re75Yqga2V55p2l5by65Yi26YeN5paw5Yib5bu6aWZyYW1lXG5cbiAgdXNlRWZmZWN0KCgpID0+IHtcbiAgICBpZiAoIWFwYXJ0bWVudC5oYXNNb2RlbCkge1xuICAgICAgc2V0RXJyb3IoXCLor6Xlhazlr5PmmoLml6AzROaooeWei1wiKVxuICAgICAgc2V0SXNMb2FkaW5nKGZhbHNlKVxuICAgICAgcmV0dXJuXG4gICAgfVxuXG4gICAgLy8g6YeN572u54q25oCBXG4gICAgc2V0RXJyb3IobnVsbClcbiAgICBzZXRJc0xvYWRpbmcodHJ1ZSlcbiAgICBcbiAgICAvLyDlu7bov5/kuIDngrnml7bpl7Tnoa7kv51pZnJhbWXlrozlhajph43mlrDliJvlu7pcbiAgICBjb25zdCB0aW1lciA9IHNldFRpbWVvdXQoKCkgPT4ge1xuICAgICAgLy8g5Yib5bu6M0Tmn6XnnIvlmajnmoRIVE1M5YaF5a65XG4gICAgICBjb25zdCBjcmVhdGUzRFZpZXdlckhUTUwgPSAoKSA9PiB7XG4gICAgICAgIHJldHVybiBgXG48IURPQ1RZUEUgaHRtbD5cbjxodG1sIGxhbmc9XCJ6aC1DTlwiPlxuPGhlYWQ+XG4gICAgPG1ldGEgY2hhcnNldD1cIlVURi04XCI+XG4gICAgPG1ldGEgbmFtZT1cInZpZXdwb3J0XCIgY29udGVudD1cIndpZHRoPWRldmljZS13aWR0aCwgaW5pdGlhbC1zY2FsZT0xLjBcIj5cbiAgICA8dGl0bGU+JHthcGFydG1lbnQudGl0bGV9IC0gM0Tmn6XnnIvlmag8L3RpdGxlPlxuICAgIDxzdHlsZT5cbiAgICAgICAgYm9keSB7XG4gICAgICAgICAgICBtYXJnaW46IDA7XG4gICAgICAgICAgICBwYWRkaW5nOiAwO1xuICAgICAgICAgICAgZm9udC1mYW1pbHk6IC1hcHBsZS1zeXN0ZW0sIEJsaW5rTWFjU3lzdGVtRm9udCwgJ1NlZ29lIFVJJywgUm9ib3RvLCBzYW5zLXNlcmlmO1xuICAgICAgICAgICAgYmFja2dyb3VuZDogI2Y1ZjVmNTtcbiAgICAgICAgICAgIG92ZXJmbG93OiBoaWRkZW47XG4gICAgICAgIH1cbiAgICAgICAgXG4gICAgICAgIC52aWV3ZXItY29udGFpbmVyIHtcbiAgICAgICAgICAgIGRpc3BsYXk6IGZsZXg7XG4gICAgICAgICAgICBoZWlnaHQ6IDEwMHZoO1xuICAgICAgICAgICAgd2lkdGg6IDEwMHZ3O1xuICAgICAgICB9XG4gICAgICAgIFxuICAgICAgICAuc2lkZWJhciB7XG4gICAgICAgICAgICB3aWR0aDogMjgwcHg7XG4gICAgICAgICAgICBiYWNrZ3JvdW5kOiB3aGl0ZTtcbiAgICAgICAgICAgIGJvcmRlci1yaWdodDogMXB4IHNvbGlkICNlNWU1ZTU7XG4gICAgICAgICAgICBwYWRkaW5nOiAyMHB4O1xuICAgICAgICAgICAgb3ZlcmZsb3cteTogYXV0bztcbiAgICAgICAgICAgIGJveC1zaGFkb3c6IDJweCAwIDEwcHggcmdiYSgwLDAsMCwwLjEpO1xuICAgICAgICB9XG4gICAgICAgIFxuICAgICAgICAubW9kZWwtdmlldyB7XG4gICAgICAgICAgICBmbGV4OiAxO1xuICAgICAgICAgICAgcG9zaXRpb246IHJlbGF0aXZlO1xuICAgICAgICAgICAgYmFja2dyb3VuZDogI2YwZjBmMDtcbiAgICAgICAgfVxuICAgICAgICBcbiAgICAgICAgI21vZGVsQ29udGFpbmVyIHtcbiAgICAgICAgICAgIHdpZHRoOiAxMDAlO1xuICAgICAgICAgICAgaGVpZ2h0OiAxMDAlO1xuICAgICAgICAgICAgcG9zaXRpb246IHJlbGF0aXZlO1xuICAgICAgICB9XG4gICAgICAgIFxuICAgICAgICAucGFuZWwge1xuICAgICAgICAgICAgYmFja2dyb3VuZDogI2Y4ZjlmYTtcbiAgICAgICAgICAgIGJvcmRlcjogMXB4IHNvbGlkICNlOWVjZWY7XG4gICAgICAgICAgICBib3JkZXItcmFkaXVzOiA4cHg7XG4gICAgICAgICAgICBwYWRkaW5nOiAxNnB4O1xuICAgICAgICAgICAgbWFyZ2luLWJvdHRvbTogMTZweDtcbiAgICAgICAgfVxuICAgICAgICBcbiAgICAgICAgLnBhbmVsIGgzIHtcbiAgICAgICAgICAgIG1hcmdpbjogMCAwIDEycHggMDtcbiAgICAgICAgICAgIGZvbnQtc2l6ZTogMTRweDtcbiAgICAgICAgICAgIGZvbnQtd2VpZ2h0OiA2MDA7XG4gICAgICAgICAgICBjb2xvcjogIzMzMztcbiAgICAgICAgICAgIGRpc3BsYXk6IGZsZXg7XG4gICAgICAgICAgICBhbGlnbi1pdGVtczogY2VudGVyO1xuICAgICAgICAgICAgZ2FwOiA4cHg7XG4gICAgICAgIH1cbiAgICAgICAgXG4gICAgICAgIC5idG4ge1xuICAgICAgICAgICAgYmFja2dyb3VuZDogIzAwN2JmZjtcbiAgICAgICAgICAgIGNvbG9yOiB3aGl0ZTtcbiAgICAgICAgICAgIGJvcmRlcjogbm9uZTtcbiAgICAgICAgICAgIHBhZGRpbmc6IDhweCAxNnB4O1xuICAgICAgICAgICAgYm9yZGVyLXJhZGl1czogNnB4O1xuICAgICAgICAgICAgY3Vyc29yOiBwb2ludGVyO1xuICAgICAgICAgICAgZm9udC1zaXplOiAxM3B4O1xuICAgICAgICAgICAgbWFyZ2luOiA0cHg7XG4gICAgICAgICAgICB0cmFuc2l0aW9uOiBiYWNrZ3JvdW5kLWNvbG9yIDAuMnM7XG4gICAgICAgIH1cbiAgICAgICAgXG4gICAgICAgIC5idG46aG92ZXIge1xuICAgICAgICAgICAgYmFja2dyb3VuZDogIzAwNTZiMztcbiAgICAgICAgfVxuICAgICAgICBcbiAgICAgICAgLmJ0bi5zZWNvbmRhcnkge1xuICAgICAgICAgICAgYmFja2dyb3VuZDogIzZjNzU3ZDtcbiAgICAgICAgfVxuICAgICAgICBcbiAgICAgICAgLmJ0bi5zZWNvbmRhcnk6aG92ZXIge1xuICAgICAgICAgICAgYmFja2dyb3VuZDogIzU0NWI2MjtcbiAgICAgICAgfVxuICAgICAgICBcbiAgICAgICAgLmJ0bi5mdWxsLXdpZHRoIHtcbiAgICAgICAgICAgIHdpZHRoOiAxMDAlO1xuICAgICAgICAgICAgbWFyZ2luOiA0cHggMDtcbiAgICAgICAgfVxuICAgICAgICBcbiAgICAgICAgLmNvbnRyb2xzLWdyb3VwIHtcbiAgICAgICAgICAgIGRpc3BsYXk6IGZsZXg7XG4gICAgICAgICAgICBmbGV4LXdyYXA6IHdyYXA7XG4gICAgICAgICAgICBnYXA6IDRweDtcbiAgICAgICAgICAgIG1hcmdpbi10b3A6IDhweDtcbiAgICAgICAgfVxuICAgICAgICBcbiAgICAgICAgLmNvbnRyb2xzLWdyb3VwIC5idG4ge1xuICAgICAgICAgICAgZmxleDogMTtcbiAgICAgICAgICAgIG1pbi13aWR0aDogODBweDtcbiAgICAgICAgfVxuICAgICAgICBcbiAgICAgICAgc2VsZWN0IHtcbiAgICAgICAgICAgIHdpZHRoOiAxMDAlO1xuICAgICAgICAgICAgcGFkZGluZzogOHB4O1xuICAgICAgICAgICAgYm9yZGVyOiAxcHggc29saWQgI2RkZDtcbiAgICAgICAgICAgIGJvcmRlci1yYWRpdXM6IDRweDtcbiAgICAgICAgICAgIGZvbnQtc2l6ZTogMTNweDtcbiAgICAgICAgICAgIG1hcmdpbi10b3A6IDhweDtcbiAgICAgICAgfVxuICAgICAgICBcbiAgICAgICAgLnZpZXctaW5mbyB7XG4gICAgICAgICAgICBwb3NpdGlvbjogYWJzb2x1dGU7XG4gICAgICAgICAgICB0b3A6IDIwcHg7XG4gICAgICAgICAgICByaWdodDogMjBweDtcbiAgICAgICAgICAgIGJhY2tncm91bmQ6IHJnYmEoMCwwLDAsMC43KTtcbiAgICAgICAgICAgIGNvbG9yOiB3aGl0ZTtcbiAgICAgICAgICAgIHBhZGRpbmc6IDhweCAxMnB4O1xuICAgICAgICAgICAgYm9yZGVyLXJhZGl1czogNnB4O1xuICAgICAgICAgICAgZm9udC1zaXplOiAxMnB4O1xuICAgICAgICAgICAgei1pbmRleDogMTAwO1xuICAgICAgICB9XG4gICAgICAgIFxuICAgICAgICAuZXNjLXByb21wdCB7XG4gICAgICAgICAgICBwb3NpdGlvbjogYWJzb2x1dGU7XG4gICAgICAgICAgICB0b3A6IDIwcHg7XG4gICAgICAgICAgICBsZWZ0OiAyMHB4O1xuICAgICAgICAgICAgYmFja2dyb3VuZDogcmdiYSgyNTUsMCwwLDAuOCk7XG4gICAgICAgICAgICBjb2xvcjogd2hpdGU7XG4gICAgICAgICAgICBwYWRkaW5nOiA4cHggMTJweDtcbiAgICAgICAgICAgIGJvcmRlci1yYWRpdXM6IDZweDtcbiAgICAgICAgICAgIGZvbnQtc2l6ZTogMTJweDtcbiAgICAgICAgICAgIHotaW5kZXg6IDEwMDtcbiAgICAgICAgfVxuICAgICAgICBcbiAgICAgICAgLmVzYy1wcm9tcHQuaGlkZGVuIHtcbiAgICAgICAgICAgIGRpc3BsYXk6IG5vbmU7XG4gICAgICAgIH1cbiAgICAgICAgXG4gICAgICAgICNsb2FkaW5nT3ZlcmxheSB7XG4gICAgICAgICAgICBwb3NpdGlvbjogYWJzb2x1dGU7XG4gICAgICAgICAgICB0b3A6IDA7XG4gICAgICAgICAgICBsZWZ0OiAwO1xuICAgICAgICAgICAgd2lkdGg6IDEwMCU7XG4gICAgICAgICAgICBoZWlnaHQ6IDEwMCU7XG4gICAgICAgICAgICBiYWNrZ3JvdW5kOiByZ2JhKDI1NSwyNTUsMjU1LDAuOSk7XG4gICAgICAgICAgICBkaXNwbGF5OiBmbGV4O1xuICAgICAgICAgICAgZmxleC1kaXJlY3Rpb246IGNvbHVtbjtcbiAgICAgICAgICAgIGp1c3RpZnktY29udGVudDogY2VudGVyO1xuICAgICAgICAgICAgYWxpZ24taXRlbXM6IGNlbnRlcjtcbiAgICAgICAgICAgIHotaW5kZXg6IDEwMDA7XG4gICAgICAgIH1cbiAgICAgICAgXG4gICAgICAgIC5zcGlubmVyIHtcbiAgICAgICAgICAgIHdpZHRoOiA0MHB4O1xuICAgICAgICAgICAgaGVpZ2h0OiA0MHB4O1xuICAgICAgICAgICAgYm9yZGVyOiA0cHggc29saWQgI2YzZjNmMztcbiAgICAgICAgICAgIGJvcmRlci10b3A6IDRweCBzb2xpZCAjMDA3YmZmO1xuICAgICAgICAgICAgYm9yZGVyLXJhZGl1czogNTAlO1xuICAgICAgICAgICAgYW5pbWF0aW9uOiBzcGluIDFzIGxpbmVhciBpbmZpbml0ZTtcbiAgICAgICAgfVxuICAgICAgICBcbiAgICAgICAgQGtleWZyYW1lcyBzcGluIHtcbiAgICAgICAgICAgIDAlIHsgdHJhbnNmb3JtOiByb3RhdGUoMGRlZyk7IH1cbiAgICAgICAgICAgIDEwMCUgeyB0cmFuc2Zvcm06IHJvdGF0ZSgzNjBkZWcpOyB9XG4gICAgICAgIH1cbiAgICAgICAgXG4gICAgICAgIC5sb2FkaW5nLXRleHQge1xuICAgICAgICAgICAgbWFyZ2luLXRvcDogMTZweDtcbiAgICAgICAgICAgIGZvbnQtc2l6ZTogMTRweDtcbiAgICAgICAgICAgIGNvbG9yOiAjNjY2O1xuICAgICAgICB9XG4gICAgICAgIFxuICAgICAgICAuY2VudGVyLXNjcmVlbiB7XG4gICAgICAgICAgICBwb3NpdGlvbjogYWJzb2x1dGU7XG4gICAgICAgICAgICB0b3A6IDUwJTtcbiAgICAgICAgICAgIGxlZnQ6IDUwJTtcbiAgICAgICAgICAgIHRyYW5zZm9ybTogdHJhbnNsYXRlKC01MCUsIC01MCUpO1xuICAgICAgICAgICAgei1pbmRleDogMjAwO1xuICAgICAgICB9XG4gICAgICAgIFxuICAgICAgICAuY2VudGVyLXNjcmVlbi5oaWRkZW4ge1xuICAgICAgICAgICAgZGlzcGxheTogbm9uZTtcbiAgICAgICAgfVxuICAgICAgICBcbiAgICAgICAgLnByb21wdC1jb250ZW50IHtcbiAgICAgICAgICAgIGJhY2tncm91bmQ6IHdoaXRlO1xuICAgICAgICAgICAgcGFkZGluZzogMjBweDtcbiAgICAgICAgICAgIGJvcmRlci1yYWRpdXM6IDhweDtcbiAgICAgICAgICAgIGJveC1zaGFkb3c6IDAgNHB4IDIwcHggcmdiYSgwLDAsMCwwLjMpO1xuICAgICAgICB9XG4gICAgICAgIFxuICAgICAgICAuY2xvc2UtYnRuIHtcbiAgICAgICAgICAgIHBvc2l0aW9uOiBhYnNvbHV0ZTtcbiAgICAgICAgICAgIHRvcDogMTBweDtcbiAgICAgICAgICAgIHJpZ2h0OiAxMHB4O1xuICAgICAgICAgICAgYmFja2dyb3VuZDogcmdiYSgwLDAsMCwwLjUpO1xuICAgICAgICAgICAgY29sb3I6IHdoaXRlO1xuICAgICAgICAgICAgYm9yZGVyOiBub25lO1xuICAgICAgICAgICAgd2lkdGg6IDMwcHg7XG4gICAgICAgICAgICBoZWlnaHQ6IDMwcHg7XG4gICAgICAgICAgICBib3JkZXItcmFkaXVzOiA1MCU7XG4gICAgICAgICAgICBjdXJzb3I6IHBvaW50ZXI7XG4gICAgICAgICAgICBmb250LXNpemU6IDE2cHg7XG4gICAgICAgICAgICB6LWluZGV4OiAxMDAxO1xuICAgICAgICB9XG4gICAgICAgIFxuICAgICAgICAuY2xvc2UtYnRuOmhvdmVyIHtcbiAgICAgICAgICAgIGJhY2tncm91bmQ6IHJnYmEoMCwwLDAsMC43KTtcbiAgICAgICAgfVxuICAgIDwvc3R5bGU+XG48L2hlYWQ+XG48Ym9keT5cbiAgICA8ZGl2IGNsYXNzPVwidmlld2VyLWNvbnRhaW5lclwiPlxuICAgICAgICA8ZGl2IGNsYXNzPVwic2lkZWJhclwiPlxuICAgICAgICAgICAgPGRpdiBjbGFzcz1cInBhbmVsXCI+XG4gICAgICAgICAgICAgICAgPGgzPvCfj6Ag5YWs5a+T5L+h5oGvPC9oMz5cbiAgICAgICAgICAgICAgICA8aDQgc3R5bGU9XCJtYXJnaW46IDA7IGNvbG9yOiAjMzMzO1wiPiR7YXBhcnRtZW50LnRpdGxlfTwvaDQ+XG4gICAgICAgICAgICAgICAgPHAgc3R5bGU9XCJmb250LXNpemU6IDEycHg7IGNvbG9yOiAjNjY2OyBtYXJnaW46IDhweCAwIDAgMDtcIj4ke2FwYXJ0bWVudC5kZXNjcmlwdGlvbn08L3A+XG4gICAgICAgICAgICA8L2Rpdj5cblxuICAgICAgICAgICAgPGRpdiBjbGFzcz1cInBhbmVsXCI+XG4gICAgICAgICAgICAgICAgPGgzPvCfjq4g6KeG6KeS5o6n5Yi2PC9oMz5cbiAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzPVwiY29udHJvbHMtZ3JvdXBcIj5cbiAgICAgICAgICAgICAgICAgICAgPGJ1dHRvbiBpZD1cInRvZ2dsZUNvbnRyb2xNb2RlQnRuXCIgY2xhc3M9XCJidG4gZnVsbC13aWR0aFwiPlxuICAgICAgICAgICAgICAgICAgICAgICAgPHNwYW4gaWQ9XCJjb250cm9sTW9kZVRleHRcIj7liIfmjaLliLBGUFPmqKHlvI88L3NwYW4+XG4gICAgICAgICAgICAgICAgICAgIDwvYnV0dG9uPlxuICAgICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgICAgIDxkaXYgY2xhc3M9XCJjb250cm9scy1ncm91cFwiPlxuICAgICAgICAgICAgICAgICAgICA8YnV0dG9uIGlkPVwidmlld1RvcEJ0blwiIGNsYXNzPVwiYnRuIHNlY29uZGFyeVwiPumhtuinhuWbvjwvYnV0dG9uPlxuICAgICAgICAgICAgICAgICAgICA8YnV0dG9uIGlkPVwidmlld0Zyb250QnRuXCIgY2xhc3M9XCJidG4gc2Vjb25kYXJ5XCI+5q2j6KeG5Zu+PC9idXR0b24+XG4gICAgICAgICAgICAgICAgICAgIDxidXR0b24gaWQ9XCJ2aWV3U2lkZUJ0blwiIGNsYXNzPVwiYnRuIHNlY29uZGFyeVwiPuS+p+inhuWbvjwvYnV0dG9uPlxuICAgICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgICAgIDxkaXYgY2xhc3M9XCJjb250cm9scy1ncm91cFwiPlxuICAgICAgICAgICAgICAgICAgICA8YnV0dG9uIGlkPVwicmVzZXRWaWV3QnRuXCIgY2xhc3M9XCJidG4gZnVsbC13aWR0aFwiPumHjee9ruinhuWbvjwvYnV0dG9uPlxuICAgICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgICAgIDxkaXYgY2xhc3M9XCJjb250cm9scy1ncm91cFwiPlxuICAgICAgICAgICAgICAgICAgICA8YnV0dG9uIGlkPVwidG9nZ2xlV2lyZWZyYW1lQnRuXCIgY2xhc3M9XCJidG4gc2Vjb25kYXJ5IGZ1bGwtd2lkdGhcIj7liIfmjaLnur/moYbmqKHlvI88L2J1dHRvbj5cbiAgICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgIDwvZGl2PlxuXG4gICAgICAgICAgICA8ZGl2IGNsYXNzPVwicGFuZWxcIj5cbiAgICAgICAgICAgICAgICA8aDM+4pqZ77iPIOi0qOmHj+aOp+WItjwvaDM+XG4gICAgICAgICAgICAgICAgPGxhYmVsIGZvcj1cInF1YWxpdHlTZWxlY3RvclwiPua4suafk+i0qOmHjzo8L2xhYmVsPlxuICAgICAgICAgICAgICAgIDxzZWxlY3QgaWQ9XCJxdWFsaXR5U2VsZWN0b3JcIj5cbiAgICAgICAgICAgICAgICAgICAgPG9wdGlvbiB2YWx1ZT1cImxvd1wiPuS9jiAo5pu05rWB55WFKTwvb3B0aW9uPlxuICAgICAgICAgICAgICAgICAgICA8b3B0aW9uIHZhbHVlPVwibWVkaXVtXCIgc2VsZWN0ZWQ+5LitICjlubPooaEpPC9vcHRpb24+XG4gICAgICAgICAgICAgICAgICAgIDxvcHRpb24gdmFsdWU9XCJoaWdoXCI+6auYICjmm7TmuIXmmbApPC9vcHRpb24+XG4gICAgICAgICAgICAgICAgPC9zZWxlY3Q+XG4gICAgICAgICAgICA8L2Rpdj5cblxuICAgICAgICAgICAgPGRpdiBjbGFzcz1cInBhbmVsXCI+XG4gICAgICAgICAgICAgICAgPGgzPvCfk7cg5oiq5Zu+PC9oMz5cbiAgICAgICAgICAgICAgICA8YnV0dG9uIGlkPVwic2NyZWVuc2hvdEJ0blwiIGNsYXNzPVwiYnRuIGZ1bGwtd2lkdGhcIj7kv53lrZjmiKrlm748L2J1dHRvbj5cbiAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICA8L2Rpdj5cblxuICAgICAgICA8ZGl2IGNsYXNzPVwibW9kZWwtdmlld1wiPlxuICAgICAgICAgICAgPGJ1dHRvbiBjbGFzcz1cImNsb3NlLWJ0blwiIG9uY2xpY2s9XCJ3aW5kb3cucGFyZW50LnBvc3RNZXNzYWdlKCdjbG9zZScsICcqJylcIiB0aXRsZT1cIuWFs+mXrVwiPsOXPC9idXR0b24+XG4gICAgICAgICAgICA8ZGl2IGlkPVwibW9kZWxDb250YWluZXJcIj5cbiAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzPVwidmlldy1pbmZvXCI+XG4gICAgICAgICAgICAgICAgICAgIDxkaXYgaWQ9XCJyb3RhdGlvbkluZm9cIj7op4bop5I6IDDCsDwvZGl2PlxuICAgICAgICAgICAgICAgICAgICA8ZGl2IGlkPVwiem9vbUluZm9cIj7pq5jluqY6ICR7YXBhcnRtZW50LmNvbmZpZy5jYW1lcmEuaGVpZ2h0fW08L2Rpdj5cbiAgICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgICAgICA8ZGl2IGlkPVwiZXNjRXhpdFByb21wdFwiIGNsYXNzPVwiZXNjLXByb21wdCBoaWRkZW5cIj5cbiAgICAgICAgICAgICAgICAgICAg5oyJRVND6YCA5Ye6RlBT5qih5byPXG4gICAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICAgICAgPGRpdiBpZD1cImxvYWRpbmdPdmVybGF5XCI+XG4gICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3M9XCJzcGlubmVyXCI+PC9kaXY+XG4gICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3M9XCJsb2FkaW5nLXRleHRcIj7mraPlnKjliqDovb3mqKHlnosuLi48L2Rpdj5cbiAgICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgICAgICA8ZGl2IGlkPVwicG9pbnRlckxvY2tQcm9tcHRcIiBjbGFzcz1cImNlbnRlci1zY3JlZW4gaGlkZGVuXCI+XG4gICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3M9XCJwcm9tcHQtY29udGVudFwiPlxuICAgICAgICAgICAgICAgICAgICAgICAgPGJ1dHRvbiBpZD1cImVudGVyRlBTQnRuXCIgY2xhc3M9XCJidG4gZnVsbC13aWR0aFwiIHN0eWxlPVwiZm9udC1zaXplOjEuMXJlbTtwYWRkaW5nOjFlbSAyZW07XCI+54K55Ye75Lul5ZCv55SoRlBT5o6n5Yi2PC9idXR0b24+XG4gICAgICAgICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgIDwvZGl2PlxuICAgIDwvZGl2PlxuXG4gICAgPCEtLSBUaHJlZS5qcyDlupMgLS0+XG4gICAgPHNjcmlwdCBzcmM9XCJodHRwczovL2NkbmpzLmNsb3VkZmxhcmUuY29tL2FqYXgvbGlicy90aHJlZS5qcy9yMTI4L3RocmVlLm1pbi5qc1wiPjwvc2NyaXB0PlxuICAgIDxzY3JpcHQgc3JjPVwiaHR0cHM6Ly9jZG4uanNkZWxpdnIubmV0L25wbS90aHJlZUAwLjEyOC4wL2V4YW1wbGVzL2pzL2NvbnRyb2xzL09yYml0Q29udHJvbHMubWluLmpzXCI+PC9zY3JpcHQ+XG4gICAgPHNjcmlwdCBzcmM9XCJodHRwczovL2Nkbi5qc2RlbGl2ci5uZXQvbnBtL3RocmVlQDAuMTI4LjAvZXhhbXBsZXMvanMvY29udHJvbHMvUG9pbnRlckxvY2tDb250cm9scy5taW4uanNcIj48L3NjcmlwdD5cbiAgICA8c2NyaXB0IHNyYz1cImh0dHBzOi8vY2RuLmpzZGVsaXZyLm5ldC9ucG0vdGhyZWVAMC4xMjguMC9leGFtcGxlcy9qcy9sb2FkZXJzL09CSkxvYWRlci5taW4uanNcIj48L3NjcmlwdD5cbiAgICA8c2NyaXB0IHNyYz1cImh0dHBzOi8vY2RuLmpzZGVsaXZyLm5ldC9ucG0vdGhyZWVAMC4xMjguMC9leGFtcGxlcy9qcy9sb2FkZXJzL01UTExvYWRlci5taW4uanNcIj48L3NjcmlwdD5cbiAgICBcbiAgICA8c2NyaXB0PlxuICAgICAgICAvLyDlvLrliLbph43nva7miYDmnInlhajlsYDlj5jph49cbiAgICAgICAgaWYgKHdpbmRvdy5zY2VuZSkge1xuICAgICAgICAgICAgd2luZG93LnNjZW5lLmNsZWFyKCk7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKHdpbmRvdy5yZW5kZXJlcikge1xuICAgICAgICAgICAgd2luZG93LnJlbmRlcmVyLmRpc3Bvc2UoKTtcbiAgICAgICAgfVxuICAgICAgICBcbiAgICAgICAgLy8gM0Tmn6XnnIvlmajliJ3lp4vljJbohJrmnKxcbiAgICAgICAgbGV0IHNjZW5lLCBjYW1lcmEsIHJlbmRlcmVyLCBjb250cm9scywgbW9kZWw7XG4gICAgICAgIGxldCBvcmJpdENvbnRyb2xzLCBwb2ludGVyTG9ja0NvbnRyb2xzO1xuICAgICAgICBsZXQgaXNXaXJlZnJhbWUgPSBmYWxzZTtcbiAgICAgICAgbGV0IGN1cnJlbnRDb250cm9sTW9kZSA9ICdvcmJpdCc7IC8vICdvcmJpdCcgb3IgJ2ZwcydcbiAgICAgICAgbGV0IGFuaW1hdGlvbklkID0gbnVsbDsgLy8g55So5LqO5riF55CG5Yqo55S75b6q546vXG4gICAgICAgIFxuICAgICAgICAvLyDlhazlr5PphY3nva5cbiAgICAgICAgY29uc3QgYXBhcnRtZW50Q29uZmlnID0gJHtKU09OLnN0cmluZ2lmeShhcGFydG1lbnQuY29uZmlnKX07XG4gICAgICAgIGNvbnN0IG1vZGVsUGF0aCA9IFwiJHthcGFydG1lbnQubW9kZWxQYXRofVwiO1xuICAgICAgICBcbiAgICAgICAgLy8g5riF55CG5LmL5YmN55qE6LWE5rqQXG4gICAgICAgIGZ1bmN0aW9uIGNsZWFudXAoKSB7XG4gICAgICAgICAgICBpZiAoYW5pbWF0aW9uSWQpIHtcbiAgICAgICAgICAgICAgICBjYW5jZWxBbmltYXRpb25GcmFtZShhbmltYXRpb25JZCk7XG4gICAgICAgICAgICAgICAgYW5pbWF0aW9uSWQgPSBudWxsO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgXG4gICAgICAgICAgICBpZiAocmVuZGVyZXIpIHtcbiAgICAgICAgICAgICAgICByZW5kZXJlci5kaXNwb3NlKCk7XG4gICAgICAgICAgICAgICAgcmVuZGVyZXIuZm9yY2VDb250ZXh0TG9zcygpO1xuICAgICAgICAgICAgICAgIGlmIChyZW5kZXJlci5kb21FbGVtZW50ICYmIHJlbmRlcmVyLmRvbUVsZW1lbnQucGFyZW50Tm9kZSkge1xuICAgICAgICAgICAgICAgICAgICByZW5kZXJlci5kb21FbGVtZW50LnBhcmVudE5vZGUucmVtb3ZlQ2hpbGQocmVuZGVyZXIuZG9tRWxlbWVudCk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgXG4gICAgICAgICAgICBpZiAoc2NlbmUpIHtcbiAgICAgICAgICAgICAgICBzY2VuZS5jbGVhcigpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgXG4gICAgICAgICAgICAvLyDmuIXnkIbkuovku7bnm5HlkKzlmahcbiAgICAgICAgICAgIHdpbmRvdy5yZW1vdmVFdmVudExpc3RlbmVyKCdyZXNpemUnLCBvbldpbmRvd1Jlc2l6ZSk7XG4gICAgICAgICAgICBkb2N1bWVudC5yZW1vdmVFdmVudExpc3RlbmVyKCdrZXlkb3duJywgb25LZXlEb3duKTtcbiAgICAgICAgfVxuICAgICAgICBcbiAgICAgICAgLy8g5Yid5aeL5YyWM0TlnLrmma9cbiAgICAgICAgZnVuY3Rpb24gaW5pdCgpIHtcbiAgICAgICAgICAgIHRyeSB7XG4gICAgICAgICAgICAgICAgLy8g5YWI5riF55CG5LmL5YmN55qE6LWE5rqQXG4gICAgICAgICAgICAgICAgY2xlYW51cCgpO1xuICAgICAgICAgICAgICAgIFxuICAgICAgICAgICAgICAgIC8vIOWIm+W7uuWcuuaZr1xuICAgICAgICAgICAgICAgIHNjZW5lID0gbmV3IFRIUkVFLlNjZW5lKCk7XG4gICAgICAgICAgICAgICAgc2NlbmUuYmFja2dyb3VuZCA9IG5ldyBUSFJFRS5Db2xvcigweGYwZjBmMCk7XG4gICAgICAgICAgICAgICAgXG4gICAgICAgICAgICAgICAgLy8g5Yib5bu655u45py6XG4gICAgICAgICAgICAgICAgY2FtZXJhID0gbmV3IFRIUkVFLlBlcnNwZWN0aXZlQ2FtZXJhKDc1LCB3aW5kb3cuaW5uZXJXaWR0aCAvIHdpbmRvdy5pbm5lckhlaWdodCwgMC4xLCAxMDAwKTtcbiAgICAgICAgICAgICAgICBjYW1lcmEucG9zaXRpb24uc2V0KGFwYXJ0bWVudENvbmZpZy5jYW1lcmEuaW5pdF9wb2ludFswXSwgYXBhcnRtZW50Q29uZmlnLmNhbWVyYS5oZWlnaHQsIGFwYXJ0bWVudENvbmZpZy5jYW1lcmEuaW5pdF9wb2ludFsxXSk7XG4gICAgICAgICAgICAgICAgXG4gICAgICAgICAgICAgICAgLy8g5Yib5bu65riy5p+T5ZmoXG4gICAgICAgICAgICAgICAgcmVuZGVyZXIgPSBuZXcgVEhSRUUuV2ViR0xSZW5kZXJlcih7IGFudGlhbGlhczogdHJ1ZSB9KTtcbiAgICAgICAgICAgICAgICByZW5kZXJlci5zZXRTaXplKHdpbmRvdy5pbm5lcldpZHRoIC0gMjgwLCB3aW5kb3cuaW5uZXJIZWlnaHQpO1xuICAgICAgICAgICAgICAgIHJlbmRlcmVyLnNoYWRvd01hcC5lbmFibGVkID0gdHJ1ZTtcbiAgICAgICAgICAgICAgICByZW5kZXJlci5zaGFkb3dNYXAudHlwZSA9IFRIUkVFLlBDRlNvZnRTaGFkb3dNYXA7XG4gICAgICAgICAgICAgICAgXG4gICAgICAgICAgICAgICAgY29uc3QgY29udGFpbmVyID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ21vZGVsQ29udGFpbmVyJyk7XG4gICAgICAgICAgICAgICAgY29uc3QgY2FudmFzID0gY29udGFpbmVyLnF1ZXJ5U2VsZWN0b3IoJ2NhbnZhcycpO1xuICAgICAgICAgICAgICAgIGlmIChjYW52YXMpIHtcbiAgICAgICAgICAgICAgICAgICAgY29udGFpbmVyLnJlbW92ZUNoaWxkKGNhbnZhcyk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGNvbnRhaW5lci5hcHBlbmRDaGlsZChyZW5kZXJlci5kb21FbGVtZW50KTtcbiAgICAgICAgICAgICAgICBcbiAgICAgICAgICAgICAgICAvLyDliJvlu7rmjqfliLblmahcbiAgICAgICAgICAgICAgICBzZXR1cENvbnRyb2xzKCk7XG4gICAgICAgICAgICAgICAgXG4gICAgICAgICAgICAgICAgLy8g5re75Yqg5YWJ5rqQXG4gICAgICAgICAgICAgICAgc2V0dXBMaWdodGluZygpO1xuICAgICAgICAgICAgICAgIFxuICAgICAgICAgICAgICAgIC8vIOWKoOi9veaooeWei1xuICAgICAgICAgICAgICAgIGxvYWRNb2RlbCgpO1xuICAgICAgICAgICAgICAgIFxuICAgICAgICAgICAgICAgIC8vIOiuvue9ruS6i+S7tuebkeWQrFxuICAgICAgICAgICAgICAgIHNldHVwRXZlbnRMaXN0ZW5lcnMoKTtcbiAgICAgICAgICAgICAgICBcbiAgICAgICAgICAgICAgICAvLyDlvIDlp4vmuLLmn5Plvqrnjq9cbiAgICAgICAgICAgICAgICBhbmltYXRlKCk7XG4gICAgICAgICAgICAgICAgXG4gICAgICAgICAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgICAgICAgICAgIGNvbnNvbGUuZXJyb3IoJ+WIneWni+WMljNE5Zy65pmv5aSx6LSlOicsIGVycm9yKTtcbiAgICAgICAgICAgICAgICBjb25zdCBsb2FkaW5nT3ZlcmxheSA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdsb2FkaW5nT3ZlcmxheScpO1xuICAgICAgICAgICAgICAgIGlmIChsb2FkaW5nT3ZlcmxheSkge1xuICAgICAgICAgICAgICAgICAgICBsb2FkaW5nT3ZlcmxheS5pbm5lckhUTUwgPSAnPGRpdiBzdHlsZT1cImNvbG9yOiByZWQ7XCI+M0TlnLrmma/liJ3lp4vljJblpLHotKU8L2Rpdj4nO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICBcbiAgICAgICAgZnVuY3Rpb24gc2V0dXBDb250cm9scygpIHtcbiAgICAgICAgICAgIC8vIOi9qOmBk+aOp+WItuWZqFxuICAgICAgICAgICAgb3JiaXRDb250cm9scyA9IG5ldyBUSFJFRS5PcmJpdENvbnRyb2xzKGNhbWVyYSwgcmVuZGVyZXIuZG9tRWxlbWVudCk7XG4gICAgICAgICAgICBvcmJpdENvbnRyb2xzLmVuYWJsZURhbXBpbmcgPSB0cnVlO1xuICAgICAgICAgICAgb3JiaXRDb250cm9scy5kYW1waW5nRmFjdG9yID0gMC4wNTtcbiAgICAgICAgICAgIG9yYml0Q29udHJvbHMudGFyZ2V0LnNldCgwLCAwLCAwKTtcbiAgICAgICAgICAgIFxuICAgICAgICAgICAgLy8gRlBT5o6n5Yi25ZmoXG4gICAgICAgICAgICBwb2ludGVyTG9ja0NvbnRyb2xzID0gbmV3IFRIUkVFLlBvaW50ZXJMb2NrQ29udHJvbHMoY2FtZXJhLCByZW5kZXJlci5kb21FbGVtZW50KTtcbiAgICAgICAgICAgIHNjZW5lLmFkZChwb2ludGVyTG9ja0NvbnRyb2xzLmdldE9iamVjdCgpKTtcbiAgICAgICAgICAgIFxuICAgICAgICAgICAgLy8g6buY6K6k5L2/55So6L2o6YGT5o6n5Yi25ZmoXG4gICAgICAgICAgICBvcmJpdENvbnRyb2xzLmVuYWJsZWQgPSB0cnVlO1xuICAgICAgICAgICAgcG9pbnRlckxvY2tDb250cm9scy5lbmFibGVkID0gZmFsc2U7XG4gICAgICAgIH1cbiAgICAgICAgXG4gICAgICAgIGZ1bmN0aW9uIHNldHVwTGlnaHRpbmcoKSB7XG4gICAgICAgICAgICAvLyDnjq/looPlhYlcbiAgICAgICAgICAgIGNvbnN0IGFtYmllbnRMaWdodCA9IG5ldyBUSFJFRS5BbWJpZW50TGlnaHQoMHg0MDQwNDAsIDAuNik7XG4gICAgICAgICAgICBzY2VuZS5hZGQoYW1iaWVudExpZ2h0KTtcbiAgICAgICAgICAgIFxuICAgICAgICAgICAgLy8g5pa55ZCR5YWJXG4gICAgICAgICAgICBjb25zdCBkaXJlY3Rpb25hbExpZ2h0ID0gbmV3IFRIUkVFLkRpcmVjdGlvbmFsTGlnaHQoMHhmZmZmZmYsIDAuOCk7XG4gICAgICAgICAgICBkaXJlY3Rpb25hbExpZ2h0LnBvc2l0aW9uLnNldCgxMCwgMTAsIDUpO1xuICAgICAgICAgICAgZGlyZWN0aW9uYWxMaWdodC5jYXN0U2hhZG93ID0gdHJ1ZTtcbiAgICAgICAgICAgIHNjZW5lLmFkZChkaXJlY3Rpb25hbExpZ2h0KTtcbiAgICAgICAgICAgIFxuICAgICAgICAgICAgLy8g54K55YWJ5rqQXG4gICAgICAgICAgICBjb25zdCBwb2ludExpZ2h0ID0gbmV3IFRIUkVFLlBvaW50TGlnaHQoMHhmZmZmZmYsIDAuNSk7XG4gICAgICAgICAgICBwb2ludExpZ2h0LnBvc2l0aW9uLnNldCgwLCA1LCAwKTtcbiAgICAgICAgICAgIHNjZW5lLmFkZChwb2ludExpZ2h0KTtcbiAgICAgICAgfVxuICAgICAgICBcbiAgICAgICAgZnVuY3Rpb24gbG9hZE1vZGVsKCkge1xuICAgICAgICAgICAgY29uc3QgbG9hZGluZ092ZXJsYXkgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnbG9hZGluZ092ZXJsYXknKTtcbiAgICAgICAgICAgIFxuICAgICAgICAgICAgLy8gTVRM5Yqg6L295ZmoXG4gICAgICAgICAgICBjb25zdCBtdGxMb2FkZXIgPSBuZXcgVEhSRUUuTVRMTG9hZGVyKCk7XG4gICAgICAgICAgICBtdGxMb2FkZXIuc2V0UGF0aChtb2RlbFBhdGggKyAnLycpO1xuICAgICAgICAgICAgXG4gICAgICAgICAgICBtdGxMb2FkZXIubG9hZCgndGV4dHVyZWRfb3V0cHV0Lm10bCcsIGZ1bmN0aW9uKG1hdGVyaWFscykge1xuICAgICAgICAgICAgICAgIG1hdGVyaWFscy5wcmVsb2FkKCk7XG4gICAgICAgICAgICAgICAgXG4gICAgICAgICAgICAgICAgLy8gT0JK5Yqg6L295ZmoXG4gICAgICAgICAgICAgICAgY29uc3Qgb2JqTG9hZGVyID0gbmV3IFRIUkVFLk9CSkxvYWRlcigpO1xuICAgICAgICAgICAgICAgIG9iakxvYWRlci5zZXRNYXRlcmlhbHMobWF0ZXJpYWxzKTtcbiAgICAgICAgICAgICAgICBvYmpMb2FkZXIuc2V0UGF0aChtb2RlbFBhdGggKyAnLycpO1xuICAgICAgICAgICAgICAgIFxuICAgICAgICAgICAgICAgIG9iakxvYWRlci5sb2FkKCd0ZXh0dXJlZF9vdXRwdXQub2JqJywgXG4gICAgICAgICAgICAgICAgICAgIGZ1bmN0aW9uKG9iamVjdCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgLy8g5qih5Z6L5Yqg6L295oiQ5YqfXG4gICAgICAgICAgICAgICAgICAgICAgICBtb2RlbCA9IG9iamVjdDtcbiAgICAgICAgICAgICAgICAgICAgICAgIHNjZW5lLmFkZChtb2RlbCk7XG4gICAgICAgICAgICAgICAgICAgICAgICBcbiAgICAgICAgICAgICAgICAgICAgICAgIC8vIOiuoeeul+aooeWei+i+ueeVjOebklxuICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgYm94ID0gbmV3IFRIUkVFLkJveDMoKS5zZXRGcm9tT2JqZWN0KG1vZGVsKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IGNlbnRlciA9IGJveC5nZXRDZW50ZXIobmV3IFRIUkVFLlZlY3RvcjMoKSk7XG4gICAgICAgICAgICAgICAgICAgICAgICBjb25zdCBzaXplID0gYm94LmdldFNpemUobmV3IFRIUkVFLlZlY3RvcjMoKSk7XG4gICAgICAgICAgICAgICAgICAgICAgICBcbiAgICAgICAgICAgICAgICAgICAgICAgIC8vIOiwg+aVtOebuOacuuS9jee9rlxuICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgbWF4RGltID0gTWF0aC5tYXgoc2l6ZS54LCBzaXplLnksIHNpemUueik7XG4gICAgICAgICAgICAgICAgICAgICAgICBjb25zdCBmb3YgPSBjYW1lcmEuZm92ICogKE1hdGguUEkgLyAxODApO1xuICAgICAgICAgICAgICAgICAgICAgICAgbGV0IGNhbWVyYVogPSBNYXRoLmFicyhtYXhEaW0gLyAyIC8gTWF0aC50YW4oZm92IC8gMikpO1xuICAgICAgICAgICAgICAgICAgICAgICAgY2FtZXJhWiAqPSAxLjU7IC8vIOWinuWKoOS4gOS6m+i3neemu1xuICAgICAgICAgICAgICAgICAgICAgICAgXG4gICAgICAgICAgICAgICAgICAgICAgICBjYW1lcmEucG9zaXRpb24uc2V0KGNlbnRlci54LCBjZW50ZXIueSArIGFwYXJ0bWVudENvbmZpZy5jYW1lcmEuaGVpZ2h0LCBjZW50ZXIueiArIGNhbWVyYVopO1xuICAgICAgICAgICAgICAgICAgICAgICAgb3JiaXRDb250cm9scy50YXJnZXQuY29weShjZW50ZXIpO1xuICAgICAgICAgICAgICAgICAgICAgICAgXG4gICAgICAgICAgICAgICAgICAgICAgICAvLyDpmpDol4/liqDovb3nlYzpnaJcbiAgICAgICAgICAgICAgICAgICAgICAgIGxvYWRpbmdPdmVybGF5LnN0eWxlLmRpc3BsYXkgPSAnbm9uZSc7XG4gICAgICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgICAgIGZ1bmN0aW9uKHByb2dyZXNzKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAvLyDliqDovb3ov5vluqZcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKCdMb2FkaW5nIHByb2dyZXNzOicsIHByb2dyZXNzKTtcbiAgICAgICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICAgICAgZnVuY3Rpb24oZXJyb3IpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIC8vIOWKoOi9vemUmeivr1xuICAgICAgICAgICAgICAgICAgICAgICAgY29uc29sZS5lcnJvcignRXJyb3IgbG9hZGluZyBtb2RlbDonLCBlcnJvcik7XG4gICAgICAgICAgICAgICAgICAgICAgICBsb2FkaW5nT3ZlcmxheS5pbm5lckhUTUwgPSAnPGRpdiBzdHlsZT1cImNvbG9yOiByZWQ7XCI+5qih5Z6L5Yqg6L295aSx6LSlPC9kaXY+JztcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICk7XG4gICAgICAgICAgICB9LCB1bmRlZmluZWQsIGZ1bmN0aW9uKGVycm9yKSB7XG4gICAgICAgICAgICAgICAgY29uc29sZS5lcnJvcignRXJyb3IgbG9hZGluZyBtYXRlcmlhbHM6JywgZXJyb3IpO1xuICAgICAgICAgICAgICAgIGxvYWRpbmdPdmVybGF5LmlubmVySFRNTCA9ICc8ZGl2IHN0eWxlPVwiY29sb3I6IHJlZDtcIj7mnZDotKjliqDovb3lpLHotKU8L2Rpdj4nO1xuICAgICAgICAgICAgfSk7XG4gICAgICAgIH1cbiAgICAgICAgXG4gICAgICAgIGZ1bmN0aW9uIHNldHVwRXZlbnRMaXN0ZW5lcnMoKSB7XG4gICAgICAgICAgICAvLyDmjqfliLbmqKHlvI/liIfmjaJcbiAgICAgICAgICAgIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCd0b2dnbGVDb250cm9sTW9kZUJ0bicpLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgdG9nZ2xlQ29udHJvbE1vZGUpO1xuICAgICAgICAgICAgXG4gICAgICAgICAgICAvLyDop4bop5LmjInpkq5cbiAgICAgICAgICAgIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCd2aWV3VG9wQnRuJykuYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCAoKSA9PiBzZXRWaWV3KCd0b3AnKSk7XG4gICAgICAgICAgICBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgndmlld0Zyb250QnRuJykuYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCAoKSA9PiBzZXRWaWV3KCdmcm9udCcpKTtcbiAgICAgICAgICAgIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCd2aWV3U2lkZUJ0bicpLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgKCkgPT4gc2V0Vmlldygnc2lkZScpKTtcbiAgICAgICAgICAgIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdyZXNldFZpZXdCdG4nKS5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIHJlc2V0Vmlldyk7XG4gICAgICAgICAgICBcbiAgICAgICAgICAgIC8vIOe6v+ahhuaooeW8j1xuICAgICAgICAgICAgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ3RvZ2dsZVdpcmVmcmFtZUJ0bicpLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgdG9nZ2xlV2lyZWZyYW1lKTtcbiAgICAgICAgICAgIFxuICAgICAgICAgICAgLy8g5oiq5Zu+XG4gICAgICAgICAgICBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnc2NyZWVuc2hvdEJ0bicpLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgdGFrZVNjcmVlbnNob3QpO1xuICAgICAgICAgICAgXG4gICAgICAgICAgICAvLyDotKjph4/mjqfliLZcbiAgICAgICAgICAgIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdxdWFsaXR5U2VsZWN0b3InKS5hZGRFdmVudExpc3RlbmVyKCdjaGFuZ2UnLCBjaGFuZ2VRdWFsaXR5KTtcbiAgICAgICAgICAgIFxuICAgICAgICAgICAgLy8gRlBT5qih5byP55u45YWzXG4gICAgICAgICAgICBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnZW50ZXJGUFNCdG4nKS5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIGVudGVyRlBTTW9kZSk7XG4gICAgICAgICAgICBcbiAgICAgICAgICAgIC8vIOmUruebmOS6i+S7tlxuICAgICAgICAgICAgZG9jdW1lbnQuYWRkRXZlbnRMaXN0ZW5lcigna2V5ZG93bicsIG9uS2V5RG93bik7XG4gICAgICAgICAgICBcbiAgICAgICAgICAgIC8vIOeql+WPo+Wkp+Wwj+iwg+aVtFxuICAgICAgICAgICAgd2luZG93LmFkZEV2ZW50TGlzdGVuZXIoJ3Jlc2l6ZScsIG9uV2luZG93UmVzaXplKTtcbiAgICAgICAgfVxuICAgICAgICBcbiAgICAgICAgZnVuY3Rpb24gdG9nZ2xlQ29udHJvbE1vZGUoKSB7XG4gICAgICAgICAgICBpZiAoY3VycmVudENvbnRyb2xNb2RlID09PSAnb3JiaXQnKSB7XG4gICAgICAgICAgICAgICAgLy8g5YiH5o2i5YiwRlBT5qih5byPXG4gICAgICAgICAgICAgICAgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ3BvaW50ZXJMb2NrUHJvbXB0JykuY2xhc3NMaXN0LnJlbW92ZSgnaGlkZGVuJyk7XG4gICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgIC8vIOWIh+aNouWIsOi9qOmBk+aooeW8j1xuICAgICAgICAgICAgICAgIGV4aXRGUFNNb2RlKCk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgXG4gICAgICAgIGZ1bmN0aW9uIGVudGVyRlBTTW9kZSgpIHtcbiAgICAgICAgICAgIHBvaW50ZXJMb2NrQ29udHJvbHMubG9jaygpO1xuICAgICAgICAgICAgY3VycmVudENvbnRyb2xNb2RlID0gJ2Zwcyc7XG4gICAgICAgICAgICBvcmJpdENvbnRyb2xzLmVuYWJsZWQgPSBmYWxzZTtcbiAgICAgICAgICAgIHBvaW50ZXJMb2NrQ29udHJvbHMuZW5hYmxlZCA9IHRydWU7XG4gICAgICAgICAgICBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgncG9pbnRlckxvY2tQcm9tcHQnKS5jbGFzc0xpc3QuYWRkKCdoaWRkZW4nKTtcbiAgICAgICAgICAgIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdlc2NFeGl0UHJvbXB0JykuY2xhc3NMaXN0LnJlbW92ZSgnaGlkZGVuJyk7XG4gICAgICAgICAgICBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnY29udHJvbE1vZGVUZXh0JykudGV4dENvbnRlbnQgPSAn5YiH5o2i5Yiw6byg5qCH5qih5byPJztcbiAgICAgICAgfVxuICAgICAgICBcbiAgICAgICAgZnVuY3Rpb24gZXhpdEZQU01vZGUoKSB7XG4gICAgICAgICAgICBwb2ludGVyTG9ja0NvbnRyb2xzLnVubG9jaygpO1xuICAgICAgICAgICAgY3VycmVudENvbnRyb2xNb2RlID0gJ29yYml0JztcbiAgICAgICAgICAgIG9yYml0Q29udHJvbHMuZW5hYmxlZCA9IHRydWU7XG4gICAgICAgICAgICBwb2ludGVyTG9ja0NvbnRyb2xzLmVuYWJsZWQgPSBmYWxzZTtcbiAgICAgICAgICAgIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdlc2NFeGl0UHJvbXB0JykuY2xhc3NMaXN0LmFkZCgnaGlkZGVuJyk7XG4gICAgICAgICAgICBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnY29udHJvbE1vZGVUZXh0JykudGV4dENvbnRlbnQgPSAn5YiH5o2i5YiwRlBT5qih5byPJztcbiAgICAgICAgfVxuICAgICAgICBcbiAgICAgICAgZnVuY3Rpb24gc2V0Vmlldyh2aWV3VHlwZSkge1xuICAgICAgICAgICAgaWYgKCFtb2RlbCkgcmV0dXJuO1xuICAgICAgICAgICAgXG4gICAgICAgICAgICBjb25zdCBib3ggPSBuZXcgVEhSRUUuQm94MygpLnNldEZyb21PYmplY3QobW9kZWwpO1xuICAgICAgICAgICAgY29uc3QgY2VudGVyID0gYm94LmdldENlbnRlcihuZXcgVEhSRUUuVmVjdG9yMygpKTtcbiAgICAgICAgICAgIGNvbnN0IHNpemUgPSBib3guZ2V0U2l6ZShuZXcgVEhSRUUuVmVjdG9yMygpKTtcbiAgICAgICAgICAgIGNvbnN0IG1heERpbSA9IE1hdGgubWF4KHNpemUueCwgc2l6ZS55LCBzaXplLnopO1xuICAgICAgICAgICAgXG4gICAgICAgICAgICBzd2l0Y2godmlld1R5cGUpIHtcbiAgICAgICAgICAgICAgICBjYXNlICd0b3AnOlxuICAgICAgICAgICAgICAgICAgICBjYW1lcmEucG9zaXRpb24uc2V0KGNlbnRlci54LCBjZW50ZXIueSArIG1heERpbSwgY2VudGVyLnopO1xuICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICBjYXNlICdmcm9udCc6XG4gICAgICAgICAgICAgICAgICAgIGNhbWVyYS5wb3NpdGlvbi5zZXQoY2VudGVyLngsIGNlbnRlci55LCBjZW50ZXIueiArIG1heERpbSk7XG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgIGNhc2UgJ3NpZGUnOlxuICAgICAgICAgICAgICAgICAgICBjYW1lcmEucG9zaXRpb24uc2V0KGNlbnRlci54ICsgbWF4RGltLCBjZW50ZXIueSwgY2VudGVyLnopO1xuICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIFxuICAgICAgICAgICAgb3JiaXRDb250cm9scy50YXJnZXQuY29weShjZW50ZXIpO1xuICAgICAgICAgICAgb3JiaXRDb250cm9scy51cGRhdGUoKTtcbiAgICAgICAgfVxuICAgICAgICBcbiAgICAgICAgZnVuY3Rpb24gcmVzZXRWaWV3KCkge1xuICAgICAgICAgICAgaWYgKCFtb2RlbCkgcmV0dXJuO1xuICAgICAgICAgICAgXG4gICAgICAgICAgICBjb25zdCBib3ggPSBuZXcgVEhSRUUuQm94MygpLnNldEZyb21PYmplY3QobW9kZWwpO1xuICAgICAgICAgICAgY29uc3QgY2VudGVyID0gYm94LmdldENlbnRlcihuZXcgVEhSRUUuVmVjdG9yMygpKTtcbiAgICAgICAgICAgIGNvbnN0IHNpemUgPSBib3guZ2V0U2l6ZShuZXcgVEhSRUUuVmVjdG9yMygpKTtcbiAgICAgICAgICAgIGNvbnN0IG1heERpbSA9IE1hdGgubWF4KHNpemUueCwgc2l6ZS55LCBzaXplLnopO1xuICAgICAgICAgICAgXG4gICAgICAgICAgICBjYW1lcmEucG9zaXRpb24uc2V0KGNlbnRlci54LCBjZW50ZXIueSArIGFwYXJ0bWVudENvbmZpZy5jYW1lcmEuaGVpZ2h0LCBjZW50ZXIueiArIG1heERpbSAqIDEuNSk7XG4gICAgICAgICAgICBvcmJpdENvbnRyb2xzLnRhcmdldC5jb3B5KGNlbnRlcik7XG4gICAgICAgICAgICBvcmJpdENvbnRyb2xzLnVwZGF0ZSgpO1xuICAgICAgICB9XG4gICAgICAgIFxuICAgICAgICBmdW5jdGlvbiB0b2dnbGVXaXJlZnJhbWUoKSB7XG4gICAgICAgICAgICBpZiAoIW1vZGVsKSByZXR1cm47XG4gICAgICAgICAgICBcbiAgICAgICAgICAgIGlzV2lyZWZyYW1lID0gIWlzV2lyZWZyYW1lO1xuICAgICAgICAgICAgbW9kZWwudHJhdmVyc2UoZnVuY3Rpb24oY2hpbGQpIHtcbiAgICAgICAgICAgICAgICBpZiAoY2hpbGQuaXNNZXNoKSB7XG4gICAgICAgICAgICAgICAgICAgIGNoaWxkLm1hdGVyaWFsLndpcmVmcmFtZSA9IGlzV2lyZWZyYW1lO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9XG4gICAgICAgIFxuICAgICAgICBmdW5jdGlvbiB0YWtlU2NyZWVuc2hvdCgpIHtcbiAgICAgICAgICAgIGNvbnN0IGxpbmsgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdhJyk7XG4gICAgICAgICAgICBsaW5rLmRvd25sb2FkID0gXFxgXFwke2FwYXJ0bWVudENvbmZpZy5uYW1lfV9zY3JlZW5zaG90LnBuZ1xcYDtcbiAgICAgICAgICAgIGxpbmsuaHJlZiA9IHJlbmRlcmVyLmRvbUVsZW1lbnQudG9EYXRhVVJMKCk7XG4gICAgICAgICAgICBsaW5rLmNsaWNrKCk7XG4gICAgICAgIH1cbiAgICAgICAgXG4gICAgICAgIGZ1bmN0aW9uIGNoYW5nZVF1YWxpdHkoZXZlbnQpIHtcbiAgICAgICAgICAgIGNvbnN0IHF1YWxpdHkgPSBldmVudC50YXJnZXQudmFsdWU7XG4gICAgICAgICAgICBsZXQgcGl4ZWxSYXRpbztcbiAgICAgICAgICAgIFxuICAgICAgICAgICAgc3dpdGNoKHF1YWxpdHkpIHtcbiAgICAgICAgICAgICAgICBjYXNlICdsb3cnOlxuICAgICAgICAgICAgICAgICAgICBwaXhlbFJhdGlvID0gMC41O1xuICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICBjYXNlICdtZWRpdW0nOlxuICAgICAgICAgICAgICAgICAgICBwaXhlbFJhdGlvID0gMTtcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgY2FzZSAnaGlnaCc6XG4gICAgICAgICAgICAgICAgICAgIHBpeGVsUmF0aW8gPSBNYXRoLm1pbih3aW5kb3cuZGV2aWNlUGl4ZWxSYXRpbywgMik7XG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgXG4gICAgICAgICAgICByZW5kZXJlci5zZXRQaXhlbFJhdGlvKHBpeGVsUmF0aW8pO1xuICAgICAgICB9XG4gICAgICAgIFxuICAgICAgICBmdW5jdGlvbiBvbktleURvd24oZXZlbnQpIHtcbiAgICAgICAgICAgIGlmIChldmVudC5jb2RlID09PSAnRXNjYXBlJyAmJiBjdXJyZW50Q29udHJvbE1vZGUgPT09ICdmcHMnKSB7XG4gICAgICAgICAgICAgICAgZXhpdEZQU01vZGUoKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICBcbiAgICAgICAgZnVuY3Rpb24gb25XaW5kb3dSZXNpemUoKSB7XG4gICAgICAgICAgICBjYW1lcmEuYXNwZWN0ID0gKHdpbmRvdy5pbm5lcldpZHRoIC0gMjgwKSAvIHdpbmRvdy5pbm5lckhlaWdodDtcbiAgICAgICAgICAgIGNhbWVyYS51cGRhdGVQcm9qZWN0aW9uTWF0cml4KCk7XG4gICAgICAgICAgICByZW5kZXJlci5zZXRTaXplKHdpbmRvdy5pbm5lcldpZHRoIC0gMjgwLCB3aW5kb3cuaW5uZXJIZWlnaHQpO1xuICAgICAgICB9XG4gICAgICAgIFxuICAgICAgICBmdW5jdGlvbiBhbmltYXRlKCkge1xuICAgICAgICAgICAgYW5pbWF0aW9uSWQgPSByZXF1ZXN0QW5pbWF0aW9uRnJhbWUoYW5pbWF0ZSk7XG4gICAgICAgICAgICBcbiAgICAgICAgICAgIGlmIChvcmJpdENvbnRyb2xzLmVuYWJsZWQpIHtcbiAgICAgICAgICAgICAgICBvcmJpdENvbnRyb2xzLnVwZGF0ZSgpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgXG4gICAgICAgICAgICByZW5kZXJlci5yZW5kZXIoc2NlbmUsIGNhbWVyYSk7XG4gICAgICAgIH1cbiAgICAgICAgXG4gICAgICAgIC8vIOWIneWni+WMllxuICAgICAgICBpbml0KCk7XG4gICAgPC9zY3JpcHQ+XG48L2JvZHk+XG48L2h0bWw+XG4gICAgICBgXG4gICAgICB9XG5cbiAgICAgIC8vIOWIm+W7umlmcmFtZeW5tuiuvue9ruWGheWuuVxuICAgICAgY29uc3QgaWZyYW1lID0gaWZyYW1lUmVmLmN1cnJlbnRcbiAgICAgIGlmIChpZnJhbWUpIHtcbiAgICAgICAgY29uc3QgZG9jID0gaWZyYW1lLmNvbnRlbnREb2N1bWVudCB8fCBpZnJhbWUuY29udGVudFdpbmRvdz8uZG9jdW1lbnRcbiAgICAgICAgaWYgKGRvYykge1xuICAgICAgICAgIGRvYy5vcGVuKClcbiAgICAgICAgICBkb2Mud3JpdGUoY3JlYXRlM0RWaWV3ZXJIVE1MKCkpXG4gICAgICAgICAgZG9jLmNsb3NlKClcbiAgICAgICAgICBzZXRJc0xvYWRpbmcoZmFsc2UpXG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9LCAxMDApIC8vIDEwMG1z5bu26L+fXG5cbiAgICByZXR1cm4gKCkgPT4ge1xuICAgICAgY2xlYXJUaW1lb3V0KHRpbWVyKVxuICAgIH1cbiAgfSwgW2FwYXJ0bWVudCwgaWZyYW1lS2V5XSkgLy8g5re75YqgaWZyYW1lS2V55L2c5Li65L6d6LWWXG5cbiAgLy8g57uE5Lu25Y246L295pe26YeN572uaWZyYW1lIGtleeadpeW8uuWItumHjeaWsOWIm+W7ulxuICB1c2VFZmZlY3QoKCkgPT4ge1xuICAgIHJldHVybiAoKSA9PiB7XG4gICAgICBzZXRJZnJhbWVLZXkocHJldiA9PiBwcmV2ICsgMSlcbiAgICB9XG4gIH0sIFtdKVxuXG4gIC8vIOebkeWQrGlmcmFtZea2iOaBr1xuICB1c2VFZmZlY3QoKCkgPT4ge1xuICAgIGNvbnN0IGhhbmRsZU1lc3NhZ2UgPSAoZXZlbnQ6IE1lc3NhZ2VFdmVudCkgPT4ge1xuICAgICAgaWYgKGV2ZW50LmRhdGEgPT09ICdjbG9zZScgJiYgb25DbG9zZSkge1xuICAgICAgICBvbkNsb3NlKClcbiAgICAgIH1cbiAgICB9XG5cbiAgICB3aW5kb3cuYWRkRXZlbnRMaXN0ZW5lcignbWVzc2FnZScsIGhhbmRsZU1lc3NhZ2UpXG4gICAgcmV0dXJuICgpID0+IHdpbmRvdy5yZW1vdmVFdmVudExpc3RlbmVyKCdtZXNzYWdlJywgaGFuZGxlTWVzc2FnZSlcbiAgfSwgW29uQ2xvc2VdKVxuXG4gIGlmIChlcnJvcikge1xuICAgIHJldHVybiAoXG4gICAgICA8ZGl2IGNsYXNzTmFtZT1cImZsZXggaXRlbXMtY2VudGVyIGp1c3RpZnktY2VudGVyIGgtZnVsbFwiPlxuICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cInRleHQtY2VudGVyIHAtOFwiPlxuICAgICAgICAgIDxwIGNsYXNzTmFtZT1cInRleHQtZ3JheS01MDAgbWItNFwiPntlcnJvcn08L3A+XG4gICAgICAgICAgPHAgY2xhc3NOYW1lPVwidGV4dC1zbSB0ZXh0LWdyYXktNDAwXCI+6K+l5YWs5a+T5qih5Z6L5q2j5Zyo5YeG5aSH5Lit77yM5pWs6K+35pyf5b6FPC9wPlxuICAgICAgICA8L2Rpdj5cbiAgICAgIDwvZGl2PlxuICAgIClcbiAgfVxuXG4gIHJldHVybiAoXG4gICAgPGRpdiBjbGFzc05hbWU9XCJ3LWZ1bGwgaC1mdWxsIHJlbGF0aXZlXCI+XG4gICAgICB7aXNMb2FkaW5nICYmIChcbiAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJhYnNvbHV0ZSBpbnNldC0wIGZsZXggaXRlbXMtY2VudGVyIGp1c3RpZnktY2VudGVyIGJnLXdoaXRlIHotMTBcIj5cbiAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cInRleHQtY2VudGVyXCI+XG4gICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cImFuaW1hdGUtc3BpbiByb3VuZGVkLWZ1bGwgaC0xMiB3LTEyIGJvcmRlci1iLTIgYm9yZGVyLWJsdWUtNTAwIG14LWF1dG8gbWItNFwiPjwvZGl2PlxuICAgICAgICAgICAgPHAgY2xhc3NOYW1lPVwidGV4dC1ncmF5LTUwMFwiPuato+WcqOWIneWni+WMljNE5p+l55yL5ZmoLi4uPC9wPlxuICAgICAgICAgIDwvZGl2PlxuICAgICAgICA8L2Rpdj5cbiAgICAgICl9XG4gICAgICA8aWZyYW1lXG4gICAgICAgIHJlZj17aWZyYW1lUmVmfVxuICAgICAgICBjbGFzc05hbWU9XCJ3LWZ1bGwgaC1mdWxsIGJvcmRlci0wXCJcbiAgICAgICAgdGl0bGU9e2Ake2FwYXJ0bWVudC50aXRsZX0gM0Tmn6XnnIvlmahgfVxuICAgICAgICBzYW5kYm94PVwiYWxsb3ctc2NyaXB0cyBhbGxvdy1zYW1lLW9yaWdpbiBhbGxvdy1kb3dubG9hZHMgYWxsb3ctcG9pbnRlci1sb2NrXCJcbiAgICAgIC8+XG4gICAgPC9kaXY+XG4gIClcbn0gIl0sIm5hbWVzIjpbInVzZUVmZmVjdCIsInVzZVJlZiIsInVzZVN0YXRlIiwiQXBhcnRtZW50M0RWaWV3ZXIiLCJhcGFydG1lbnQiLCJvbkNsb3NlIiwiaWZyYW1lUmVmIiwiaXNMb2FkaW5nIiwic2V0SXNMb2FkaW5nIiwiZXJyb3IiLCJzZXRFcnJvciIsImlmcmFtZUtleSIsInNldElmcmFtZUtleSIsImhhc01vZGVsIiwidGltZXIiLCJzZXRUaW1lb3V0IiwiY3JlYXRlM0RWaWV3ZXJIVE1MIiwidGl0bGUiLCJkZXNjcmlwdGlvbiIsIkpTT04iLCJjb25maWciLCJjYW1lcmEiLCJoZWlnaHQiLCJzdHJpbmdpZnkiLCJtb2RlbFBhdGgiLCJpZnJhbWUiLCJjdXJyZW50IiwiZG9jIiwiY29udGVudERvY3VtZW50IiwiY29udGVudFdpbmRvdyIsImRvY3VtZW50Iiwib3BlbiIsIndyaXRlIiwiY2xvc2UiLCJjbGVhclRpbWVvdXQiLCJwcmV2IiwiaGFuZGxlTWVzc2FnZSIsImV2ZW50IiwiZGF0YSIsIndpbmRvdyIsImFkZEV2ZW50TGlzdGVuZXIiLCJyZW1vdmVFdmVudExpc3RlbmVyIiwiZGl2IiwiY2xhc3NOYW1lIiwicCIsInJlZiIsInNhbmRib3giXSwiaWdub3JlTGlzdCI6W10sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(app-pages-browser)/./components/apartment-3d-viewer.tsx\n"));

/***/ })

});