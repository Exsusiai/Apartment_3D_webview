"use strict";
/*
 * ATTENTION: An "eval-source-map" devtool has been used.
 * This devtool is neither made for production nor for readable output files.
 * It uses "eval()" calls to create a separate source file with attached SourceMaps in the browser devtools.
 * If you are trying to read the output file, select a different devtool (https://webpack.js.org/configuration/devtool/)
 * or disable the default devtool with "devtool: false".
 * If you are looking for production-ready output files, see mode: "production" (https://webpack.js.org/configuration/mode/).
 */
self["webpackHotUpdate_N_E"]("app/page",{

/***/ "(app-pages-browser)/./components/apartment-3d-viewer.tsx":
/*!********************************************!*\
  !*** ./components/apartment-3d-viewer.tsx ***!
  \********************************************/
/***/ ((module, __webpack_exports__, __webpack_require__) => {

eval(__webpack_require__.ts("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   Apartment3DViewer: () => (/* binding */ Apartment3DViewer)\n/* harmony export */ });\n/* harmony import */ var react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! react/jsx-dev-runtime */ \"(app-pages-browser)/./node_modules/next/dist/compiled/react/jsx-dev-runtime.js\");\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! react */ \"(app-pages-browser)/./node_modules/next/dist/compiled/react/index.js\");\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_1__);\n/* __next_internal_client_entry_do_not_use__ Apartment3DViewer auto */ \nvar _s = $RefreshSig$();\n\nfunction Apartment3DViewer(param) {\n    let { apartment, onClose } = param;\n    _s();\n    const iframeRef = (0,react__WEBPACK_IMPORTED_MODULE_1__.useRef)(null);\n    const [isLoading, setIsLoading] = (0,react__WEBPACK_IMPORTED_MODULE_1__.useState)(true);\n    const [error, setError] = (0,react__WEBPACK_IMPORTED_MODULE_1__.useState)(null);\n    const [iframeKey, setIframeKey] = (0,react__WEBPACK_IMPORTED_MODULE_1__.useState)(0) // 添加key来强制重新创建iframe\n    ;\n    (0,react__WEBPACK_IMPORTED_MODULE_1__.useEffect)({\n        \"Apartment3DViewer.useEffect\": ()=>{\n            if (!apartment.hasModel) {\n                setError(\"该公寓暂无3D模型\");\n                setIsLoading(false);\n                return;\n            }\n            // 重置状态\n            setError(null);\n            setIsLoading(true);\n            // 延迟一点时间确保iframe完全重新创建\n            const timer = setTimeout({\n                \"Apartment3DViewer.useEffect.timer\": ()=>{\n                    // 创建3D查看器的HTML内容\n                    const create3DViewerHTML = {\n                        \"Apartment3DViewer.useEffect.timer.create3DViewerHTML\": ()=>{\n                            return '\\n<!DOCTYPE html>\\n<html lang=\"zh-CN\">\\n<head>\\n    <meta charset=\"UTF-8\">\\n    <meta name=\"viewport\" content=\"width=device-width, initial-scale=1.0\">\\n    <title>'.concat(apartment.title, ' - 3D查看器</title>\\n    <style>\\n        body {\\n            margin: 0;\\n            padding: 0;\\n            font-family: -apple-system, BlinkMacSystemFont, \\'Segoe UI\\', Roboto, sans-serif;\\n            background: #f5f5f5;\\n            overflow: hidden;\\n        }\\n        \\n        .viewer-container {\\n            display: flex;\\n            height: 100vh;\\n            width: 100vw;\\n        }\\n        \\n        .sidebar {\\n            width: 280px;\\n            background: white;\\n            border-right: 1px solid #e5e5e5;\\n            padding: 20px;\\n            overflow-y: auto;\\n            box-shadow: 2px 0 10px rgba(0,0,0,0.1);\\n        }\\n        \\n        .model-view {\\n            flex: 1;\\n            position: relative;\\n            background: #f0f0f0;\\n        }\\n        \\n        #modelContainer {\\n            width: 100%;\\n            height: 100%;\\n            position: relative;\\n        }\\n        \\n        .panel {\\n            background: #f8f9fa;\\n            border: 1px solid #e9ecef;\\n            border-radius: 8px;\\n            padding: 16px;\\n            margin-bottom: 16px;\\n        }\\n        \\n        .panel h3 {\\n            margin: 0 0 12px 0;\\n            font-size: 14px;\\n            font-weight: 600;\\n            color: #333;\\n            display: flex;\\n            align-items: center;\\n            gap: 8px;\\n        }\\n        \\n        .btn {\\n            background: #007bff;\\n            color: white;\\n            border: none;\\n            padding: 8px 16px;\\n            border-radius: 6px;\\n            cursor: pointer;\\n            font-size: 13px;\\n            margin: 4px;\\n            transition: background-color 0.2s;\\n        }\\n        \\n        .btn:hover {\\n            background: #0056b3;\\n        }\\n        \\n        .btn.secondary {\\n            background: #6c757d;\\n        }\\n        \\n        .btn.secondary:hover {\\n            background: #545b62;\\n        }\\n        \\n        .btn.full-width {\\n            width: 100%;\\n            margin: 4px 0;\\n        }\\n        \\n        .controls-group {\\n            display: flex;\\n            flex-wrap: wrap;\\n            gap: 4px;\\n            margin-top: 8px;\\n        }\\n        \\n        .controls-group .btn {\\n            flex: 1;\\n            min-width: 80px;\\n        }\\n        \\n        select {\\n            width: 100%;\\n            padding: 8px;\\n            border: 1px solid #ddd;\\n            border-radius: 4px;\\n            font-size: 13px;\\n            margin-top: 8px;\\n        }\\n        \\n        .view-info {\\n            position: absolute;\\n            top: 20px;\\n            right: 20px;\\n            background: rgba(0,0,0,0.7);\\n            color: white;\\n            padding: 8px 12px;\\n            border-radius: 6px;\\n            font-size: 12px;\\n            z-index: 100;\\n        }\\n        \\n        .esc-prompt {\\n            position: absolute;\\n            top: 20px;\\n            left: 20px;\\n            background: rgba(255,0,0,0.8);\\n            color: white;\\n            padding: 8px 12px;\\n            border-radius: 6px;\\n            font-size: 12px;\\n            z-index: 100;\\n        }\\n        \\n        .esc-prompt.hidden {\\n            display: none;\\n        }\\n        \\n        #loadingOverlay {\\n            position: absolute;\\n            top: 0;\\n            left: 0;\\n            width: 100%;\\n            height: 100%;\\n            background: rgba(255,255,255,0.9);\\n            display: flex;\\n            flex-direction: column;\\n            justify-content: center;\\n            align-items: center;\\n            z-index: 1000;\\n        }\\n        \\n        .spinner {\\n            width: 40px;\\n            height: 40px;\\n            border: 4px solid #f3f3f3;\\n            border-top: 4px solid #007bff;\\n            border-radius: 50%;\\n            animation: spin 1s linear infinite;\\n        }\\n        \\n        @keyframes spin {\\n            0% { transform: rotate(0deg); }\\n            100% { transform: rotate(360deg); }\\n        }\\n        \\n        .loading-text {\\n            margin-top: 16px;\\n            font-size: 14px;\\n            color: #666;\\n        }\\n        \\n        .center-screen {\\n            position: absolute;\\n            top: 50%;\\n            left: 50%;\\n            transform: translate(-50%, -50%);\\n            z-index: 200;\\n        }\\n        \\n        .center-screen.hidden {\\n            display: none;\\n        }\\n        \\n        .prompt-content {\\n            background: white;\\n            padding: 20px;\\n            border-radius: 8px;\\n            box-shadow: 0 4px 20px rgba(0,0,0,0.3);\\n        }\\n        \\n        .close-btn {\\n            position: absolute;\\n            top: 10px;\\n            right: 10px;\\n            background: rgba(0,0,0,0.5);\\n            color: white;\\n            border: none;\\n            width: 30px;\\n            height: 30px;\\n            border-radius: 50%;\\n            cursor: pointer;\\n            font-size: 16px;\\n            z-index: 1001;\\n        }\\n        \\n        .close-btn:hover {\\n            background: rgba(0,0,0,0.7);\\n        }\\n    </style>\\n</head>\\n<body>\\n    <div class=\"viewer-container\">\\n        <div class=\"sidebar\">\\n            <div class=\"panel\">\\n                <h3>\\uD83C\\uDFE0 公寓信息</h3>\\n                <h4 style=\"margin: 0; color: #333;\">').concat(apartment.title, '</h4>\\n                <p style=\"font-size: 12px; color: #666; margin: 8px 0 0 0;\">').concat(apartment.description, '</p>\\n            </div>\\n\\n            <div class=\"panel\">\\n                <h3>\\uD83C\\uDFAE 视角控制</h3>\\n                <div class=\"controls-group\">\\n                    <button id=\"toggleControlModeBtn\" class=\"btn full-width\">\\n                        <span id=\"controlModeText\">切换到FPS模式</span>\\n                    </button>\\n                </div>\\n                <div class=\"controls-group\">\\n                    <button id=\"viewTopBtn\" class=\"btn secondary\">顶视图</button>\\n                    <button id=\"viewFrontBtn\" class=\"btn secondary\">正视图</button>\\n                    <button id=\"viewSideBtn\" class=\"btn secondary\">侧视图</button>\\n                </div>\\n                <div class=\"controls-group\">\\n                    <button id=\"resetViewBtn\" class=\"btn full-width\">重置视图</button>\\n                </div>\\n                <div class=\"controls-group\">\\n                    <button id=\"toggleWireframeBtn\" class=\"btn secondary full-width\">切换线框模式</button>\\n                </div>\\n            </div>\\n\\n            <div class=\"panel\">\\n                <h3>⚙️ 质量控制</h3>\\n                <label for=\"qualitySelector\">渲染质量:</label>\\n                <select id=\"qualitySelector\">\\n                    <option value=\"low\">低 (更流畅)</option>\\n                    <option value=\"medium\" selected>中 (平衡)</option>\\n                    <option value=\"high\">高 (更清晰)</option>\\n                </select>\\n            </div>\\n\\n            <div class=\"panel\">\\n                <h3>\\uD83D\\uDCF7 截图</h3>\\n                <button id=\"screenshotBtn\" class=\"btn full-width\">保存截图</button>\\n            </div>\\n        </div>\\n\\n        <div class=\"model-view\">\\n            <button class=\"close-btn\" onclick=\"window.parent.postMessage(\\'close\\', \\'*\\')\" title=\"关闭\">\\xd7</button>\\n            <div id=\"modelContainer\">\\n                <div class=\"view-info\">\\n                    <div id=\"rotationInfo\">视角: 0\\xb0</div>\\n                    <div id=\"zoomInfo\">高度: ').concat(apartment.config.camera.height, 'm</div>\\n                </div>\\n                <div id=\"escExitPrompt\" class=\"esc-prompt hidden\">\\n                    按ESC退出FPS模式\\n                </div>\\n                <div id=\"loadingOverlay\">\\n                    <div class=\"spinner\"></div>\\n                    <div class=\"loading-text\">正在加载模型...</div>\\n                </div>\\n                <div id=\"pointerLockPrompt\" class=\"center-screen hidden\">\\n                    <div class=\"prompt-content\">\\n                        <button id=\"enterFPSBtn\" class=\"btn full-width\" style=\"font-size:1.1rem;padding:1em 2em;\">点击以启用FPS控制</button>\\n                    </div>\\n                </div>\\n            </div>\\n        </div>\\n    </div>\\n\\n    <!-- Three.js 库 -->\\n    <script src=\"https://cdnjs.cloudflare.com/ajax/libs/three.js/r128/three.min.js\"></script>\\n    <script src=\"https://cdn.jsdelivr.net/npm/three@0.128.0/examples/js/controls/OrbitControls.min.js\"></script>\\n    <script src=\"https://cdn.jsdelivr.net/npm/three@0.128.0/examples/js/controls/PointerLockControls.min.js\"></script>\\n    <script src=\"https://cdn.jsdelivr.net/npm/three@0.128.0/examples/js/loaders/OBJLoader.min.js\"></script>\\n    <script src=\"https://cdn.jsdelivr.net/npm/three@0.128.0/examples/js/loaders/MTLLoader.min.js\"></script>\\n    \\n    <script>\\n        // 强制重置所有全局变量\\n        if (window.scene) {\\n            window.scene.clear();\\n        }\\n        if (window.renderer) {\\n            window.renderer.dispose();\\n        }\\n        \\n        // 3D查看器初始化脚本\\n        let scene, camera, renderer, controls, model;\\n        let orbitControls, pointerLockControls;\\n        let isWireframe = false;\\n        let currentControlMode = \\'orbit\\'; // \\'orbit\\' or \\'fps\\'\\n        let animationId = null; // 用于清理动画循环\\n        \\n        // 公寓配置\\n        const apartmentConfig = ').concat(JSON.stringify(apartment.config), ';\\n        const modelPath = \"').concat(apartment.modelPath, \"\\\";\\n        \\n        // 清理之前的资源\\n        function cleanup() {\\n            if (animationId) {\\n                cancelAnimationFrame(animationId);\\n                animationId = null;\\n            }\\n            \\n            if (renderer) {\\n                renderer.dispose();\\n                renderer.forceContextLoss();\\n                if (renderer.domElement && renderer.domElement.parentNode) {\\n                    renderer.domElement.parentNode.removeChild(renderer.domElement);\\n                }\\n            }\\n            \\n            if (scene) {\\n                scene.clear();\\n            }\\n            \\n            // 清理事件监听器\\n            window.removeEventListener('resize', onWindowResize);\\n            document.removeEventListener('keydown', onKeyDown);\\n        }\\n        \\n        // 初始化3D场景\\n        function init() {\\n            try {\\n                // 先清理之前的资源\\n                cleanup();\\n                \\n                // 创建场景\\n                scene = new THREE.Scene();\\n                scene.background = new THREE.Color(0xf0f0f0);\\n                \\n                // 创建相机\\n                camera = new THREE.PerspectiveCamera(75, window.innerWidth / window.innerHeight, 0.1, 1000);\\n                camera.position.set(apartmentConfig.camera.init_point[0], apartmentConfig.camera.height, apartmentConfig.camera.init_point[1]);\\n                \\n                // 创建渲染器\\n                renderer = new THREE.WebGLRenderer({ antialias: true });\\n                renderer.setSize(window.innerWidth - 280, window.innerHeight);\\n                renderer.shadowMap.enabled = true;\\n                renderer.shadowMap.type = THREE.PCFSoftShadowMap;\\n                \\n                const container = document.getElementById('modelContainer');\\n                const canvas = container.querySelector('canvas');\\n                if (canvas) {\\n                    container.removeChild(canvas);\\n                }\\n                container.appendChild(renderer.domElement);\\n                \\n                // 创建控制器\\n                setupControls();\\n                \\n                // 添加光源\\n                setupLighting();\\n                \\n                // 加载模型\\n                loadModel();\\n                \\n                // 设置事件监听\\n                setupEventListeners();\\n                \\n                // 开始渲染循环\\n                animate();\\n                \\n            } catch (error) {\\n                console.error('初始化3D场景失败:', error);\\n                const loadingOverlay = document.getElementById('loadingOverlay');\\n                if (loadingOverlay) {\\n                    loadingOverlay.innerHTML = '<div style=\\\"color: red;\\\">3D场景初始化失败</div>';\\n                }\\n            }\\n        }\\n        \\n        function setupControls() {\\n            // 轨道控制器\\n            orbitControls = new THREE.OrbitControls(camera, renderer.domElement);\\n            orbitControls.enableDamping = true;\\n            orbitControls.dampingFactor = 0.05;\\n            orbitControls.target.set(0, 0, 0);\\n            \\n            // FPS控制器\\n            pointerLockControls = new THREE.PointerLockControls(camera, renderer.domElement);\\n            scene.add(pointerLockControls.getObject());\\n            \\n            // 默认使用轨道控制器\\n            orbitControls.enabled = true;\\n            pointerLockControls.enabled = false;\\n        }\\n        \\n        function setupLighting() {\\n            // 环境光\\n            const ambientLight = new THREE.AmbientLight(0x404040, 0.6);\\n            scene.add(ambientLight);\\n            \\n            // 方向光\\n            const directionalLight = new THREE.DirectionalLight(0xffffff, 0.8);\\n            directionalLight.position.set(10, 10, 5);\\n            directionalLight.castShadow = true;\\n            scene.add(directionalLight);\\n            \\n            // 点光源\\n            const pointLight = new THREE.PointLight(0xffffff, 0.5);\\n            pointLight.position.set(0, 5, 0);\\n            scene.add(pointLight);\\n        }\\n        \\n        function loadModel() {\\n            const loadingOverlay = document.getElementById('loadingOverlay');\\n            \\n            // MTL加载器\\n            const mtlLoader = new THREE.MTLLoader();\\n            mtlLoader.setPath(modelPath + '/');\\n            \\n            mtlLoader.load('textured_output.mtl', function(materials) {\\n                materials.preload();\\n                \\n                // OBJ加载器\\n                const objLoader = new THREE.OBJLoader();\\n                objLoader.setMaterials(materials);\\n                objLoader.setPath(modelPath + '/');\\n                \\n                objLoader.load('textured_output.obj', \\n                    function(object) {\\n                        // 模型加载成功\\n                        model = object;\\n                        scene.add(model);\\n                        \\n                        // 计算模型边界盒\\n                        const box = new THREE.Box3().setFromObject(model);\\n                        const center = box.getCenter(new THREE.Vector3());\\n                        const size = box.getSize(new THREE.Vector3());\\n                        \\n                        // 调整相机位置\\n                        const maxDim = Math.max(size.x, size.y, size.z);\\n                        const fov = camera.fov * (Math.PI / 180);\\n                        let cameraZ = Math.abs(maxDim / 2 / Math.tan(fov / 2));\\n                        cameraZ *= 1.5; // 增加一些距离\\n                        \\n                        camera.position.set(center.x, center.y + apartmentConfig.camera.height, center.z + cameraZ);\\n                        orbitControls.target.copy(center);\\n                        \\n                        // 隐藏加载界面\\n                        loadingOverlay.style.display = 'none';\\n                    },\\n                    function(progress) {\\n                        // 加载进度\\n                        console.log('Loading progress:', progress);\\n                    },\\n                    function(error) {\\n                        // 加载错误\\n                        console.error('Error loading model:', error);\\n                        loadingOverlay.innerHTML = '<div style=\\\"color: red;\\\">模型加载失败</div>';\\n                    }\\n                );\\n            }, undefined, function(error) {\\n                console.error('Error loading materials:', error);\\n                loadingOverlay.innerHTML = '<div style=\\\"color: red;\\\">材质加载失败</div>';\\n            });\\n        }\\n        \\n        function setupEventListeners() {\\n            // 控制模式切换\\n            document.getElementById('toggleControlModeBtn').addEventListener('click', toggleControlMode);\\n            \\n            // 视角按钮\\n            document.getElementById('viewTopBtn').addEventListener('click', () => setView('top'));\\n            document.getElementById('viewFrontBtn').addEventListener('click', () => setView('front'));\\n            document.getElementById('viewSideBtn').addEventListener('click', () => setView('side'));\\n            document.getElementById('resetViewBtn').addEventListener('click', resetView);\\n            \\n            // 线框模式\\n            document.getElementById('toggleWireframeBtn').addEventListener('click', toggleWireframe);\\n            \\n            // 截图\\n            document.getElementById('screenshotBtn').addEventListener('click', takeScreenshot);\\n            \\n            // 质量控制\\n            document.getElementById('qualitySelector').addEventListener('change', changeQuality);\\n            \\n            // FPS模式相关\\n            document.getElementById('enterFPSBtn').addEventListener('click', enterFPSMode);\\n            \\n            // 键盘事件\\n            document.addEventListener('keydown', onKeyDown);\\n            \\n            // 窗口大小调整\\n            window.addEventListener('resize', onWindowResize);\\n        }\\n        \\n        function toggleControlMode() {\\n            if (currentControlMode === 'orbit') {\\n                // 切换到FPS模式\\n                document.getElementById('pointerLockPrompt').classList.remove('hidden');\\n            } else {\\n                // 切换到轨道模式\\n                exitFPSMode();\\n            }\\n        }\\n        \\n        function enterFPSMode() {\\n            pointerLockControls.lock();\\n            currentControlMode = 'fps';\\n            orbitControls.enabled = false;\\n            pointerLockControls.enabled = true;\\n            document.getElementById('pointerLockPrompt').classList.add('hidden');\\n            document.getElementById('escExitPrompt').classList.remove('hidden');\\n            document.getElementById('controlModeText').textContent = '切换到鼠标模式';\\n        }\\n        \\n        function exitFPSMode() {\\n            pointerLockControls.unlock();\\n            currentControlMode = 'orbit';\\n            orbitControls.enabled = true;\\n            pointerLockControls.enabled = false;\\n            document.getElementById('escExitPrompt').classList.add('hidden');\\n            document.getElementById('controlModeText').textContent = '切换到FPS模式';\\n        }\\n        \\n        function setView(viewType) {\\n            if (!model) return;\\n            \\n            const box = new THREE.Box3().setFromObject(model);\\n            const center = box.getCenter(new THREE.Vector3());\\n            const size = box.getSize(new THREE.Vector3());\\n            const maxDim = Math.max(size.x, size.y, size.z);\\n            \\n            switch(viewType) {\\n                case 'top':\\n                    camera.position.set(center.x, center.y + maxDim, center.z);\\n                    break;\\n                case 'front':\\n                    camera.position.set(center.x, center.y, center.z + maxDim);\\n                    break;\\n                case 'side':\\n                    camera.position.set(center.x + maxDim, center.y, center.z);\\n                    break;\\n            }\\n            \\n            orbitControls.target.copy(center);\\n            orbitControls.update();\\n        }\\n        \\n        function resetView() {\\n            if (!model) return;\\n            \\n            const box = new THREE.Box3().setFromObject(model);\\n            const center = box.getCenter(new THREE.Vector3());\\n            const size = box.getSize(new THREE.Vector3());\\n            const maxDim = Math.max(size.x, size.y, size.z);\\n            \\n            camera.position.set(center.x, center.y + apartmentConfig.camera.height, center.z + maxDim * 1.5);\\n            orbitControls.target.copy(center);\\n            orbitControls.update();\\n        }\\n        \\n        function toggleWireframe() {\\n            if (!model) return;\\n            \\n            isWireframe = !isWireframe;\\n            model.traverse(function(child) {\\n                if (child.isMesh) {\\n                    child.material.wireframe = isWireframe;\\n                }\\n            });\\n        }\\n        \\n        function takeScreenshot() {\\n            const link = document.createElement('a');\\n            link.download = `${apartmentConfig.name}_screenshot.png`;\\n            link.href = renderer.domElement.toDataURL();\\n            link.click();\\n        }\\n        \\n        function changeQuality(event) {\\n            const quality = event.target.value;\\n            let pixelRatio;\\n            \\n            switch(quality) {\\n                case 'low':\\n                    pixelRatio = 0.5;\\n                    break;\\n                case 'medium':\\n                    pixelRatio = 1;\\n                    break;\\n                case 'high':\\n                    pixelRatio = Math.min(window.devicePixelRatio, 2);\\n                    break;\\n            }\\n            \\n            renderer.setPixelRatio(pixelRatio);\\n        }\\n        \\n        function onKeyDown(event) {\\n            if (event.code === 'Escape' && currentControlMode === 'fps') {\\n                exitFPSMode();\\n            }\\n        }\\n        \\n        function onWindowResize() {\\n            camera.aspect = (window.innerWidth - 280) / window.innerHeight;\\n            camera.updateProjectionMatrix();\\n            renderer.setSize(window.innerWidth - 280, window.innerHeight);\\n        }\\n        \\n        function animate() {\\n            animationId = requestAnimationFrame(animate);\\n            \\n            if (orbitControls.enabled) {\\n                orbitControls.update();\\n            }\\n            \\n            renderer.render(scene, camera);\\n        }\\n        \\n        // 初始化\\n        init();\\n    </script>\\n</body>\\n</html>\\n      \");\n                        }\n                    }[\"Apartment3DViewer.useEffect.timer.create3DViewerHTML\"];\n                    // 创建iframe并设置内容\n                    const iframe = iframeRef.current;\n                    if (iframe) {\n                        var _iframe_contentWindow;\n                        const doc = iframe.contentDocument || ((_iframe_contentWindow = iframe.contentWindow) === null || _iframe_contentWindow === void 0 ? void 0 : _iframe_contentWindow.document);\n                        if (doc) {\n                            doc.open();\n                            doc.write(create3DViewerHTML());\n                            doc.close();\n                            setIsLoading(false);\n                        }\n                    }\n                }\n            }[\"Apartment3DViewer.useEffect.timer\"], 100) // 100ms延迟\n            ;\n            return ({\n                \"Apartment3DViewer.useEffect\": ()=>{\n                    clearTimeout(timer);\n                }\n            })[\"Apartment3DViewer.useEffect\"];\n        }\n    }[\"Apartment3DViewer.useEffect\"], [\n        apartment,\n        iframeKey\n    ]) // 添加iframeKey作为依赖\n    ;\n    // 组件卸载时重置iframe key来强制重新创建\n    (0,react__WEBPACK_IMPORTED_MODULE_1__.useEffect)({\n        \"Apartment3DViewer.useEffect\": ()=>{\n            return ({\n                \"Apartment3DViewer.useEffect\": ()=>{\n                    setIframeKey({\n                        \"Apartment3DViewer.useEffect\": (prev)=>prev + 1\n                    }[\"Apartment3DViewer.useEffect\"]);\n                }\n            })[\"Apartment3DViewer.useEffect\"];\n        }\n    }[\"Apartment3DViewer.useEffect\"], []);\n    // 监听iframe消息\n    (0,react__WEBPACK_IMPORTED_MODULE_1__.useEffect)({\n        \"Apartment3DViewer.useEffect\": ()=>{\n            const handleMessage = {\n                \"Apartment3DViewer.useEffect.handleMessage\": (event)=>{\n                    if (event.data === 'close' && onClose) {\n                        onClose();\n                    }\n                }\n            }[\"Apartment3DViewer.useEffect.handleMessage\"];\n            window.addEventListener('message', handleMessage);\n            return ({\n                \"Apartment3DViewer.useEffect\": ()=>window.removeEventListener('message', handleMessage)\n            })[\"Apartment3DViewer.useEffect\"];\n        }\n    }[\"Apartment3DViewer.useEffect\"], [\n        onClose\n    ]);\n    if (error) {\n        return /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n            className: \"flex items-center justify-center h-full\",\n            children: /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                className: \"text-center p-8\",\n                children: [\n                    /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"p\", {\n                        className: \"text-gray-500 mb-4\",\n                        children: error\n                    }, void 0, false, {\n                        fileName: \"/Users/jason/Project/My_Apartment_Web/components/apartment-3d-viewer.tsx\",\n                        lineNumber: 704,\n                        columnNumber: 11\n                    }, this),\n                    /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"p\", {\n                        className: \"text-sm text-gray-400\",\n                        children: \"该公寓模型正在准备中，敬请期待\"\n                    }, void 0, false, {\n                        fileName: \"/Users/jason/Project/My_Apartment_Web/components/apartment-3d-viewer.tsx\",\n                        lineNumber: 705,\n                        columnNumber: 11\n                    }, this)\n                ]\n            }, void 0, true, {\n                fileName: \"/Users/jason/Project/My_Apartment_Web/components/apartment-3d-viewer.tsx\",\n                lineNumber: 703,\n                columnNumber: 9\n            }, this)\n        }, void 0, false, {\n            fileName: \"/Users/jason/Project/My_Apartment_Web/components/apartment-3d-viewer.tsx\",\n            lineNumber: 702,\n            columnNumber: 7\n        }, this);\n    }\n    return /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n        className: \"w-full h-full relative\",\n        children: [\n            isLoading && /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                className: \"absolute inset-0 flex items-center justify-center bg-white z-10\",\n                children: /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                    className: \"text-center\",\n                    children: [\n                        /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                            className: \"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-500 mx-auto mb-4\"\n                        }, void 0, false, {\n                            fileName: \"/Users/jason/Project/My_Apartment_Web/components/apartment-3d-viewer.tsx\",\n                            lineNumber: 716,\n                            columnNumber: 13\n                        }, this),\n                        /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"p\", {\n                            className: \"text-gray-500\",\n                            children: \"正在初始化3D查看器...\"\n                        }, void 0, false, {\n                            fileName: \"/Users/jason/Project/My_Apartment_Web/components/apartment-3d-viewer.tsx\",\n                            lineNumber: 717,\n                            columnNumber: 13\n                        }, this)\n                    ]\n                }, void 0, true, {\n                    fileName: \"/Users/jason/Project/My_Apartment_Web/components/apartment-3d-viewer.tsx\",\n                    lineNumber: 715,\n                    columnNumber: 11\n                }, this)\n            }, void 0, false, {\n                fileName: \"/Users/jason/Project/My_Apartment_Web/components/apartment-3d-viewer.tsx\",\n                lineNumber: 714,\n                columnNumber: 9\n            }, this),\n            /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"iframe\", {\n                ref: iframeRef,\n                className: \"w-full h-full border-0\",\n                title: \"\".concat(apartment.title, \" 3D查看器\"),\n                sandbox: \"allow-scripts allow-same-origin allow-downloads allow-pointer-lock\"\n            }, iframeKey, false, {\n                fileName: \"/Users/jason/Project/My_Apartment_Web/components/apartment-3d-viewer.tsx\",\n                lineNumber: 721,\n                columnNumber: 7\n            }, this)\n        ]\n    }, void 0, true, {\n        fileName: \"/Users/jason/Project/My_Apartment_Web/components/apartment-3d-viewer.tsx\",\n        lineNumber: 712,\n        columnNumber: 5\n    }, this);\n}\n_s(Apartment3DViewer, \"v9vXjC02A8v/NliTWBIniYKROxk=\");\n_c = Apartment3DViewer;\nvar _c;\n$RefreshReg$(_c, \"Apartment3DViewer\");\n\n\n;\n    // Wrapped in an IIFE to avoid polluting the global scope\n    ;\n    (function () {\n        var _a, _b;\n        // Legacy CSS implementations will `eval` browser code in a Node.js context\n        // to extract CSS. For backwards compatibility, we need to check we're in a\n        // browser context before continuing.\n        if (typeof self !== 'undefined' &&\n            // AMP / No-JS mode does not inject these helpers:\n            '$RefreshHelpers$' in self) {\n            // @ts-ignore __webpack_module__ is global\n            var currentExports = module.exports;\n            // @ts-ignore __webpack_module__ is global\n            var prevSignature = (_b = (_a = module.hot.data) === null || _a === void 0 ? void 0 : _a.prevSignature) !== null && _b !== void 0 ? _b : null;\n            // This cannot happen in MainTemplate because the exports mismatch between\n            // templating and execution.\n            self.$RefreshHelpers$.registerExportsForReactRefresh(currentExports, module.id);\n            // A module can be accepted automatically based on its exports, e.g. when\n            // it is a Refresh Boundary.\n            if (self.$RefreshHelpers$.isReactRefreshBoundary(currentExports)) {\n                // Save the previous exports signature on update so we can compare the boundary\n                // signatures. We avoid saving exports themselves since it causes memory leaks (https://github.com/vercel/next.js/pull/53797)\n                module.hot.dispose(function (data) {\n                    data.prevSignature =\n                        self.$RefreshHelpers$.getRefreshBoundarySignature(currentExports);\n                });\n                // Unconditionally accept an update to this module, we'll check if it's\n                // still a Refresh Boundary later.\n                // @ts-ignore importMeta is replaced in the loader\n                module.hot.accept();\n                // This field is set when the previous version of this module was a\n                // Refresh Boundary, letting us know we need to check for invalidation or\n                // enqueue an update.\n                if (prevSignature !== null) {\n                    // A boundary can become ineligible if its exports are incompatible\n                    // with the previous exports.\n                    //\n                    // For example, if you add/remove/change exports, we'll want to\n                    // re-execute the importing modules, and force those components to\n                    // re-render. Similarly, if you convert a class component to a\n                    // function, we want to invalidate the boundary.\n                    if (self.$RefreshHelpers$.shouldInvalidateReactRefreshBoundary(prevSignature, self.$RefreshHelpers$.getRefreshBoundarySignature(currentExports))) {\n                        module.hot.invalidate();\n                    }\n                    else {\n                        self.$RefreshHelpers$.scheduleUpdate();\n                    }\n                }\n            }\n            else {\n                // Since we just executed the code for the module, it's possible that the\n                // new exports made it ineligible for being a boundary.\n                // We only care about the case when we were _previously_ a boundary,\n                // because we already accepted this update (accidental side effect).\n                var isNoLongerABoundary = prevSignature !== null;\n                if (isNoLongerABoundary) {\n                    module.hot.invalidate();\n                }\n            }\n        }\n    })();\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKGFwcC1wYWdlcy1icm93c2VyKS8uL2NvbXBvbmVudHMvYXBhcnRtZW50LTNkLXZpZXdlci50c3giLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7O0FBRW1EO0FBUTVDLFNBQVNHLGtCQUFrQixLQUE4QztRQUE5QyxFQUFFQyxTQUFTLEVBQUVDLE9BQU8sRUFBMEIsR0FBOUM7O0lBQ2hDLE1BQU1DLFlBQVlMLDZDQUFNQSxDQUFvQjtJQUM1QyxNQUFNLENBQUNNLFdBQVdDLGFBQWEsR0FBR04sK0NBQVFBLENBQUM7SUFDM0MsTUFBTSxDQUFDTyxPQUFPQyxTQUFTLEdBQUdSLCtDQUFRQSxDQUFnQjtJQUNsRCxNQUFNLENBQUNTLFdBQVdDLGFBQWEsR0FBR1YsK0NBQVFBLENBQUMsR0FBRyxxQkFBcUI7O0lBRW5FRixnREFBU0E7dUNBQUM7WUFDUixJQUFJLENBQUNJLFVBQVVTLFFBQVEsRUFBRTtnQkFDdkJILFNBQVM7Z0JBQ1RGLGFBQWE7Z0JBQ2I7WUFDRjtZQUVBLE9BQU87WUFDUEUsU0FBUztZQUNURixhQUFhO1lBRWIsdUJBQXVCO1lBQ3ZCLE1BQU1NLFFBQVFDO3FEQUFXO29CQUN2QixpQkFBaUI7b0JBQ2pCLE1BQU1DO2dGQUFxQjs0QkFDekIsT0FBTyxzS0F5TnVDWixPQW5OekNBLFVBQVVhLEtBQUssRUFBQyw0dktBb05pRGIsT0FEeEJBLFVBQVVhLEtBQUssRUFBQyx1RkE2Q3pCYixPQTVDaUNBLFVBQVVjLFdBQVcsRUFBQyxvNkRBc0ZsRUMsT0ExQ1dmLFVBQVVnQixNQUFNLENBQUNDLE1BQU0sQ0FBQ0MsTUFBTSxFQUFDLDR4REEyQy9DbEIsT0FES2UsS0FBS0ksU0FBUyxDQUFDbkIsVUFBVWdCLE1BQU0sR0FBRSxrQ0FDbEIsT0FBcEJoQixVQUFVb0IsU0FBUyxFQUFDO3dCQW9VM0M7O29CQUVBLGdCQUFnQjtvQkFDaEIsTUFBTUMsU0FBU25CLFVBQVVvQixPQUFPO29CQUNoQyxJQUFJRCxRQUFROzRCQUM0QkE7d0JBQXRDLE1BQU1FLE1BQU1GLE9BQU9HLGVBQWUsTUFBSUgsd0JBQUFBLE9BQU9JLGFBQWEsY0FBcEJKLDRDQUFBQSxzQkFBc0JLLFFBQVE7d0JBQ3BFLElBQUlILEtBQUs7NEJBQ1BBLElBQUlJLElBQUk7NEJBQ1JKLElBQUlLLEtBQUssQ0FBQ2hCOzRCQUNWVyxJQUFJTSxLQUFLOzRCQUNUekIsYUFBYTt3QkFDZjtvQkFDRjtnQkFDRjtvREFBRyxLQUFLLFVBQVU7O1lBRWxCOytDQUFPO29CQUNMMEIsYUFBYXBCO2dCQUNmOztRQUNGO3NDQUFHO1FBQUNWO1FBQVdPO0tBQVUsRUFBRSxrQkFBa0I7O0lBRTdDLDJCQUEyQjtJQUMzQlgsZ0RBQVNBO3VDQUFDO1lBQ1I7K0NBQU87b0JBQ0xZO3VEQUFhdUIsQ0FBQUEsT0FBUUEsT0FBTzs7Z0JBQzlCOztRQUNGO3NDQUFHLEVBQUU7SUFFTCxhQUFhO0lBQ2JuQyxnREFBU0E7dUNBQUM7WUFDUixNQUFNb0M7NkRBQWdCLENBQUNDO29CQUNyQixJQUFJQSxNQUFNQyxJQUFJLEtBQUssV0FBV2pDLFNBQVM7d0JBQ3JDQTtvQkFDRjtnQkFDRjs7WUFFQWtDLE9BQU9DLGdCQUFnQixDQUFDLFdBQVdKO1lBQ25DOytDQUFPLElBQU1HLE9BQU9FLG1CQUFtQixDQUFDLFdBQVdMOztRQUNyRDtzQ0FBRztRQUFDL0I7S0FBUTtJQUVaLElBQUlJLE9BQU87UUFDVCxxQkFDRSw4REFBQ2lDO1lBQUlDLFdBQVU7c0JBQ2IsNEVBQUNEO2dCQUFJQyxXQUFVOztrQ0FDYiw4REFBQ0M7d0JBQUVELFdBQVU7a0NBQXNCbEM7Ozs7OztrQ0FDbkMsOERBQUNtQzt3QkFBRUQsV0FBVTtrQ0FBd0I7Ozs7Ozs7Ozs7Ozs7Ozs7O0lBSTdDO0lBRUEscUJBQ0UsOERBQUNEO1FBQUlDLFdBQVU7O1lBQ1pwQywyQkFDQyw4REFBQ21DO2dCQUFJQyxXQUFVOzBCQUNiLDRFQUFDRDtvQkFBSUMsV0FBVTs7c0NBQ2IsOERBQUNEOzRCQUFJQyxXQUFVOzs7Ozs7c0NBQ2YsOERBQUNDOzRCQUFFRCxXQUFVO3NDQUFnQjs7Ozs7Ozs7Ozs7Ozs7Ozs7MEJBSW5DLDhEQUFDbEI7Z0JBQ0NvQixLQUFLdkM7Z0JBRUxxQyxXQUFVO2dCQUNWMUIsT0FBTyxHQUFtQixPQUFoQmIsVUFBVWEsS0FBSyxFQUFDO2dCQUMxQjZCLFNBQVE7ZUFISG5DOzs7Ozs7Ozs7OztBQU9iO0dBL3NCZ0JSO0tBQUFBIiwic291cmNlcyI6WyIvVXNlcnMvamFzb24vUHJvamVjdC9NeV9BcGFydG1lbnRfV2ViL2NvbXBvbmVudHMvYXBhcnRtZW50LTNkLXZpZXdlci50c3giXSwic291cmNlc0NvbnRlbnQiOlsiXCJ1c2UgY2xpZW50XCJcblxuaW1wb3J0IHsgdXNlRWZmZWN0LCB1c2VSZWYsIHVzZVN0YXRlIH0gZnJvbSBcInJlYWN0XCJcbmltcG9ydCB7IEFwYXJ0bWVudERhdGEgfSBmcm9tIFwiQC91dGlscy9hcGFydG1lbnQtZGF0YVwiXG5cbmludGVyZmFjZSBBcGFydG1lbnQzRFZpZXdlclByb3BzIHtcbiAgYXBhcnRtZW50OiBBcGFydG1lbnREYXRhXG4gIG9uQ2xvc2U/OiAoKSA9PiB2b2lkXG59XG5cbmV4cG9ydCBmdW5jdGlvbiBBcGFydG1lbnQzRFZpZXdlcih7IGFwYXJ0bWVudCwgb25DbG9zZSB9OiBBcGFydG1lbnQzRFZpZXdlclByb3BzKSB7XG4gIGNvbnN0IGlmcmFtZVJlZiA9IHVzZVJlZjxIVE1MSUZyYW1lRWxlbWVudD4obnVsbClcbiAgY29uc3QgW2lzTG9hZGluZywgc2V0SXNMb2FkaW5nXSA9IHVzZVN0YXRlKHRydWUpXG4gIGNvbnN0IFtlcnJvciwgc2V0RXJyb3JdID0gdXNlU3RhdGU8c3RyaW5nIHwgbnVsbD4obnVsbClcbiAgY29uc3QgW2lmcmFtZUtleSwgc2V0SWZyYW1lS2V5XSA9IHVzZVN0YXRlKDApIC8vIOa3u+WKoGtleeadpeW8uuWItumHjeaWsOWIm+W7umlmcmFtZVxuXG4gIHVzZUVmZmVjdCgoKSA9PiB7XG4gICAgaWYgKCFhcGFydG1lbnQuaGFzTW9kZWwpIHtcbiAgICAgIHNldEVycm9yKFwi6K+l5YWs5a+T5pqC5pegM0TmqKHlnotcIilcbiAgICAgIHNldElzTG9hZGluZyhmYWxzZSlcbiAgICAgIHJldHVyblxuICAgIH1cblxuICAgIC8vIOmHjee9rueKtuaAgVxuICAgIHNldEVycm9yKG51bGwpXG4gICAgc2V0SXNMb2FkaW5nKHRydWUpXG4gICAgXG4gICAgLy8g5bu26L+f5LiA54K55pe26Ze056Gu5L+daWZyYW1l5a6M5YWo6YeN5paw5Yib5bu6XG4gICAgY29uc3QgdGltZXIgPSBzZXRUaW1lb3V0KCgpID0+IHtcbiAgICAgIC8vIOWIm+W7ujNE5p+l55yL5Zmo55qESFRNTOWGheWuuVxuICAgICAgY29uc3QgY3JlYXRlM0RWaWV3ZXJIVE1MID0gKCkgPT4ge1xuICAgICAgICByZXR1cm4gYFxuPCFET0NUWVBFIGh0bWw+XG48aHRtbCBsYW5nPVwiemgtQ05cIj5cbjxoZWFkPlxuICAgIDxtZXRhIGNoYXJzZXQ9XCJVVEYtOFwiPlxuICAgIDxtZXRhIG5hbWU9XCJ2aWV3cG9ydFwiIGNvbnRlbnQ9XCJ3aWR0aD1kZXZpY2Utd2lkdGgsIGluaXRpYWwtc2NhbGU9MS4wXCI+XG4gICAgPHRpdGxlPiR7YXBhcnRtZW50LnRpdGxlfSAtIDNE5p+l55yL5ZmoPC90aXRsZT5cbiAgICA8c3R5bGU+XG4gICAgICAgIGJvZHkge1xuICAgICAgICAgICAgbWFyZ2luOiAwO1xuICAgICAgICAgICAgcGFkZGluZzogMDtcbiAgICAgICAgICAgIGZvbnQtZmFtaWx5OiAtYXBwbGUtc3lzdGVtLCBCbGlua01hY1N5c3RlbUZvbnQsICdTZWdvZSBVSScsIFJvYm90bywgc2Fucy1zZXJpZjtcbiAgICAgICAgICAgIGJhY2tncm91bmQ6ICNmNWY1ZjU7XG4gICAgICAgICAgICBvdmVyZmxvdzogaGlkZGVuO1xuICAgICAgICB9XG4gICAgICAgIFxuICAgICAgICAudmlld2VyLWNvbnRhaW5lciB7XG4gICAgICAgICAgICBkaXNwbGF5OiBmbGV4O1xuICAgICAgICAgICAgaGVpZ2h0OiAxMDB2aDtcbiAgICAgICAgICAgIHdpZHRoOiAxMDB2dztcbiAgICAgICAgfVxuICAgICAgICBcbiAgICAgICAgLnNpZGViYXIge1xuICAgICAgICAgICAgd2lkdGg6IDI4MHB4O1xuICAgICAgICAgICAgYmFja2dyb3VuZDogd2hpdGU7XG4gICAgICAgICAgICBib3JkZXItcmlnaHQ6IDFweCBzb2xpZCAjZTVlNWU1O1xuICAgICAgICAgICAgcGFkZGluZzogMjBweDtcbiAgICAgICAgICAgIG92ZXJmbG93LXk6IGF1dG87XG4gICAgICAgICAgICBib3gtc2hhZG93OiAycHggMCAxMHB4IHJnYmEoMCwwLDAsMC4xKTtcbiAgICAgICAgfVxuICAgICAgICBcbiAgICAgICAgLm1vZGVsLXZpZXcge1xuICAgICAgICAgICAgZmxleDogMTtcbiAgICAgICAgICAgIHBvc2l0aW9uOiByZWxhdGl2ZTtcbiAgICAgICAgICAgIGJhY2tncm91bmQ6ICNmMGYwZjA7XG4gICAgICAgIH1cbiAgICAgICAgXG4gICAgICAgICNtb2RlbENvbnRhaW5lciB7XG4gICAgICAgICAgICB3aWR0aDogMTAwJTtcbiAgICAgICAgICAgIGhlaWdodDogMTAwJTtcbiAgICAgICAgICAgIHBvc2l0aW9uOiByZWxhdGl2ZTtcbiAgICAgICAgfVxuICAgICAgICBcbiAgICAgICAgLnBhbmVsIHtcbiAgICAgICAgICAgIGJhY2tncm91bmQ6ICNmOGY5ZmE7XG4gICAgICAgICAgICBib3JkZXI6IDFweCBzb2xpZCAjZTllY2VmO1xuICAgICAgICAgICAgYm9yZGVyLXJhZGl1czogOHB4O1xuICAgICAgICAgICAgcGFkZGluZzogMTZweDtcbiAgICAgICAgICAgIG1hcmdpbi1ib3R0b206IDE2cHg7XG4gICAgICAgIH1cbiAgICAgICAgXG4gICAgICAgIC5wYW5lbCBoMyB7XG4gICAgICAgICAgICBtYXJnaW46IDAgMCAxMnB4IDA7XG4gICAgICAgICAgICBmb250LXNpemU6IDE0cHg7XG4gICAgICAgICAgICBmb250LXdlaWdodDogNjAwO1xuICAgICAgICAgICAgY29sb3I6ICMzMzM7XG4gICAgICAgICAgICBkaXNwbGF5OiBmbGV4O1xuICAgICAgICAgICAgYWxpZ24taXRlbXM6IGNlbnRlcjtcbiAgICAgICAgICAgIGdhcDogOHB4O1xuICAgICAgICB9XG4gICAgICAgIFxuICAgICAgICAuYnRuIHtcbiAgICAgICAgICAgIGJhY2tncm91bmQ6ICMwMDdiZmY7XG4gICAgICAgICAgICBjb2xvcjogd2hpdGU7XG4gICAgICAgICAgICBib3JkZXI6IG5vbmU7XG4gICAgICAgICAgICBwYWRkaW5nOiA4cHggMTZweDtcbiAgICAgICAgICAgIGJvcmRlci1yYWRpdXM6IDZweDtcbiAgICAgICAgICAgIGN1cnNvcjogcG9pbnRlcjtcbiAgICAgICAgICAgIGZvbnQtc2l6ZTogMTNweDtcbiAgICAgICAgICAgIG1hcmdpbjogNHB4O1xuICAgICAgICAgICAgdHJhbnNpdGlvbjogYmFja2dyb3VuZC1jb2xvciAwLjJzO1xuICAgICAgICB9XG4gICAgICAgIFxuICAgICAgICAuYnRuOmhvdmVyIHtcbiAgICAgICAgICAgIGJhY2tncm91bmQ6ICMwMDU2YjM7XG4gICAgICAgIH1cbiAgICAgICAgXG4gICAgICAgIC5idG4uc2Vjb25kYXJ5IHtcbiAgICAgICAgICAgIGJhY2tncm91bmQ6ICM2Yzc1N2Q7XG4gICAgICAgIH1cbiAgICAgICAgXG4gICAgICAgIC5idG4uc2Vjb25kYXJ5OmhvdmVyIHtcbiAgICAgICAgICAgIGJhY2tncm91bmQ6ICM1NDViNjI7XG4gICAgICAgIH1cbiAgICAgICAgXG4gICAgICAgIC5idG4uZnVsbC13aWR0aCB7XG4gICAgICAgICAgICB3aWR0aDogMTAwJTtcbiAgICAgICAgICAgIG1hcmdpbjogNHB4IDA7XG4gICAgICAgIH1cbiAgICAgICAgXG4gICAgICAgIC5jb250cm9scy1ncm91cCB7XG4gICAgICAgICAgICBkaXNwbGF5OiBmbGV4O1xuICAgICAgICAgICAgZmxleC13cmFwOiB3cmFwO1xuICAgICAgICAgICAgZ2FwOiA0cHg7XG4gICAgICAgICAgICBtYXJnaW4tdG9wOiA4cHg7XG4gICAgICAgIH1cbiAgICAgICAgXG4gICAgICAgIC5jb250cm9scy1ncm91cCAuYnRuIHtcbiAgICAgICAgICAgIGZsZXg6IDE7XG4gICAgICAgICAgICBtaW4td2lkdGg6IDgwcHg7XG4gICAgICAgIH1cbiAgICAgICAgXG4gICAgICAgIHNlbGVjdCB7XG4gICAgICAgICAgICB3aWR0aDogMTAwJTtcbiAgICAgICAgICAgIHBhZGRpbmc6IDhweDtcbiAgICAgICAgICAgIGJvcmRlcjogMXB4IHNvbGlkICNkZGQ7XG4gICAgICAgICAgICBib3JkZXItcmFkaXVzOiA0cHg7XG4gICAgICAgICAgICBmb250LXNpemU6IDEzcHg7XG4gICAgICAgICAgICBtYXJnaW4tdG9wOiA4cHg7XG4gICAgICAgIH1cbiAgICAgICAgXG4gICAgICAgIC52aWV3LWluZm8ge1xuICAgICAgICAgICAgcG9zaXRpb246IGFic29sdXRlO1xuICAgICAgICAgICAgdG9wOiAyMHB4O1xuICAgICAgICAgICAgcmlnaHQ6IDIwcHg7XG4gICAgICAgICAgICBiYWNrZ3JvdW5kOiByZ2JhKDAsMCwwLDAuNyk7XG4gICAgICAgICAgICBjb2xvcjogd2hpdGU7XG4gICAgICAgICAgICBwYWRkaW5nOiA4cHggMTJweDtcbiAgICAgICAgICAgIGJvcmRlci1yYWRpdXM6IDZweDtcbiAgICAgICAgICAgIGZvbnQtc2l6ZTogMTJweDtcbiAgICAgICAgICAgIHotaW5kZXg6IDEwMDtcbiAgICAgICAgfVxuICAgICAgICBcbiAgICAgICAgLmVzYy1wcm9tcHQge1xuICAgICAgICAgICAgcG9zaXRpb246IGFic29sdXRlO1xuICAgICAgICAgICAgdG9wOiAyMHB4O1xuICAgICAgICAgICAgbGVmdDogMjBweDtcbiAgICAgICAgICAgIGJhY2tncm91bmQ6IHJnYmEoMjU1LDAsMCwwLjgpO1xuICAgICAgICAgICAgY29sb3I6IHdoaXRlO1xuICAgICAgICAgICAgcGFkZGluZzogOHB4IDEycHg7XG4gICAgICAgICAgICBib3JkZXItcmFkaXVzOiA2cHg7XG4gICAgICAgICAgICBmb250LXNpemU6IDEycHg7XG4gICAgICAgICAgICB6LWluZGV4OiAxMDA7XG4gICAgICAgIH1cbiAgICAgICAgXG4gICAgICAgIC5lc2MtcHJvbXB0LmhpZGRlbiB7XG4gICAgICAgICAgICBkaXNwbGF5OiBub25lO1xuICAgICAgICB9XG4gICAgICAgIFxuICAgICAgICAjbG9hZGluZ092ZXJsYXkge1xuICAgICAgICAgICAgcG9zaXRpb246IGFic29sdXRlO1xuICAgICAgICAgICAgdG9wOiAwO1xuICAgICAgICAgICAgbGVmdDogMDtcbiAgICAgICAgICAgIHdpZHRoOiAxMDAlO1xuICAgICAgICAgICAgaGVpZ2h0OiAxMDAlO1xuICAgICAgICAgICAgYmFja2dyb3VuZDogcmdiYSgyNTUsMjU1LDI1NSwwLjkpO1xuICAgICAgICAgICAgZGlzcGxheTogZmxleDtcbiAgICAgICAgICAgIGZsZXgtZGlyZWN0aW9uOiBjb2x1bW47XG4gICAgICAgICAgICBqdXN0aWZ5LWNvbnRlbnQ6IGNlbnRlcjtcbiAgICAgICAgICAgIGFsaWduLWl0ZW1zOiBjZW50ZXI7XG4gICAgICAgICAgICB6LWluZGV4OiAxMDAwO1xuICAgICAgICB9XG4gICAgICAgIFxuICAgICAgICAuc3Bpbm5lciB7XG4gICAgICAgICAgICB3aWR0aDogNDBweDtcbiAgICAgICAgICAgIGhlaWdodDogNDBweDtcbiAgICAgICAgICAgIGJvcmRlcjogNHB4IHNvbGlkICNmM2YzZjM7XG4gICAgICAgICAgICBib3JkZXItdG9wOiA0cHggc29saWQgIzAwN2JmZjtcbiAgICAgICAgICAgIGJvcmRlci1yYWRpdXM6IDUwJTtcbiAgICAgICAgICAgIGFuaW1hdGlvbjogc3BpbiAxcyBsaW5lYXIgaW5maW5pdGU7XG4gICAgICAgIH1cbiAgICAgICAgXG4gICAgICAgIEBrZXlmcmFtZXMgc3BpbiB7XG4gICAgICAgICAgICAwJSB7IHRyYW5zZm9ybTogcm90YXRlKDBkZWcpOyB9XG4gICAgICAgICAgICAxMDAlIHsgdHJhbnNmb3JtOiByb3RhdGUoMzYwZGVnKTsgfVxuICAgICAgICB9XG4gICAgICAgIFxuICAgICAgICAubG9hZGluZy10ZXh0IHtcbiAgICAgICAgICAgIG1hcmdpbi10b3A6IDE2cHg7XG4gICAgICAgICAgICBmb250LXNpemU6IDE0cHg7XG4gICAgICAgICAgICBjb2xvcjogIzY2NjtcbiAgICAgICAgfVxuICAgICAgICBcbiAgICAgICAgLmNlbnRlci1zY3JlZW4ge1xuICAgICAgICAgICAgcG9zaXRpb246IGFic29sdXRlO1xuICAgICAgICAgICAgdG9wOiA1MCU7XG4gICAgICAgICAgICBsZWZ0OiA1MCU7XG4gICAgICAgICAgICB0cmFuc2Zvcm06IHRyYW5zbGF0ZSgtNTAlLCAtNTAlKTtcbiAgICAgICAgICAgIHotaW5kZXg6IDIwMDtcbiAgICAgICAgfVxuICAgICAgICBcbiAgICAgICAgLmNlbnRlci1zY3JlZW4uaGlkZGVuIHtcbiAgICAgICAgICAgIGRpc3BsYXk6IG5vbmU7XG4gICAgICAgIH1cbiAgICAgICAgXG4gICAgICAgIC5wcm9tcHQtY29udGVudCB7XG4gICAgICAgICAgICBiYWNrZ3JvdW5kOiB3aGl0ZTtcbiAgICAgICAgICAgIHBhZGRpbmc6IDIwcHg7XG4gICAgICAgICAgICBib3JkZXItcmFkaXVzOiA4cHg7XG4gICAgICAgICAgICBib3gtc2hhZG93OiAwIDRweCAyMHB4IHJnYmEoMCwwLDAsMC4zKTtcbiAgICAgICAgfVxuICAgICAgICBcbiAgICAgICAgLmNsb3NlLWJ0biB7XG4gICAgICAgICAgICBwb3NpdGlvbjogYWJzb2x1dGU7XG4gICAgICAgICAgICB0b3A6IDEwcHg7XG4gICAgICAgICAgICByaWdodDogMTBweDtcbiAgICAgICAgICAgIGJhY2tncm91bmQ6IHJnYmEoMCwwLDAsMC41KTtcbiAgICAgICAgICAgIGNvbG9yOiB3aGl0ZTtcbiAgICAgICAgICAgIGJvcmRlcjogbm9uZTtcbiAgICAgICAgICAgIHdpZHRoOiAzMHB4O1xuICAgICAgICAgICAgaGVpZ2h0OiAzMHB4O1xuICAgICAgICAgICAgYm9yZGVyLXJhZGl1czogNTAlO1xuICAgICAgICAgICAgY3Vyc29yOiBwb2ludGVyO1xuICAgICAgICAgICAgZm9udC1zaXplOiAxNnB4O1xuICAgICAgICAgICAgei1pbmRleDogMTAwMTtcbiAgICAgICAgfVxuICAgICAgICBcbiAgICAgICAgLmNsb3NlLWJ0bjpob3ZlciB7XG4gICAgICAgICAgICBiYWNrZ3JvdW5kOiByZ2JhKDAsMCwwLDAuNyk7XG4gICAgICAgIH1cbiAgICA8L3N0eWxlPlxuPC9oZWFkPlxuPGJvZHk+XG4gICAgPGRpdiBjbGFzcz1cInZpZXdlci1jb250YWluZXJcIj5cbiAgICAgICAgPGRpdiBjbGFzcz1cInNpZGViYXJcIj5cbiAgICAgICAgICAgIDxkaXYgY2xhc3M9XCJwYW5lbFwiPlxuICAgICAgICAgICAgICAgIDxoMz7wn4+gIOWFrOWvk+S/oeaBrzwvaDM+XG4gICAgICAgICAgICAgICAgPGg0IHN0eWxlPVwibWFyZ2luOiAwOyBjb2xvcjogIzMzMztcIj4ke2FwYXJ0bWVudC50aXRsZX08L2g0PlxuICAgICAgICAgICAgICAgIDxwIHN0eWxlPVwiZm9udC1zaXplOiAxMnB4OyBjb2xvcjogIzY2NjsgbWFyZ2luOiA4cHggMCAwIDA7XCI+JHthcGFydG1lbnQuZGVzY3JpcHRpb259PC9wPlxuICAgICAgICAgICAgPC9kaXY+XG5cbiAgICAgICAgICAgIDxkaXYgY2xhc3M9XCJwYW5lbFwiPlxuICAgICAgICAgICAgICAgIDxoMz7wn46uIOinhuinkuaOp+WItjwvaDM+XG4gICAgICAgICAgICAgICAgPGRpdiBjbGFzcz1cImNvbnRyb2xzLWdyb3VwXCI+XG4gICAgICAgICAgICAgICAgICAgIDxidXR0b24gaWQ9XCJ0b2dnbGVDb250cm9sTW9kZUJ0blwiIGNsYXNzPVwiYnRuIGZ1bGwtd2lkdGhcIj5cbiAgICAgICAgICAgICAgICAgICAgICAgIDxzcGFuIGlkPVwiY29udHJvbE1vZGVUZXh0XCI+5YiH5o2i5YiwRlBT5qih5byPPC9zcGFuPlxuICAgICAgICAgICAgICAgICAgICA8L2J1dHRvbj5cbiAgICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzPVwiY29udHJvbHMtZ3JvdXBcIj5cbiAgICAgICAgICAgICAgICAgICAgPGJ1dHRvbiBpZD1cInZpZXdUb3BCdG5cIiBjbGFzcz1cImJ0biBzZWNvbmRhcnlcIj7pobbop4blm748L2J1dHRvbj5cbiAgICAgICAgICAgICAgICAgICAgPGJ1dHRvbiBpZD1cInZpZXdGcm9udEJ0blwiIGNsYXNzPVwiYnRuIHNlY29uZGFyeVwiPuato+inhuWbvjwvYnV0dG9uPlxuICAgICAgICAgICAgICAgICAgICA8YnV0dG9uIGlkPVwidmlld1NpZGVCdG5cIiBjbGFzcz1cImJ0biBzZWNvbmRhcnlcIj7kvqfop4blm748L2J1dHRvbj5cbiAgICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzPVwiY29udHJvbHMtZ3JvdXBcIj5cbiAgICAgICAgICAgICAgICAgICAgPGJ1dHRvbiBpZD1cInJlc2V0Vmlld0J0blwiIGNsYXNzPVwiYnRuIGZ1bGwtd2lkdGhcIj7ph43nva7op4blm748L2J1dHRvbj5cbiAgICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzPVwiY29udHJvbHMtZ3JvdXBcIj5cbiAgICAgICAgICAgICAgICAgICAgPGJ1dHRvbiBpZD1cInRvZ2dsZVdpcmVmcmFtZUJ0blwiIGNsYXNzPVwiYnRuIHNlY29uZGFyeSBmdWxsLXdpZHRoXCI+5YiH5o2i57q/5qGG5qih5byPPC9idXR0b24+XG4gICAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICA8L2Rpdj5cblxuICAgICAgICAgICAgPGRpdiBjbGFzcz1cInBhbmVsXCI+XG4gICAgICAgICAgICAgICAgPGgzPuKame+4jyDotKjph4/mjqfliLY8L2gzPlxuICAgICAgICAgICAgICAgIDxsYWJlbCBmb3I9XCJxdWFsaXR5U2VsZWN0b3JcIj7muLLmn5PotKjph486PC9sYWJlbD5cbiAgICAgICAgICAgICAgICA8c2VsZWN0IGlkPVwicXVhbGl0eVNlbGVjdG9yXCI+XG4gICAgICAgICAgICAgICAgICAgIDxvcHRpb24gdmFsdWU9XCJsb3dcIj7kvY4gKOabtOa1geeVhSk8L29wdGlvbj5cbiAgICAgICAgICAgICAgICAgICAgPG9wdGlvbiB2YWx1ZT1cIm1lZGl1bVwiIHNlbGVjdGVkPuS4rSAo5bmz6KGhKTwvb3B0aW9uPlxuICAgICAgICAgICAgICAgICAgICA8b3B0aW9uIHZhbHVlPVwiaGlnaFwiPumrmCAo5pu05riF5pmwKTwvb3B0aW9uPlxuICAgICAgICAgICAgICAgIDwvc2VsZWN0PlxuICAgICAgICAgICAgPC9kaXY+XG5cbiAgICAgICAgICAgIDxkaXYgY2xhc3M9XCJwYW5lbFwiPlxuICAgICAgICAgICAgICAgIDxoMz7wn5O3IOaIquWbvjwvaDM+XG4gICAgICAgICAgICAgICAgPGJ1dHRvbiBpZD1cInNjcmVlbnNob3RCdG5cIiBjbGFzcz1cImJ0biBmdWxsLXdpZHRoXCI+5L+d5a2Y5oiq5Zu+PC9idXR0b24+XG4gICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgPC9kaXY+XG5cbiAgICAgICAgPGRpdiBjbGFzcz1cIm1vZGVsLXZpZXdcIj5cbiAgICAgICAgICAgIDxidXR0b24gY2xhc3M9XCJjbG9zZS1idG5cIiBvbmNsaWNrPVwid2luZG93LnBhcmVudC5wb3N0TWVzc2FnZSgnY2xvc2UnLCAnKicpXCIgdGl0bGU9XCLlhbPpl61cIj7DlzwvYnV0dG9uPlxuICAgICAgICAgICAgPGRpdiBpZD1cIm1vZGVsQ29udGFpbmVyXCI+XG4gICAgICAgICAgICAgICAgPGRpdiBjbGFzcz1cInZpZXctaW5mb1wiPlxuICAgICAgICAgICAgICAgICAgICA8ZGl2IGlkPVwicm90YXRpb25JbmZvXCI+6KeG6KeSOiAwwrA8L2Rpdj5cbiAgICAgICAgICAgICAgICAgICAgPGRpdiBpZD1cInpvb21JbmZvXCI+6auY5bqmOiAke2FwYXJ0bWVudC5jb25maWcuY2FtZXJhLmhlaWdodH1tPC9kaXY+XG4gICAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICAgICAgPGRpdiBpZD1cImVzY0V4aXRQcm9tcHRcIiBjbGFzcz1cImVzYy1wcm9tcHQgaGlkZGVuXCI+XG4gICAgICAgICAgICAgICAgICAgIOaMiUVTQ+mAgOWHukZQU+aooeW8j1xuICAgICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgICAgIDxkaXYgaWQ9XCJsb2FkaW5nT3ZlcmxheVwiPlxuICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzPVwic3Bpbm5lclwiPjwvZGl2PlxuICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzPVwibG9hZGluZy10ZXh0XCI+5q2j5Zyo5Yqg6L295qih5Z6LLi4uPC9kaXY+XG4gICAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICAgICAgPGRpdiBpZD1cInBvaW50ZXJMb2NrUHJvbXB0XCIgY2xhc3M9XCJjZW50ZXItc2NyZWVuIGhpZGRlblwiPlxuICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzPVwicHJvbXB0LWNvbnRlbnRcIj5cbiAgICAgICAgICAgICAgICAgICAgICAgIDxidXR0b24gaWQ9XCJlbnRlckZQU0J0blwiIGNsYXNzPVwiYnRuIGZ1bGwtd2lkdGhcIiBzdHlsZT1cImZvbnQtc2l6ZToxLjFyZW07cGFkZGluZzoxZW0gMmVtO1wiPueCueWHu+S7peWQr+eUqEZQU+aOp+WItjwvYnV0dG9uPlxuICAgICAgICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICA8L2Rpdj5cbiAgICA8L2Rpdj5cblxuICAgIDwhLS0gVGhyZWUuanMg5bqTIC0tPlxuICAgIDxzY3JpcHQgc3JjPVwiaHR0cHM6Ly9jZG5qcy5jbG91ZGZsYXJlLmNvbS9hamF4L2xpYnMvdGhyZWUuanMvcjEyOC90aHJlZS5taW4uanNcIj48L3NjcmlwdD5cbiAgICA8c2NyaXB0IHNyYz1cImh0dHBzOi8vY2RuLmpzZGVsaXZyLm5ldC9ucG0vdGhyZWVAMC4xMjguMC9leGFtcGxlcy9qcy9jb250cm9scy9PcmJpdENvbnRyb2xzLm1pbi5qc1wiPjwvc2NyaXB0PlxuICAgIDxzY3JpcHQgc3JjPVwiaHR0cHM6Ly9jZG4uanNkZWxpdnIubmV0L25wbS90aHJlZUAwLjEyOC4wL2V4YW1wbGVzL2pzL2NvbnRyb2xzL1BvaW50ZXJMb2NrQ29udHJvbHMubWluLmpzXCI+PC9zY3JpcHQ+XG4gICAgPHNjcmlwdCBzcmM9XCJodHRwczovL2Nkbi5qc2RlbGl2ci5uZXQvbnBtL3RocmVlQDAuMTI4LjAvZXhhbXBsZXMvanMvbG9hZGVycy9PQkpMb2FkZXIubWluLmpzXCI+PC9zY3JpcHQ+XG4gICAgPHNjcmlwdCBzcmM9XCJodHRwczovL2Nkbi5qc2RlbGl2ci5uZXQvbnBtL3RocmVlQDAuMTI4LjAvZXhhbXBsZXMvanMvbG9hZGVycy9NVExMb2FkZXIubWluLmpzXCI+PC9zY3JpcHQ+XG4gICAgXG4gICAgPHNjcmlwdD5cbiAgICAgICAgLy8g5by65Yi26YeN572u5omA5pyJ5YWo5bGA5Y+Y6YePXG4gICAgICAgIGlmICh3aW5kb3cuc2NlbmUpIHtcbiAgICAgICAgICAgIHdpbmRvdy5zY2VuZS5jbGVhcigpO1xuICAgICAgICB9XG4gICAgICAgIGlmICh3aW5kb3cucmVuZGVyZXIpIHtcbiAgICAgICAgICAgIHdpbmRvdy5yZW5kZXJlci5kaXNwb3NlKCk7XG4gICAgICAgIH1cbiAgICAgICAgXG4gICAgICAgIC8vIDNE5p+l55yL5Zmo5Yid5aeL5YyW6ISa5pysXG4gICAgICAgIGxldCBzY2VuZSwgY2FtZXJhLCByZW5kZXJlciwgY29udHJvbHMsIG1vZGVsO1xuICAgICAgICBsZXQgb3JiaXRDb250cm9scywgcG9pbnRlckxvY2tDb250cm9scztcbiAgICAgICAgbGV0IGlzV2lyZWZyYW1lID0gZmFsc2U7XG4gICAgICAgIGxldCBjdXJyZW50Q29udHJvbE1vZGUgPSAnb3JiaXQnOyAvLyAnb3JiaXQnIG9yICdmcHMnXG4gICAgICAgIGxldCBhbmltYXRpb25JZCA9IG51bGw7IC8vIOeUqOS6jua4heeQhuWKqOeUu+W+queOr1xuICAgICAgICBcbiAgICAgICAgLy8g5YWs5a+T6YWN572uXG4gICAgICAgIGNvbnN0IGFwYXJ0bWVudENvbmZpZyA9ICR7SlNPTi5zdHJpbmdpZnkoYXBhcnRtZW50LmNvbmZpZyl9O1xuICAgICAgICBjb25zdCBtb2RlbFBhdGggPSBcIiR7YXBhcnRtZW50Lm1vZGVsUGF0aH1cIjtcbiAgICAgICAgXG4gICAgICAgIC8vIOa4heeQhuS5i+WJjeeahOi1hOa6kFxuICAgICAgICBmdW5jdGlvbiBjbGVhbnVwKCkge1xuICAgICAgICAgICAgaWYgKGFuaW1hdGlvbklkKSB7XG4gICAgICAgICAgICAgICAgY2FuY2VsQW5pbWF0aW9uRnJhbWUoYW5pbWF0aW9uSWQpO1xuICAgICAgICAgICAgICAgIGFuaW1hdGlvbklkID0gbnVsbDtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIFxuICAgICAgICAgICAgaWYgKHJlbmRlcmVyKSB7XG4gICAgICAgICAgICAgICAgcmVuZGVyZXIuZGlzcG9zZSgpO1xuICAgICAgICAgICAgICAgIHJlbmRlcmVyLmZvcmNlQ29udGV4dExvc3MoKTtcbiAgICAgICAgICAgICAgICBpZiAocmVuZGVyZXIuZG9tRWxlbWVudCAmJiByZW5kZXJlci5kb21FbGVtZW50LnBhcmVudE5vZGUpIHtcbiAgICAgICAgICAgICAgICAgICAgcmVuZGVyZXIuZG9tRWxlbWVudC5wYXJlbnROb2RlLnJlbW92ZUNoaWxkKHJlbmRlcmVyLmRvbUVsZW1lbnQpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIFxuICAgICAgICAgICAgaWYgKHNjZW5lKSB7XG4gICAgICAgICAgICAgICAgc2NlbmUuY2xlYXIoKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIFxuICAgICAgICAgICAgLy8g5riF55CG5LqL5Lu255uR5ZCs5ZmoXG4gICAgICAgICAgICB3aW5kb3cucmVtb3ZlRXZlbnRMaXN0ZW5lcigncmVzaXplJywgb25XaW5kb3dSZXNpemUpO1xuICAgICAgICAgICAgZG9jdW1lbnQucmVtb3ZlRXZlbnRMaXN0ZW5lcigna2V5ZG93bicsIG9uS2V5RG93bik7XG4gICAgICAgIH1cbiAgICAgICAgXG4gICAgICAgIC8vIOWIneWni+WMljNE5Zy65pmvXG4gICAgICAgIGZ1bmN0aW9uIGluaXQoKSB7XG4gICAgICAgICAgICB0cnkge1xuICAgICAgICAgICAgICAgIC8vIOWFiOa4heeQhuS5i+WJjeeahOi1hOa6kFxuICAgICAgICAgICAgICAgIGNsZWFudXAoKTtcbiAgICAgICAgICAgICAgICBcbiAgICAgICAgICAgICAgICAvLyDliJvlu7rlnLrmma9cbiAgICAgICAgICAgICAgICBzY2VuZSA9IG5ldyBUSFJFRS5TY2VuZSgpO1xuICAgICAgICAgICAgICAgIHNjZW5lLmJhY2tncm91bmQgPSBuZXcgVEhSRUUuQ29sb3IoMHhmMGYwZjApO1xuICAgICAgICAgICAgICAgIFxuICAgICAgICAgICAgICAgIC8vIOWIm+W7uuebuOaculxuICAgICAgICAgICAgICAgIGNhbWVyYSA9IG5ldyBUSFJFRS5QZXJzcGVjdGl2ZUNhbWVyYSg3NSwgd2luZG93LmlubmVyV2lkdGggLyB3aW5kb3cuaW5uZXJIZWlnaHQsIDAuMSwgMTAwMCk7XG4gICAgICAgICAgICAgICAgY2FtZXJhLnBvc2l0aW9uLnNldChhcGFydG1lbnRDb25maWcuY2FtZXJhLmluaXRfcG9pbnRbMF0sIGFwYXJ0bWVudENvbmZpZy5jYW1lcmEuaGVpZ2h0LCBhcGFydG1lbnRDb25maWcuY2FtZXJhLmluaXRfcG9pbnRbMV0pO1xuICAgICAgICAgICAgICAgIFxuICAgICAgICAgICAgICAgIC8vIOWIm+W7uua4suafk+WZqFxuICAgICAgICAgICAgICAgIHJlbmRlcmVyID0gbmV3IFRIUkVFLldlYkdMUmVuZGVyZXIoeyBhbnRpYWxpYXM6IHRydWUgfSk7XG4gICAgICAgICAgICAgICAgcmVuZGVyZXIuc2V0U2l6ZSh3aW5kb3cuaW5uZXJXaWR0aCAtIDI4MCwgd2luZG93LmlubmVySGVpZ2h0KTtcbiAgICAgICAgICAgICAgICByZW5kZXJlci5zaGFkb3dNYXAuZW5hYmxlZCA9IHRydWU7XG4gICAgICAgICAgICAgICAgcmVuZGVyZXIuc2hhZG93TWFwLnR5cGUgPSBUSFJFRS5QQ0ZTb2Z0U2hhZG93TWFwO1xuICAgICAgICAgICAgICAgIFxuICAgICAgICAgICAgICAgIGNvbnN0IGNvbnRhaW5lciA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdtb2RlbENvbnRhaW5lcicpO1xuICAgICAgICAgICAgICAgIGNvbnN0IGNhbnZhcyA9IGNvbnRhaW5lci5xdWVyeVNlbGVjdG9yKCdjYW52YXMnKTtcbiAgICAgICAgICAgICAgICBpZiAoY2FudmFzKSB7XG4gICAgICAgICAgICAgICAgICAgIGNvbnRhaW5lci5yZW1vdmVDaGlsZChjYW52YXMpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBjb250YWluZXIuYXBwZW5kQ2hpbGQocmVuZGVyZXIuZG9tRWxlbWVudCk7XG4gICAgICAgICAgICAgICAgXG4gICAgICAgICAgICAgICAgLy8g5Yib5bu65o6n5Yi25ZmoXG4gICAgICAgICAgICAgICAgc2V0dXBDb250cm9scygpO1xuICAgICAgICAgICAgICAgIFxuICAgICAgICAgICAgICAgIC8vIOa3u+WKoOWFiea6kFxuICAgICAgICAgICAgICAgIHNldHVwTGlnaHRpbmcoKTtcbiAgICAgICAgICAgICAgICBcbiAgICAgICAgICAgICAgICAvLyDliqDovb3mqKHlnotcbiAgICAgICAgICAgICAgICBsb2FkTW9kZWwoKTtcbiAgICAgICAgICAgICAgICBcbiAgICAgICAgICAgICAgICAvLyDorr7nva7kuovku7bnm5HlkKxcbiAgICAgICAgICAgICAgICBzZXR1cEV2ZW50TGlzdGVuZXJzKCk7XG4gICAgICAgICAgICAgICAgXG4gICAgICAgICAgICAgICAgLy8g5byA5aeL5riy5p+T5b6q546vXG4gICAgICAgICAgICAgICAgYW5pbWF0ZSgpO1xuICAgICAgICAgICAgICAgIFxuICAgICAgICAgICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgICAgICAgICAgICBjb25zb2xlLmVycm9yKCfliJ3lp4vljJYzROWcuuaZr+Wksei0pTonLCBlcnJvcik7XG4gICAgICAgICAgICAgICAgY29uc3QgbG9hZGluZ092ZXJsYXkgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnbG9hZGluZ092ZXJsYXknKTtcbiAgICAgICAgICAgICAgICBpZiAobG9hZGluZ092ZXJsYXkpIHtcbiAgICAgICAgICAgICAgICAgICAgbG9hZGluZ092ZXJsYXkuaW5uZXJIVE1MID0gJzxkaXYgc3R5bGU9XCJjb2xvcjogcmVkO1wiPjNE5Zy65pmv5Yid5aeL5YyW5aSx6LSlPC9kaXY+JztcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgXG4gICAgICAgIGZ1bmN0aW9uIHNldHVwQ29udHJvbHMoKSB7XG4gICAgICAgICAgICAvLyDovajpgZPmjqfliLblmahcbiAgICAgICAgICAgIG9yYml0Q29udHJvbHMgPSBuZXcgVEhSRUUuT3JiaXRDb250cm9scyhjYW1lcmEsIHJlbmRlcmVyLmRvbUVsZW1lbnQpO1xuICAgICAgICAgICAgb3JiaXRDb250cm9scy5lbmFibGVEYW1waW5nID0gdHJ1ZTtcbiAgICAgICAgICAgIG9yYml0Q29udHJvbHMuZGFtcGluZ0ZhY3RvciA9IDAuMDU7XG4gICAgICAgICAgICBvcmJpdENvbnRyb2xzLnRhcmdldC5zZXQoMCwgMCwgMCk7XG4gICAgICAgICAgICBcbiAgICAgICAgICAgIC8vIEZQU+aOp+WItuWZqFxuICAgICAgICAgICAgcG9pbnRlckxvY2tDb250cm9scyA9IG5ldyBUSFJFRS5Qb2ludGVyTG9ja0NvbnRyb2xzKGNhbWVyYSwgcmVuZGVyZXIuZG9tRWxlbWVudCk7XG4gICAgICAgICAgICBzY2VuZS5hZGQocG9pbnRlckxvY2tDb250cm9scy5nZXRPYmplY3QoKSk7XG4gICAgICAgICAgICBcbiAgICAgICAgICAgIC8vIOm7mOiupOS9v+eUqOi9qOmBk+aOp+WItuWZqFxuICAgICAgICAgICAgb3JiaXRDb250cm9scy5lbmFibGVkID0gdHJ1ZTtcbiAgICAgICAgICAgIHBvaW50ZXJMb2NrQ29udHJvbHMuZW5hYmxlZCA9IGZhbHNlO1xuICAgICAgICB9XG4gICAgICAgIFxuICAgICAgICBmdW5jdGlvbiBzZXR1cExpZ2h0aW5nKCkge1xuICAgICAgICAgICAgLy8g546v5aKD5YWJXG4gICAgICAgICAgICBjb25zdCBhbWJpZW50TGlnaHQgPSBuZXcgVEhSRUUuQW1iaWVudExpZ2h0KDB4NDA0MDQwLCAwLjYpO1xuICAgICAgICAgICAgc2NlbmUuYWRkKGFtYmllbnRMaWdodCk7XG4gICAgICAgICAgICBcbiAgICAgICAgICAgIC8vIOaWueWQkeWFiVxuICAgICAgICAgICAgY29uc3QgZGlyZWN0aW9uYWxMaWdodCA9IG5ldyBUSFJFRS5EaXJlY3Rpb25hbExpZ2h0KDB4ZmZmZmZmLCAwLjgpO1xuICAgICAgICAgICAgZGlyZWN0aW9uYWxMaWdodC5wb3NpdGlvbi5zZXQoMTAsIDEwLCA1KTtcbiAgICAgICAgICAgIGRpcmVjdGlvbmFsTGlnaHQuY2FzdFNoYWRvdyA9IHRydWU7XG4gICAgICAgICAgICBzY2VuZS5hZGQoZGlyZWN0aW9uYWxMaWdodCk7XG4gICAgICAgICAgICBcbiAgICAgICAgICAgIC8vIOeCueWFiea6kFxuICAgICAgICAgICAgY29uc3QgcG9pbnRMaWdodCA9IG5ldyBUSFJFRS5Qb2ludExpZ2h0KDB4ZmZmZmZmLCAwLjUpO1xuICAgICAgICAgICAgcG9pbnRMaWdodC5wb3NpdGlvbi5zZXQoMCwgNSwgMCk7XG4gICAgICAgICAgICBzY2VuZS5hZGQocG9pbnRMaWdodCk7XG4gICAgICAgIH1cbiAgICAgICAgXG4gICAgICAgIGZ1bmN0aW9uIGxvYWRNb2RlbCgpIHtcbiAgICAgICAgICAgIGNvbnN0IGxvYWRpbmdPdmVybGF5ID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2xvYWRpbmdPdmVybGF5Jyk7XG4gICAgICAgICAgICBcbiAgICAgICAgICAgIC8vIE1UTOWKoOi9veWZqFxuICAgICAgICAgICAgY29uc3QgbXRsTG9hZGVyID0gbmV3IFRIUkVFLk1UTExvYWRlcigpO1xuICAgICAgICAgICAgbXRsTG9hZGVyLnNldFBhdGgobW9kZWxQYXRoICsgJy8nKTtcbiAgICAgICAgICAgIFxuICAgICAgICAgICAgbXRsTG9hZGVyLmxvYWQoJ3RleHR1cmVkX291dHB1dC5tdGwnLCBmdW5jdGlvbihtYXRlcmlhbHMpIHtcbiAgICAgICAgICAgICAgICBtYXRlcmlhbHMucHJlbG9hZCgpO1xuICAgICAgICAgICAgICAgIFxuICAgICAgICAgICAgICAgIC8vIE9CSuWKoOi9veWZqFxuICAgICAgICAgICAgICAgIGNvbnN0IG9iakxvYWRlciA9IG5ldyBUSFJFRS5PQkpMb2FkZXIoKTtcbiAgICAgICAgICAgICAgICBvYmpMb2FkZXIuc2V0TWF0ZXJpYWxzKG1hdGVyaWFscyk7XG4gICAgICAgICAgICAgICAgb2JqTG9hZGVyLnNldFBhdGgobW9kZWxQYXRoICsgJy8nKTtcbiAgICAgICAgICAgICAgICBcbiAgICAgICAgICAgICAgICBvYmpMb2FkZXIubG9hZCgndGV4dHVyZWRfb3V0cHV0Lm9iaicsIFxuICAgICAgICAgICAgICAgICAgICBmdW5jdGlvbihvYmplY3QpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIC8vIOaooeWei+WKoOi9veaIkOWKn1xuICAgICAgICAgICAgICAgICAgICAgICAgbW9kZWwgPSBvYmplY3Q7XG4gICAgICAgICAgICAgICAgICAgICAgICBzY2VuZS5hZGQobW9kZWwpO1xuICAgICAgICAgICAgICAgICAgICAgICAgXG4gICAgICAgICAgICAgICAgICAgICAgICAvLyDorqHnrpfmqKHlnovovrnnlYznm5JcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IGJveCA9IG5ldyBUSFJFRS5Cb3gzKCkuc2V0RnJvbU9iamVjdChtb2RlbCk7XG4gICAgICAgICAgICAgICAgICAgICAgICBjb25zdCBjZW50ZXIgPSBib3guZ2V0Q2VudGVyKG5ldyBUSFJFRS5WZWN0b3IzKCkpO1xuICAgICAgICAgICAgICAgICAgICAgICAgY29uc3Qgc2l6ZSA9IGJveC5nZXRTaXplKG5ldyBUSFJFRS5WZWN0b3IzKCkpO1xuICAgICAgICAgICAgICAgICAgICAgICAgXG4gICAgICAgICAgICAgICAgICAgICAgICAvLyDosIPmlbTnm7jmnLrkvY3nva5cbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IG1heERpbSA9IE1hdGgubWF4KHNpemUueCwgc2l6ZS55LCBzaXplLnopO1xuICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgZm92ID0gY2FtZXJhLmZvdiAqIChNYXRoLlBJIC8gMTgwKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGxldCBjYW1lcmFaID0gTWF0aC5hYnMobWF4RGltIC8gMiAvIE1hdGgudGFuKGZvdiAvIDIpKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGNhbWVyYVogKj0gMS41OyAvLyDlop7liqDkuIDkupvot53nprtcbiAgICAgICAgICAgICAgICAgICAgICAgIFxuICAgICAgICAgICAgICAgICAgICAgICAgY2FtZXJhLnBvc2l0aW9uLnNldChjZW50ZXIueCwgY2VudGVyLnkgKyBhcGFydG1lbnRDb25maWcuY2FtZXJhLmhlaWdodCwgY2VudGVyLnogKyBjYW1lcmFaKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIG9yYml0Q29udHJvbHMudGFyZ2V0LmNvcHkoY2VudGVyKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIFxuICAgICAgICAgICAgICAgICAgICAgICAgLy8g6ZqQ6JeP5Yqg6L2955WM6Z2iXG4gICAgICAgICAgICAgICAgICAgICAgICBsb2FkaW5nT3ZlcmxheS5zdHlsZS5kaXNwbGF5ID0gJ25vbmUnO1xuICAgICAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgICAgICBmdW5jdGlvbihwcm9ncmVzcykge1xuICAgICAgICAgICAgICAgICAgICAgICAgLy8g5Yqg6L296L+b5bqmXG4gICAgICAgICAgICAgICAgICAgICAgICBjb25zb2xlLmxvZygnTG9hZGluZyBwcm9ncmVzczonLCBwcm9ncmVzcyk7XG4gICAgICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgICAgIGZ1bmN0aW9uKGVycm9yKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAvLyDliqDovb3plJnor69cbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnNvbGUuZXJyb3IoJ0Vycm9yIGxvYWRpbmcgbW9kZWw6JywgZXJyb3IpO1xuICAgICAgICAgICAgICAgICAgICAgICAgbG9hZGluZ092ZXJsYXkuaW5uZXJIVE1MID0gJzxkaXYgc3R5bGU9XCJjb2xvcjogcmVkO1wiPuaooeWei+WKoOi9veWksei0pTwvZGl2Pic7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICApO1xuICAgICAgICAgICAgfSwgdW5kZWZpbmVkLCBmdW5jdGlvbihlcnJvcikge1xuICAgICAgICAgICAgICAgIGNvbnNvbGUuZXJyb3IoJ0Vycm9yIGxvYWRpbmcgbWF0ZXJpYWxzOicsIGVycm9yKTtcbiAgICAgICAgICAgICAgICBsb2FkaW5nT3ZlcmxheS5pbm5lckhUTUwgPSAnPGRpdiBzdHlsZT1cImNvbG9yOiByZWQ7XCI+5p2Q6LSo5Yqg6L295aSx6LSlPC9kaXY+JztcbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9XG4gICAgICAgIFxuICAgICAgICBmdW5jdGlvbiBzZXR1cEV2ZW50TGlzdGVuZXJzKCkge1xuICAgICAgICAgICAgLy8g5o6n5Yi25qih5byP5YiH5o2iXG4gICAgICAgICAgICBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgndG9nZ2xlQ29udHJvbE1vZGVCdG4nKS5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIHRvZ2dsZUNvbnRyb2xNb2RlKTtcbiAgICAgICAgICAgIFxuICAgICAgICAgICAgLy8g6KeG6KeS5oyJ6ZKuXG4gICAgICAgICAgICBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgndmlld1RvcEJ0bicpLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgKCkgPT4gc2V0VmlldygndG9wJykpO1xuICAgICAgICAgICAgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ3ZpZXdGcm9udEJ0bicpLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgKCkgPT4gc2V0VmlldygnZnJvbnQnKSk7XG4gICAgICAgICAgICBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgndmlld1NpZGVCdG4nKS5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsICgpID0+IHNldFZpZXcoJ3NpZGUnKSk7XG4gICAgICAgICAgICBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgncmVzZXRWaWV3QnRuJykuYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCByZXNldFZpZXcpO1xuICAgICAgICAgICAgXG4gICAgICAgICAgICAvLyDnur/moYbmqKHlvI9cbiAgICAgICAgICAgIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCd0b2dnbGVXaXJlZnJhbWVCdG4nKS5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIHRvZ2dsZVdpcmVmcmFtZSk7XG4gICAgICAgICAgICBcbiAgICAgICAgICAgIC8vIOaIquWbvlxuICAgICAgICAgICAgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ3NjcmVlbnNob3RCdG4nKS5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIHRha2VTY3JlZW5zaG90KTtcbiAgICAgICAgICAgIFxuICAgICAgICAgICAgLy8g6LSo6YeP5o6n5Yi2XG4gICAgICAgICAgICBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgncXVhbGl0eVNlbGVjdG9yJykuYWRkRXZlbnRMaXN0ZW5lcignY2hhbmdlJywgY2hhbmdlUXVhbGl0eSk7XG4gICAgICAgICAgICBcbiAgICAgICAgICAgIC8vIEZQU+aooeW8j+ebuOWFs1xuICAgICAgICAgICAgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2VudGVyRlBTQnRuJykuYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCBlbnRlckZQU01vZGUpO1xuICAgICAgICAgICAgXG4gICAgICAgICAgICAvLyDplK7nm5jkuovku7ZcbiAgICAgICAgICAgIGRvY3VtZW50LmFkZEV2ZW50TGlzdGVuZXIoJ2tleWRvd24nLCBvbktleURvd24pO1xuICAgICAgICAgICAgXG4gICAgICAgICAgICAvLyDnqpflj6PlpKflsI/osIPmlbRcbiAgICAgICAgICAgIHdpbmRvdy5hZGRFdmVudExpc3RlbmVyKCdyZXNpemUnLCBvbldpbmRvd1Jlc2l6ZSk7XG4gICAgICAgIH1cbiAgICAgICAgXG4gICAgICAgIGZ1bmN0aW9uIHRvZ2dsZUNvbnRyb2xNb2RlKCkge1xuICAgICAgICAgICAgaWYgKGN1cnJlbnRDb250cm9sTW9kZSA9PT0gJ29yYml0Jykge1xuICAgICAgICAgICAgICAgIC8vIOWIh+aNouWIsEZQU+aooeW8j1xuICAgICAgICAgICAgICAgIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdwb2ludGVyTG9ja1Byb21wdCcpLmNsYXNzTGlzdC5yZW1vdmUoJ2hpZGRlbicpO1xuICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAvLyDliIfmjaLliLDovajpgZPmqKHlvI9cbiAgICAgICAgICAgICAgICBleGl0RlBTTW9kZSgpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIFxuICAgICAgICBmdW5jdGlvbiBlbnRlckZQU01vZGUoKSB7XG4gICAgICAgICAgICBwb2ludGVyTG9ja0NvbnRyb2xzLmxvY2soKTtcbiAgICAgICAgICAgIGN1cnJlbnRDb250cm9sTW9kZSA9ICdmcHMnO1xuICAgICAgICAgICAgb3JiaXRDb250cm9scy5lbmFibGVkID0gZmFsc2U7XG4gICAgICAgICAgICBwb2ludGVyTG9ja0NvbnRyb2xzLmVuYWJsZWQgPSB0cnVlO1xuICAgICAgICAgICAgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ3BvaW50ZXJMb2NrUHJvbXB0JykuY2xhc3NMaXN0LmFkZCgnaGlkZGVuJyk7XG4gICAgICAgICAgICBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnZXNjRXhpdFByb21wdCcpLmNsYXNzTGlzdC5yZW1vdmUoJ2hpZGRlbicpO1xuICAgICAgICAgICAgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2NvbnRyb2xNb2RlVGV4dCcpLnRleHRDb250ZW50ID0gJ+WIh+aNouWIsOm8oOagh+aooeW8jyc7XG4gICAgICAgIH1cbiAgICAgICAgXG4gICAgICAgIGZ1bmN0aW9uIGV4aXRGUFNNb2RlKCkge1xuICAgICAgICAgICAgcG9pbnRlckxvY2tDb250cm9scy51bmxvY2soKTtcbiAgICAgICAgICAgIGN1cnJlbnRDb250cm9sTW9kZSA9ICdvcmJpdCc7XG4gICAgICAgICAgICBvcmJpdENvbnRyb2xzLmVuYWJsZWQgPSB0cnVlO1xuICAgICAgICAgICAgcG9pbnRlckxvY2tDb250cm9scy5lbmFibGVkID0gZmFsc2U7XG4gICAgICAgICAgICBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnZXNjRXhpdFByb21wdCcpLmNsYXNzTGlzdC5hZGQoJ2hpZGRlbicpO1xuICAgICAgICAgICAgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2NvbnRyb2xNb2RlVGV4dCcpLnRleHRDb250ZW50ID0gJ+WIh+aNouWIsEZQU+aooeW8jyc7XG4gICAgICAgIH1cbiAgICAgICAgXG4gICAgICAgIGZ1bmN0aW9uIHNldFZpZXcodmlld1R5cGUpIHtcbiAgICAgICAgICAgIGlmICghbW9kZWwpIHJldHVybjtcbiAgICAgICAgICAgIFxuICAgICAgICAgICAgY29uc3QgYm94ID0gbmV3IFRIUkVFLkJveDMoKS5zZXRGcm9tT2JqZWN0KG1vZGVsKTtcbiAgICAgICAgICAgIGNvbnN0IGNlbnRlciA9IGJveC5nZXRDZW50ZXIobmV3IFRIUkVFLlZlY3RvcjMoKSk7XG4gICAgICAgICAgICBjb25zdCBzaXplID0gYm94LmdldFNpemUobmV3IFRIUkVFLlZlY3RvcjMoKSk7XG4gICAgICAgICAgICBjb25zdCBtYXhEaW0gPSBNYXRoLm1heChzaXplLngsIHNpemUueSwgc2l6ZS56KTtcbiAgICAgICAgICAgIFxuICAgICAgICAgICAgc3dpdGNoKHZpZXdUeXBlKSB7XG4gICAgICAgICAgICAgICAgY2FzZSAndG9wJzpcbiAgICAgICAgICAgICAgICAgICAgY2FtZXJhLnBvc2l0aW9uLnNldChjZW50ZXIueCwgY2VudGVyLnkgKyBtYXhEaW0sIGNlbnRlci56KTtcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgY2FzZSAnZnJvbnQnOlxuICAgICAgICAgICAgICAgICAgICBjYW1lcmEucG9zaXRpb24uc2V0KGNlbnRlci54LCBjZW50ZXIueSwgY2VudGVyLnogKyBtYXhEaW0pO1xuICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICBjYXNlICdzaWRlJzpcbiAgICAgICAgICAgICAgICAgICAgY2FtZXJhLnBvc2l0aW9uLnNldChjZW50ZXIueCArIG1heERpbSwgY2VudGVyLnksIGNlbnRlci56KTtcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBcbiAgICAgICAgICAgIG9yYml0Q29udHJvbHMudGFyZ2V0LmNvcHkoY2VudGVyKTtcbiAgICAgICAgICAgIG9yYml0Q29udHJvbHMudXBkYXRlKCk7XG4gICAgICAgIH1cbiAgICAgICAgXG4gICAgICAgIGZ1bmN0aW9uIHJlc2V0VmlldygpIHtcbiAgICAgICAgICAgIGlmICghbW9kZWwpIHJldHVybjtcbiAgICAgICAgICAgIFxuICAgICAgICAgICAgY29uc3QgYm94ID0gbmV3IFRIUkVFLkJveDMoKS5zZXRGcm9tT2JqZWN0KG1vZGVsKTtcbiAgICAgICAgICAgIGNvbnN0IGNlbnRlciA9IGJveC5nZXRDZW50ZXIobmV3IFRIUkVFLlZlY3RvcjMoKSk7XG4gICAgICAgICAgICBjb25zdCBzaXplID0gYm94LmdldFNpemUobmV3IFRIUkVFLlZlY3RvcjMoKSk7XG4gICAgICAgICAgICBjb25zdCBtYXhEaW0gPSBNYXRoLm1heChzaXplLngsIHNpemUueSwgc2l6ZS56KTtcbiAgICAgICAgICAgIFxuICAgICAgICAgICAgY2FtZXJhLnBvc2l0aW9uLnNldChjZW50ZXIueCwgY2VudGVyLnkgKyBhcGFydG1lbnRDb25maWcuY2FtZXJhLmhlaWdodCwgY2VudGVyLnogKyBtYXhEaW0gKiAxLjUpO1xuICAgICAgICAgICAgb3JiaXRDb250cm9scy50YXJnZXQuY29weShjZW50ZXIpO1xuICAgICAgICAgICAgb3JiaXRDb250cm9scy51cGRhdGUoKTtcbiAgICAgICAgfVxuICAgICAgICBcbiAgICAgICAgZnVuY3Rpb24gdG9nZ2xlV2lyZWZyYW1lKCkge1xuICAgICAgICAgICAgaWYgKCFtb2RlbCkgcmV0dXJuO1xuICAgICAgICAgICAgXG4gICAgICAgICAgICBpc1dpcmVmcmFtZSA9ICFpc1dpcmVmcmFtZTtcbiAgICAgICAgICAgIG1vZGVsLnRyYXZlcnNlKGZ1bmN0aW9uKGNoaWxkKSB7XG4gICAgICAgICAgICAgICAgaWYgKGNoaWxkLmlzTWVzaCkge1xuICAgICAgICAgICAgICAgICAgICBjaGlsZC5tYXRlcmlhbC53aXJlZnJhbWUgPSBpc1dpcmVmcmFtZTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfVxuICAgICAgICBcbiAgICAgICAgZnVuY3Rpb24gdGFrZVNjcmVlbnNob3QoKSB7XG4gICAgICAgICAgICBjb25zdCBsaW5rID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnYScpO1xuICAgICAgICAgICAgbGluay5kb3dubG9hZCA9IFxcYFxcJHthcGFydG1lbnRDb25maWcubmFtZX1fc2NyZWVuc2hvdC5wbmdcXGA7XG4gICAgICAgICAgICBsaW5rLmhyZWYgPSByZW5kZXJlci5kb21FbGVtZW50LnRvRGF0YVVSTCgpO1xuICAgICAgICAgICAgbGluay5jbGljaygpO1xuICAgICAgICB9XG4gICAgICAgIFxuICAgICAgICBmdW5jdGlvbiBjaGFuZ2VRdWFsaXR5KGV2ZW50KSB7XG4gICAgICAgICAgICBjb25zdCBxdWFsaXR5ID0gZXZlbnQudGFyZ2V0LnZhbHVlO1xuICAgICAgICAgICAgbGV0IHBpeGVsUmF0aW87XG4gICAgICAgICAgICBcbiAgICAgICAgICAgIHN3aXRjaChxdWFsaXR5KSB7XG4gICAgICAgICAgICAgICAgY2FzZSAnbG93JzpcbiAgICAgICAgICAgICAgICAgICAgcGl4ZWxSYXRpbyA9IDAuNTtcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgY2FzZSAnbWVkaXVtJzpcbiAgICAgICAgICAgICAgICAgICAgcGl4ZWxSYXRpbyA9IDE7XG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgIGNhc2UgJ2hpZ2gnOlxuICAgICAgICAgICAgICAgICAgICBwaXhlbFJhdGlvID0gTWF0aC5taW4od2luZG93LmRldmljZVBpeGVsUmF0aW8sIDIpO1xuICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIFxuICAgICAgICAgICAgcmVuZGVyZXIuc2V0UGl4ZWxSYXRpbyhwaXhlbFJhdGlvKTtcbiAgICAgICAgfVxuICAgICAgICBcbiAgICAgICAgZnVuY3Rpb24gb25LZXlEb3duKGV2ZW50KSB7XG4gICAgICAgICAgICBpZiAoZXZlbnQuY29kZSA9PT0gJ0VzY2FwZScgJiYgY3VycmVudENvbnRyb2xNb2RlID09PSAnZnBzJykge1xuICAgICAgICAgICAgICAgIGV4aXRGUFNNb2RlKCk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgXG4gICAgICAgIGZ1bmN0aW9uIG9uV2luZG93UmVzaXplKCkge1xuICAgICAgICAgICAgY2FtZXJhLmFzcGVjdCA9ICh3aW5kb3cuaW5uZXJXaWR0aCAtIDI4MCkgLyB3aW5kb3cuaW5uZXJIZWlnaHQ7XG4gICAgICAgICAgICBjYW1lcmEudXBkYXRlUHJvamVjdGlvbk1hdHJpeCgpO1xuICAgICAgICAgICAgcmVuZGVyZXIuc2V0U2l6ZSh3aW5kb3cuaW5uZXJXaWR0aCAtIDI4MCwgd2luZG93LmlubmVySGVpZ2h0KTtcbiAgICAgICAgfVxuICAgICAgICBcbiAgICAgICAgZnVuY3Rpb24gYW5pbWF0ZSgpIHtcbiAgICAgICAgICAgIGFuaW1hdGlvbklkID0gcmVxdWVzdEFuaW1hdGlvbkZyYW1lKGFuaW1hdGUpO1xuICAgICAgICAgICAgXG4gICAgICAgICAgICBpZiAob3JiaXRDb250cm9scy5lbmFibGVkKSB7XG4gICAgICAgICAgICAgICAgb3JiaXRDb250cm9scy51cGRhdGUoKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIFxuICAgICAgICAgICAgcmVuZGVyZXIucmVuZGVyKHNjZW5lLCBjYW1lcmEpO1xuICAgICAgICB9XG4gICAgICAgIFxuICAgICAgICAvLyDliJ3lp4vljJZcbiAgICAgICAgaW5pdCgpO1xuICAgIDwvc2NyaXB0PlxuPC9ib2R5PlxuPC9odG1sPlxuICAgICAgYFxuICAgICAgfVxuXG4gICAgICAvLyDliJvlu7ppZnJhbWXlubborr7nva7lhoXlrrlcbiAgICAgIGNvbnN0IGlmcmFtZSA9IGlmcmFtZVJlZi5jdXJyZW50XG4gICAgICBpZiAoaWZyYW1lKSB7XG4gICAgICAgIGNvbnN0IGRvYyA9IGlmcmFtZS5jb250ZW50RG9jdW1lbnQgfHwgaWZyYW1lLmNvbnRlbnRXaW5kb3c/LmRvY3VtZW50XG4gICAgICAgIGlmIChkb2MpIHtcbiAgICAgICAgICBkb2Mub3BlbigpXG4gICAgICAgICAgZG9jLndyaXRlKGNyZWF0ZTNEVmlld2VySFRNTCgpKVxuICAgICAgICAgIGRvYy5jbG9zZSgpXG4gICAgICAgICAgc2V0SXNMb2FkaW5nKGZhbHNlKVxuICAgICAgICB9XG4gICAgICB9XG4gICAgfSwgMTAwKSAvLyAxMDBtc+W7tui/n1xuXG4gICAgcmV0dXJuICgpID0+IHtcbiAgICAgIGNsZWFyVGltZW91dCh0aW1lcilcbiAgICB9XG4gIH0sIFthcGFydG1lbnQsIGlmcmFtZUtleV0pIC8vIOa3u+WKoGlmcmFtZUtleeS9nOS4uuS+nei1llxuXG4gIC8vIOe7hOS7tuWNuOi9veaXtumHjee9rmlmcmFtZSBrZXnmnaXlvLrliLbph43mlrDliJvlu7pcbiAgdXNlRWZmZWN0KCgpID0+IHtcbiAgICByZXR1cm4gKCkgPT4ge1xuICAgICAgc2V0SWZyYW1lS2V5KHByZXYgPT4gcHJldiArIDEpXG4gICAgfVxuICB9LCBbXSlcblxuICAvLyDnm5HlkKxpZnJhbWXmtojmga9cbiAgdXNlRWZmZWN0KCgpID0+IHtcbiAgICBjb25zdCBoYW5kbGVNZXNzYWdlID0gKGV2ZW50OiBNZXNzYWdlRXZlbnQpID0+IHtcbiAgICAgIGlmIChldmVudC5kYXRhID09PSAnY2xvc2UnICYmIG9uQ2xvc2UpIHtcbiAgICAgICAgb25DbG9zZSgpXG4gICAgICB9XG4gICAgfVxuXG4gICAgd2luZG93LmFkZEV2ZW50TGlzdGVuZXIoJ21lc3NhZ2UnLCBoYW5kbGVNZXNzYWdlKVxuICAgIHJldHVybiAoKSA9PiB3aW5kb3cucmVtb3ZlRXZlbnRMaXN0ZW5lcignbWVzc2FnZScsIGhhbmRsZU1lc3NhZ2UpXG4gIH0sIFtvbkNsb3NlXSlcblxuICBpZiAoZXJyb3IpIHtcbiAgICByZXR1cm4gKFxuICAgICAgPGRpdiBjbGFzc05hbWU9XCJmbGV4IGl0ZW1zLWNlbnRlciBqdXN0aWZ5LWNlbnRlciBoLWZ1bGxcIj5cbiAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJ0ZXh0LWNlbnRlciBwLThcIj5cbiAgICAgICAgICA8cCBjbGFzc05hbWU9XCJ0ZXh0LWdyYXktNTAwIG1iLTRcIj57ZXJyb3J9PC9wPlxuICAgICAgICAgIDxwIGNsYXNzTmFtZT1cInRleHQtc20gdGV4dC1ncmF5LTQwMFwiPuivpeWFrOWvk+aooeWei+ato+WcqOWHhuWkh+S4re+8jOaVrOivt+acn+W+hTwvcD5cbiAgICAgICAgPC9kaXY+XG4gICAgICA8L2Rpdj5cbiAgICApXG4gIH1cblxuICByZXR1cm4gKFxuICAgIDxkaXYgY2xhc3NOYW1lPVwidy1mdWxsIGgtZnVsbCByZWxhdGl2ZVwiPlxuICAgICAge2lzTG9hZGluZyAmJiAoXG4gICAgICAgIDxkaXYgY2xhc3NOYW1lPVwiYWJzb2x1dGUgaW5zZXQtMCBmbGV4IGl0ZW1zLWNlbnRlciBqdXN0aWZ5LWNlbnRlciBiZy13aGl0ZSB6LTEwXCI+XG4gICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJ0ZXh0LWNlbnRlclwiPlxuICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJhbmltYXRlLXNwaW4gcm91bmRlZC1mdWxsIGgtMTIgdy0xMiBib3JkZXItYi0yIGJvcmRlci1ibHVlLTUwMCBteC1hdXRvIG1iLTRcIj48L2Rpdj5cbiAgICAgICAgICAgIDxwIGNsYXNzTmFtZT1cInRleHQtZ3JheS01MDBcIj7mraPlnKjliJ3lp4vljJYzROafpeeci+WZqC4uLjwvcD5cbiAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgPC9kaXY+XG4gICAgICApfVxuICAgICAgPGlmcmFtZVxuICAgICAgICByZWY9e2lmcmFtZVJlZn1cbiAgICAgICAga2V5PXtpZnJhbWVLZXl9XG4gICAgICAgIGNsYXNzTmFtZT1cInctZnVsbCBoLWZ1bGwgYm9yZGVyLTBcIlxuICAgICAgICB0aXRsZT17YCR7YXBhcnRtZW50LnRpdGxlfSAzROafpeeci+WZqGB9XG4gICAgICAgIHNhbmRib3g9XCJhbGxvdy1zY3JpcHRzIGFsbG93LXNhbWUtb3JpZ2luIGFsbG93LWRvd25sb2FkcyBhbGxvdy1wb2ludGVyLWxvY2tcIlxuICAgICAgLz5cbiAgICA8L2Rpdj5cbiAgKVxufSAiXSwibmFtZXMiOlsidXNlRWZmZWN0IiwidXNlUmVmIiwidXNlU3RhdGUiLCJBcGFydG1lbnQzRFZpZXdlciIsImFwYXJ0bWVudCIsIm9uQ2xvc2UiLCJpZnJhbWVSZWYiLCJpc0xvYWRpbmciLCJzZXRJc0xvYWRpbmciLCJlcnJvciIsInNldEVycm9yIiwiaWZyYW1lS2V5Iiwic2V0SWZyYW1lS2V5IiwiaGFzTW9kZWwiLCJ0aW1lciIsInNldFRpbWVvdXQiLCJjcmVhdGUzRFZpZXdlckhUTUwiLCJ0aXRsZSIsImRlc2NyaXB0aW9uIiwiSlNPTiIsImNvbmZpZyIsImNhbWVyYSIsImhlaWdodCIsInN0cmluZ2lmeSIsIm1vZGVsUGF0aCIsImlmcmFtZSIsImN1cnJlbnQiLCJkb2MiLCJjb250ZW50RG9jdW1lbnQiLCJjb250ZW50V2luZG93IiwiZG9jdW1lbnQiLCJvcGVuIiwid3JpdGUiLCJjbG9zZSIsImNsZWFyVGltZW91dCIsInByZXYiLCJoYW5kbGVNZXNzYWdlIiwiZXZlbnQiLCJkYXRhIiwid2luZG93IiwiYWRkRXZlbnRMaXN0ZW5lciIsInJlbW92ZUV2ZW50TGlzdGVuZXIiLCJkaXYiLCJjbGFzc05hbWUiLCJwIiwicmVmIiwic2FuZGJveCJdLCJpZ25vcmVMaXN0IjpbXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(app-pages-browser)/./components/apartment-3d-viewer.tsx\n"));

/***/ })

});