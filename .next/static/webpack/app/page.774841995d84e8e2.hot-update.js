"use strict";
/*
 * ATTENTION: An "eval-source-map" devtool has been used.
 * This devtool is neither made for production nor for readable output files.
 * It uses "eval()" calls to create a separate source file with attached SourceMaps in the browser devtools.
 * If you are trying to read the output file, select a different devtool (https://webpack.js.org/configuration/devtool/)
 * or disable the default devtool with "devtool: false".
 * If you are looking for production-ready output files, see mode: "production" (https://webpack.js.org/configuration/mode/).
 */
self["webpackHotUpdate_N_E"]("app/page",{

/***/ "(app-pages-browser)/./components/apartment-3d-viewer.tsx":
/*!********************************************!*\
  !*** ./components/apartment-3d-viewer.tsx ***!
  \********************************************/
/***/ ((module, __webpack_exports__, __webpack_require__) => {

eval(__webpack_require__.ts("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   Apartment3DViewer: () => (/* binding */ Apartment3DViewer)\n/* harmony export */ });\n/* harmony import */ var react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! react/jsx-dev-runtime */ \"(app-pages-browser)/./node_modules/next/dist/compiled/react/jsx-dev-runtime.js\");\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! react */ \"(app-pages-browser)/./node_modules/next/dist/compiled/react/index.js\");\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_1__);\n/* __next_internal_client_entry_do_not_use__ Apartment3DViewer auto */ \nvar _s = $RefreshSig$();\n\nfunction Apartment3DViewer(param) {\n    let { apartment, onClose } = param;\n    _s();\n    const iframeRef = (0,react__WEBPACK_IMPORTED_MODULE_1__.useRef)(null);\n    const [isLoading, setIsLoading] = (0,react__WEBPACK_IMPORTED_MODULE_1__.useState)(true);\n    const [error, setError] = (0,react__WEBPACK_IMPORTED_MODULE_1__.useState)(null);\n    const [iframeKey, setIframeKey] = (0,react__WEBPACK_IMPORTED_MODULE_1__.useState)(0) // 添加key来强制重新创建iframe\n    ;\n    (0,react__WEBPACK_IMPORTED_MODULE_1__.useEffect)({\n        \"Apartment3DViewer.useEffect\": ()=>{\n            if (!apartment.hasModel) {\n                setError(\"该公寓暂无3D模型\");\n                setIsLoading(false);\n                return;\n            }\n            // 重置状态\n            setError(null);\n            setIsLoading(true);\n            // 延迟一点时间确保iframe完全重新创建\n            const timer = setTimeout({\n                \"Apartment3DViewer.useEffect.timer\": ()=>{\n                    // 创建3D查看器的HTML内容\n                    const create3DViewerHTML = {\n                        \"Apartment3DViewer.useEffect.timer.create3DViewerHTML\": ()=>{\n                            return '\\n<!DOCTYPE html>\\n<html lang=\"zh-CN\">\\n<head>\\n    <meta charset=\"UTF-8\">\\n    <meta name=\"viewport\" content=\"width=device-width, initial-scale=1.0\">\\n    <title>'.concat(apartment.title, ' - 3D查看器</title>\\n    <style>\\n        body {\\n            margin: 0;\\n            padding: 0;\\n            font-family: -apple-system, BlinkMacSystemFont, \\'Segoe UI\\', Roboto, sans-serif;\\n            background: #f5f5f5;\\n            overflow: hidden;\\n        }\\n        \\n        .viewer-container {\\n            display: flex;\\n            height: 100vh;\\n            width: 100vw;\\n        }\\n        \\n        .sidebar {\\n            width: 280px;\\n            background: white;\\n            border-right: 1px solid #e5e5e5;\\n            padding: 20px;\\n            overflow-y: auto;\\n            box-shadow: 2px 0 10px rgba(0,0,0,0.1);\\n        }\\n        \\n        .model-view {\\n            flex: 1;\\n            position: relative;\\n            background: #f0f0f0;\\n        }\\n        \\n        #modelContainer {\\n            width: 100%;\\n            height: 100%;\\n            position: relative;\\n        }\\n        \\n        .panel {\\n            background: #f8f9fa;\\n            border: 1px solid #e9ecef;\\n            border-radius: 8px;\\n            padding: 16px;\\n            margin-bottom: 16px;\\n        }\\n        \\n        .panel h3 {\\n            margin: 0 0 12px 0;\\n            font-size: 14px;\\n            font-weight: 600;\\n            color: #333;\\n            display: flex;\\n            align-items: center;\\n            gap: 8px;\\n        }\\n        \\n        .btn {\\n            background: #007bff;\\n            color: white;\\n            border: none;\\n            padding: 8px 16px;\\n            border-radius: 6px;\\n            cursor: pointer;\\n            font-size: 13px;\\n            margin: 4px;\\n            transition: background-color 0.2s;\\n        }\\n        \\n        .btn:hover {\\n            background: #0056b3;\\n        }\\n        \\n        .btn.secondary {\\n            background: #6c757d;\\n        }\\n        \\n        .btn.secondary:hover {\\n            background: #545b62;\\n        }\\n        \\n        .btn.full-width {\\n            width: 100%;\\n            margin: 4px 0;\\n        }\\n        \\n        .controls-group {\\n            display: flex;\\n            flex-wrap: wrap;\\n            gap: 4px;\\n            margin-top: 8px;\\n        }\\n        \\n        .controls-group .btn {\\n            flex: 1;\\n            min-width: 80px;\\n        }\\n        \\n        select {\\n            width: 100%;\\n            padding: 8px;\\n            border: 1px solid #ddd;\\n            border-radius: 4px;\\n            font-size: 13px;\\n            margin-top: 8px;\\n        }\\n        \\n        .view-info {\\n            position: absolute;\\n            top: 20px;\\n            right: 20px;\\n            background: rgba(0,0,0,0.7);\\n            color: white;\\n            padding: 8px 12px;\\n            border-radius: 6px;\\n            font-size: 12px;\\n            z-index: 100;\\n        }\\n        \\n        .esc-prompt {\\n            position: absolute;\\n            top: 20px;\\n            left: 20px;\\n            background: rgba(255,0,0,0.8);\\n            color: white;\\n            padding: 8px 12px;\\n            border-radius: 6px;\\n            font-size: 12px;\\n            z-index: 100;\\n        }\\n        \\n        .esc-prompt.hidden {\\n            display: none;\\n        }\\n        \\n        #loadingOverlay {\\n            position: absolute;\\n            top: 0;\\n            left: 0;\\n            width: 100%;\\n            height: 100%;\\n            background: rgba(255,255,255,0.9);\\n            display: flex;\\n            flex-direction: column;\\n            justify-content: center;\\n            align-items: center;\\n            z-index: 1000;\\n        }\\n        \\n        .spinner {\\n            width: 40px;\\n            height: 40px;\\n            border: 4px solid #f3f3f3;\\n            border-top: 4px solid #007bff;\\n            border-radius: 50%;\\n            animation: spin 1s linear infinite;\\n        }\\n        \\n        @keyframes spin {\\n            0% { transform: rotate(0deg); }\\n            100% { transform: rotate(360deg); }\\n        }\\n        \\n        .loading-text {\\n            margin-top: 16px;\\n            font-size: 14px;\\n            color: #666;\\n        }\\n        \\n        .center-screen {\\n            position: absolute;\\n            top: 50%;\\n            left: 50%;\\n            transform: translate(-50%, -50%);\\n            z-index: 200;\\n        }\\n        \\n        .center-screen.hidden {\\n            display: none;\\n        }\\n        \\n        .prompt-content {\\n            background: white;\\n            padding: 20px;\\n            border-radius: 8px;\\n            box-shadow: 0 4px 20px rgba(0,0,0,0.3);\\n        }\\n        \\n        .close-btn {\\n            position: absolute;\\n            top: 10px;\\n            right: 10px;\\n            background: rgba(0,0,0,0.5);\\n            color: white;\\n            border: none;\\n            width: 30px;\\n            height: 30px;\\n            border-radius: 50%;\\n            cursor: pointer;\\n            font-size: 16px;\\n            z-index: 1001;\\n        }\\n        \\n        .close-btn:hover {\\n            background: rgba(0,0,0,0.7);\\n        }\\n    </style>\\n</head>\\n<body>\\n    <div class=\"viewer-container\">\\n        <div class=\"sidebar\">\\n            <div class=\"panel\">\\n                <h3>\\uD83C\\uDFE0 公寓信息</h3>\\n                <h4 style=\"margin: 0; color: #333;\">').concat(apartment.title, '</h4>\\n                <p style=\"font-size: 12px; color: #666; margin: 8px 0 0 0;\">').concat(apartment.description, '</p>\\n            </div>\\n\\n            <div class=\"panel\">\\n                <h3>\\uD83C\\uDFAE 视角控制</h3>\\n                <div class=\"controls-group\">\\n                    <button id=\"toggleControlModeBtn\" class=\"btn full-width\">\\n                        <span id=\"controlModeText\">切换到FPS模式</span>\\n                    </button>\\n                </div>\\n                <div class=\"controls-group\">\\n                    <button id=\"viewTopBtn\" class=\"btn secondary\">顶视图</button>\\n                    <button id=\"viewFrontBtn\" class=\"btn secondary\">正视图</button>\\n                    <button id=\"viewSideBtn\" class=\"btn secondary\">侧视图</button>\\n                </div>\\n                <div class=\"controls-group\">\\n                    <button id=\"resetViewBtn\" class=\"btn full-width\">重置视图</button>\\n                </div>\\n                <div class=\"controls-group\">\\n                    <button id=\"toggleWireframeBtn\" class=\"btn secondary full-width\">切换线框模式</button>\\n                </div>\\n            </div>\\n\\n            <div class=\"panel\">\\n                <h3>⚙️ 质量控制</h3>\\n                <label for=\"qualitySelector\">渲染质量:</label>\\n                <select id=\"qualitySelector\">\\n                    <option value=\"low\">低 (更流畅)</option>\\n                    <option value=\"medium\" selected>中 (平衡)</option>\\n                    <option value=\"high\">高 (更清晰)</option>\\n                </select>\\n            </div>\\n\\n            <div class=\"panel\">\\n                <h3>\\uD83D\\uDCF7 截图</h3>\\n                <button id=\"screenshotBtn\" class=\"btn full-width\">保存截图</button>\\n            </div>\\n        </div>\\n\\n        <div class=\"model-view\">\\n            <button class=\"close-btn\" onclick=\"window.parent.postMessage(\\'close\\', \\'*\\')\" title=\"关闭\">\\xd7</button>\\n            <div id=\"modelContainer\">\\n                <div class=\"view-info\">\\n                    <div id=\"rotationInfo\">视角: 0\\xb0</div>\\n                    <div id=\"zoomInfo\">高度: ').concat(apartment.config.camera.height, 'm</div>\\n                </div>\\n                <div id=\"escExitPrompt\" class=\"esc-prompt hidden\">\\n                    按ESC退出FPS模式\\n                </div>\\n                <div id=\"loadingOverlay\">\\n                    <div class=\"spinner\"></div>\\n                    <div class=\"loading-text\">正在加载模型...</div>\\n                </div>\\n                <div id=\"pointerLockPrompt\" class=\"center-screen hidden\">\\n                    <div class=\"prompt-content\">\\n                        <button id=\"enterFPSBtn\" class=\"btn full-width\" style=\"font-size:1.1rem;padding:1em 2em;\">点击以启用FPS控制</button>\\n                    </div>\\n                </div>\\n            </div>\\n        </div>\\n    </div>\\n\\n    <!-- Three.js 库 -->\\n    <script src=\"https://cdnjs.cloudflare.com/ajax/libs/three.js/r128/three.min.js\"></script>\\n    <script src=\"https://cdn.jsdelivr.net/npm/three@0.128.0/examples/js/controls/OrbitControls.min.js\"></script>\\n    <script src=\"https://cdn.jsdelivr.net/npm/three@0.128.0/examples/js/controls/PointerLockControls.min.js\"></script>\\n    <script src=\"https://cdn.jsdelivr.net/npm/three@0.128.0/examples/js/loaders/OBJLoader.min.js\"></script>\\n    <script src=\"https://cdn.jsdelivr.net/npm/three@0.128.0/examples/js/loaders/MTLLoader.min.js\"></script>\\n    \\n    <script>\\n        // 强制重置所有全局变量\\n        if (window.scene) {\\n            window.scene.clear();\\n        }\\n        if (window.renderer) {\\n            window.renderer.dispose();\\n        }\\n        \\n        // 3D查看器初始化脚本\\n        let scene, camera, renderer, controls, model;\\n        let orbitControls, pointerLockControls;\\n        let isWireframe = false;\\n        let currentControlMode = \\'orbit\\'; // \\'orbit\\' or \\'fps\\'\\n        let animationId = null; // 用于清理动画循环\\n        let keyboardControls = null; // 键盘控制器\\n        \\n        // 公寓配置\\n        const apartmentConfig = ').concat(JSON.stringify(apartment.config), ';\\n        const modelPath = \"').concat(apartment.modelPath, \"\\\";\\n        \\n        // 键盘控制类 - 完整的WASD移动逻辑\\n        class KeyboardControls {\\n            constructor(camera, scene, domElement) {\\n                this.camera = camera;\\n                this.scene = scene;\\n                this.domElement = domElement;\\n                \\n                // 控制状态\\n                this.enabled = false;\\n                this.isMoving = false;\\n                \\n                // 移动参数\\n                this.movementSpeed = 0.05;\\n                this.fixedHeight = this.camera.position.y;\\n                \\n                // 按键状态\\n                this.keys = {\\n                    87: false, // W\\n                    83: false, // S\\n                    65: false, // A\\n                    68: false, // D\\n                    38: false, // 上箭头\\n                    40: false, // 下箭头\\n                    37: false, // 左箭头\\n                    39: false  // 右箭头\\n                };\\n                \\n                // 绑定事件处理函数\\n                this._onKeyDown = this._onKeyDown.bind(this);\\n                this._onKeyUp = this._onKeyUp.bind(this);\\n            }\\n            \\n            enable() {\\n                if (this.enabled) return;\\n                \\n                this.enabled = true;\\n                document.addEventListener('keydown', this._onKeyDown, false);\\n                document.addEventListener('keyup', this._onKeyUp, false);\\n                console.log('键盘控制已启用');\\n            }\\n            \\n            disable() {\\n                if (!this.enabled) return;\\n                \\n                this.enabled = false;\\n                document.removeEventListener('keydown', this._onKeyDown, false);\\n                document.removeEventListener('keyup', this._onKeyUp, false);\\n                \\n                // 重置按键状态\\n                for (let key in this.keys) {\\n                    this.keys[key] = false;\\n                }\\n                this.isMoving = false;\\n                console.log('键盘控制已禁用');\\n            }\\n            \\n            _onKeyDown(event) {\\n                if (!this.enabled) return;\\n                \\n                const keyCode = event.keyCode;\\n                \\n                // 检查移动键\\n                if (event.key === 'w' || event.key === 'W' || keyCode === 87 || keyCode === 38) {\\n                    this.keys[87] = true;\\n                } else if (event.key === 's' || event.key === 'S' || keyCode === 83 || keyCode === 40) {\\n                    this.keys[83] = true;\\n                } else if (event.key === 'a' || event.key === 'A' || keyCode === 65 || keyCode === 37) {\\n                    this.keys[65] = true;\\n                } else if (event.key === 'd' || event.key === 'D' || keyCode === 68 || keyCode === 39) {\\n                    this.keys[68] = true;\\n                }\\n                \\n                // 阻止默认行为\\n                if ([32, 37, 38, 39, 40, 87, 83, 65, 68].includes(keyCode)) {\\n                    event.preventDefault();\\n                }\\n            }\\n            \\n            _onKeyUp(event) {\\n                if (!this.enabled) return;\\n                \\n                const keyCode = event.keyCode;\\n                \\n                // 检查移动键\\n                if (event.key === 'w' || event.key === 'W' || keyCode === 87 || keyCode === 38) {\\n                    this.keys[87] = false;\\n                } else if (event.key === 's' || event.key === 'S' || keyCode === 83 || keyCode === 40) {\\n                    this.keys[83] = false;\\n                } else if (event.key === 'a' || event.key === 'A' || keyCode === 65 || keyCode === 37) {\\n                    this.keys[65] = false;\\n                } else if (event.key === 'd' || event.key === 'D' || keyCode === 68 || keyCode === 39) {\\n                    this.keys[68] = false;\\n                }\\n            }\\n            \\n            update() {\\n                if (!this.enabled) return;\\n                \\n                try {\\n                    // 检查按键状态\\n                    const movingForward = this.keys[87]; // W\\n                    const movingBackward = this.keys[83]; // S\\n                    const movingLeft = this.keys[65]; // A\\n                    const movingRight = this.keys[68]; // D\\n                    \\n                    // 如果没有按键按下，直接返回\\n                    if (!(movingForward || movingBackward || movingLeft || movingRight)) {\\n                        if (this.isMoving) {\\n                            this.isMoving = false;\\n                        }\\n                        return;\\n                    }\\n                    \\n                    // 获取相机的朝向\\n                    const direction = new THREE.Vector3();\\n                    this.camera.getWorldDirection(direction);\\n                    direction.normalize();\\n                    \\n                    // 获取右向量\\n                    const right = new THREE.Vector3();\\n                    right.crossVectors(direction, new THREE.Vector3(0, 1, 0)).normalize();\\n                    \\n                    // 计算移动向量\\n                    const moveVector = new THREE.Vector3(0, 0, 0);\\n                    \\n                    if (movingForward) {\\n                        moveVector.add(direction);\\n                    }\\n                    if (movingBackward) {\\n                        moveVector.sub(direction);\\n                    }\\n                    if (movingRight) {\\n                        moveVector.add(right);\\n                    }\\n                    if (movingLeft) {\\n                        moveVector.sub(right);\\n                    }\\n                    \\n                    // 归一化移动向量\\n                    moveVector.normalize();\\n                    moveVector.multiplyScalar(this.movementSpeed);\\n                    \\n                    // 只在xz平面移动\\n                    moveVector.y = 0;\\n                    \\n                    // 更新相机位置\\n                    this.camera.position.add(moveVector);\\n                    this.camera.position.y = this.fixedHeight;\\n                    \\n                    if (!this.isMoving) {\\n                        this.isMoving = true;\\n                    }\\n                } catch (error) {\\n                    console.error('键盘控制更新时出错:', error);\\n                }\\n            }\\n            \\n            setFixedHeight(height) {\\n                this.fixedHeight = height;\\n            }\\n            \\n            setMovementSpeed(speed) {\\n                this.movementSpeed = speed;\\n            }\\n        }\\n        \\n        // 清理之前的资源\\n        function cleanup() {\\n            if (animationId) {\\n                cancelAnimationFrame(animationId);\\n                animationId = null;\\n            }\\n            \\n            if (keyboardControls) {\\n                keyboardControls.disable();\\n                keyboardControls = null;\\n            }\\n            \\n            if (renderer) {\\n                renderer.dispose();\\n                renderer.forceContextLoss();\\n                if (renderer.domElement && renderer.domElement.parentNode) {\\n                    renderer.domElement.parentNode.removeChild(renderer.domElement);\\n                }\\n            }\\n            \\n            if (scene) {\\n                scene.clear();\\n            }\\n            \\n            // 清理事件监听器\\n            window.removeEventListener('resize', onWindowResize);\\n            document.removeEventListener('keydown', onKeyDown);\\n        }\\n        \\n        // 初始化3D场景\\n        function init() {\\n            try {\\n                // 先清理之前的资源\\n                cleanup();\\n                \\n                // 创建场景\\n                scene = new THREE.Scene();\\n                scene.background = new THREE.Color(0xf0f0f0);\\n                \\n                // 创建相机\\n                camera = new THREE.PerspectiveCamera(75, window.innerWidth / window.innerHeight, 0.1, 1000);\\n                camera.position.set(apartmentConfig.camera.init_point[0], apartmentConfig.camera.height, apartmentConfig.camera.init_point[1]);\\n                \\n                // 创建渲染器\\n                renderer = new THREE.WebGLRenderer({ antialias: true });\\n                renderer.setSize(window.innerWidth - 280, window.innerHeight);\\n                renderer.shadowMap.enabled = true;\\n                renderer.shadowMap.type = THREE.PCFSoftShadowMap;\\n                \\n                const container = document.getElementById('modelContainer');\\n                const canvas = container.querySelector('canvas');\\n                if (canvas) {\\n                    container.removeChild(canvas);\\n                }\\n                container.appendChild(renderer.domElement);\\n                \\n                // 创建控制器\\n                setupControls();\\n                \\n                // 添加光源\\n                setupLighting();\\n                \\n                // 加载模型\\n                loadModel();\\n                \\n                // 设置事件监听\\n                setupEventListeners();\\n                \\n                // 开始渲染循环\\n                animate();\\n                \\n            } catch (error) {\\n                console.error('初始化3D场景失败:', error);\\n                const loadingOverlay = document.getElementById('loadingOverlay');\\n                if (loadingOverlay) {\\n                    loadingOverlay.innerHTML = '<div style=\\\"color: red;\\\">3D场景初始化失败</div>';\\n                }\\n            }\\n        }\\n        \\n        function setupControls() {\\n            // 轨道控制器\\n            orbitControls = new THREE.OrbitControls(camera, renderer.domElement);\\n            orbitControls.enableDamping = true;\\n            orbitControls.dampingFactor = 0.05;\\n            orbitControls.target.set(0, 0, 0);\\n            \\n            // FPS控制器\\n            pointerLockControls = new THREE.PointerLockControls(camera, renderer.domElement);\\n            scene.add(pointerLockControls.getObject());\\n            \\n            // 键盘控制器\\n            keyboardControls = new KeyboardControls(camera, scene, renderer.domElement);\\n            keyboardControls.setFixedHeight(apartmentConfig.camera.height);\\n            \\n            // 默认使用轨道控制器\\n            orbitControls.enabled = true;\\n            pointerLockControls.enabled = false;\\n            keyboardControls.disable();\\n        }\\n        \\n        function setupLighting() {\\n            // 环境光\\n            const ambientLight = new THREE.AmbientLight(0x404040, 0.6);\\n            scene.add(ambientLight);\\n            \\n            // 方向光\\n            const directionalLight = new THREE.DirectionalLight(0xffffff, 0.8);\\n            directionalLight.position.set(10, 10, 5);\\n            directionalLight.castShadow = true;\\n            scene.add(directionalLight);\\n            \\n            // 点光源\\n            const pointLight = new THREE.PointLight(0xffffff, 0.5);\\n            pointLight.position.set(0, 5, 0);\\n            scene.add(pointLight);\\n        }\\n        \\n        function loadModel() {\\n            const loadingOverlay = document.getElementById('loadingOverlay');\\n            \\n            // MTL加载器\\n            const mtlLoader = new THREE.MTLLoader();\\n            mtlLoader.setPath(modelPath + '/');\\n            \\n            mtlLoader.load('textured_output.mtl', function(materials) {\\n                materials.preload();\\n                \\n                // OBJ加载器\\n                const objLoader = new THREE.OBJLoader();\\n                objLoader.setMaterials(materials);\\n                objLoader.setPath(modelPath + '/');\\n                \\n                objLoader.load('textured_output.obj', \\n                    function(object) {\\n                        // 模型加载成功\\n                        model = object;\\n                        scene.add(model);\\n                        \\n                        // 计算模型边界盒\\n                        const box = new THREE.Box3().setFromObject(model);\\n                        const center = box.getCenter(new THREE.Vector3());\\n                        const size = box.getSize(new THREE.Vector3());\\n                        \\n                        // 调整相机位置\\n                        const maxDim = Math.max(size.x, size.y, size.z);\\n                        const fov = camera.fov * (Math.PI / 180);\\n                        let cameraZ = Math.abs(maxDim / 2 / Math.tan(fov / 2));\\n                        cameraZ *= 1.5; // 增加一些距离\\n                        \\n                        camera.position.set(center.x, center.y + apartmentConfig.camera.height, center.z + cameraZ);\\n                        orbitControls.target.copy(center);\\n                        \\n                        // 隐藏加载界面\\n                        loadingOverlay.style.display = 'none';\\n                    },\\n                    function(progress) {\\n                        // 加载进度\\n                        console.log('Loading progress:', progress);\\n                    },\\n                    function(error) {\\n                        // 加载错误\\n                        console.error('Error loading model:', error);\\n                        loadingOverlay.innerHTML = '<div style=\\\"color: red;\\\">模型加载失败</div>';\\n                    }\\n                );\\n            }, undefined, function(error) {\\n                console.error('Error loading materials:', error);\\n                loadingOverlay.innerHTML = '<div style=\\\"color: red;\\\">材质加载失败</div>';\\n            });\\n        }\\n        \\n        function setupEventListeners() {\\n            // 控制模式切换\\n            document.getElementById('toggleControlModeBtn').addEventListener('click', toggleControlMode);\\n            \\n            // 视角按钮\\n            document.getElementById('viewTopBtn').addEventListener('click', () => setView('top'));\\n            document.getElementById('viewFrontBtn').addEventListener('click', () => setView('front'));\\n            document.getElementById('viewSideBtn').addEventListener('click', () => setView('side'));\\n            document.getElementById('resetViewBtn').addEventListener('click', resetView);\\n            \\n            // 线框模式\\n            document.getElementById('toggleWireframeBtn').addEventListener('click', toggleWireframe);\\n            \\n            // 截图\\n            document.getElementById('screenshotBtn').addEventListener('click', takeScreenshot);\\n            \\n            // 质量控制\\n            document.getElementById('qualitySelector').addEventListener('change', changeQuality);\\n            \\n            // FPS模式相关\\n            document.getElementById('enterFPSBtn').addEventListener('click', enterFPSMode);\\n            \\n            // 键盘事件\\n            document.addEventListener('keydown', onKeyDown);\\n            \\n            // 窗口大小调整\\n            window.addEventListener('resize', onWindowResize);\\n        }\\n        \\n        function toggleControlMode() {\\n            if (currentControlMode === 'orbit') {\\n                // 切换到FPS模式\\n                currentControlMode = 'fps';\\n                orbitControls.enabled = false;\\n                document.getElementById('pointerLockPrompt').classList.remove('hidden');\\n                document.getElementById('controlModeText').textContent = '切换到鼠标模式';\\n            } else {\\n                // 切换到轨道模式\\n                exitFPSMode();\\n            }\\n        }\\n        \\n        function enterFPSMode() {\\n            // 进入指针锁定状态\\n            pointerLockControls.lock();\\n            pointerLockControls.enabled = true;\\n            keyboardControls.enable(); // 启用键盘控制\\n            document.getElementById('pointerLockPrompt').classList.add('hidden');\\n            document.getElementById('escExitPrompt').classList.remove('hidden');\\n        }\\n        \\n        function exitPointerLock() {\\n            // 退出指针锁定状态，但仍在FPS模式\\n            pointerLockControls.unlock();\\n            pointerLockControls.enabled = false;\\n            keyboardControls.disable(); // 禁用键盘控制\\n            document.getElementById('escExitPrompt').classList.add('hidden');\\n            document.getElementById('pointerLockPrompt').classList.remove('hidden');\\n        }\\n        \\n        function exitFPSMode() {\\n            // 完全退出FPS模式，回到轨道模式\\n            pointerLockControls.unlock();\\n            currentControlMode = 'orbit';\\n            orbitControls.enabled = true;\\n            pointerLockControls.enabled = false;\\n            keyboardControls.disable(); // 禁用键盘控制\\n            document.getElementById('escExitPrompt').classList.add('hidden');\\n            document.getElementById('pointerLockPrompt').classList.add('hidden');\\n            document.getElementById('controlModeText').textContent = '切换到FPS模式';\\n        }\\n        \\n        function setView(viewType) {\\n            if (!model) return;\\n            \\n            const box = new THREE.Box3().setFromObject(model);\\n            const center = box.getCenter(new THREE.Vector3());\\n            const size = box.getSize(new THREE.Vector3());\\n            const maxDim = Math.max(size.x, size.y, size.z);\\n            \\n            switch(viewType) {\\n                case 'top':\\n                    camera.position.set(center.x, center.y + maxDim, center.z);\\n                    break;\\n                case 'front':\\n                    camera.position.set(center.x, center.y, center.z + maxDim);\\n                    break;\\n                case 'side':\\n                    camera.position.set(center.x + maxDim, center.y, center.z);\\n                    break;\\n            }\\n            \\n            orbitControls.target.copy(center);\\n            orbitControls.update();\\n        }\\n        \\n        function resetView() {\\n            if (!model) return;\\n            \\n            const box = new THREE.Box3().setFromObject(model);\\n            const center = box.getCenter(new THREE.Vector3());\\n            const size = box.getSize(new THREE.Vector3());\\n            const maxDim = Math.max(size.x, size.y, size.z);\\n            \\n            camera.position.set(center.x, center.y + apartmentConfig.camera.height, center.z + maxDim * 1.5);\\n            orbitControls.target.copy(center);\\n            orbitControls.update();\\n        }\\n        \\n        function toggleWireframe() {\\n            if (!model) return;\\n            \\n            isWireframe = !isWireframe;\\n            model.traverse(function(child) {\\n                if (child.isMesh) {\\n                    child.material.wireframe = isWireframe;\\n                }\\n            });\\n        }\\n        \\n        function takeScreenshot() {\\n            const link = document.createElement('a');\\n            link.download = `${apartmentConfig.name}_screenshot.png`;\\n            link.href = renderer.domElement.toDataURL();\\n            link.click();\\n        }\\n        \\n        function changeQuality(event) {\\n            const quality = event.target.value;\\n            let pixelRatio;\\n            \\n            switch(quality) {\\n                case 'low':\\n                    pixelRatio = 0.5;\\n                    break;\\n                case 'medium':\\n                    pixelRatio = 1;\\n                    break;\\n                case 'high':\\n                    pixelRatio = Math.min(window.devicePixelRatio, 2);\\n                    break;\\n            }\\n            \\n            renderer.setPixelRatio(pixelRatio);\\n        }\\n        \\n        function onKeyDown(event) {\\n            // 只处理ESC键，其他键让键盘控制器处理\\n            if (event.code === 'Escape' && currentControlMode === 'fps') {\\n                exitFPSMode();\\n                event.preventDefault();\\n                event.stopPropagation();\\n            }\\n        }\\n        \\n        function onWindowResize() {\\n            camera.aspect = (window.innerWidth - 280) / window.innerHeight;\\n            camera.updateProjectionMatrix();\\n            renderer.setSize(window.innerWidth - 280, window.innerHeight);\\n        }\\n        \\n        function animate() {\\n            animationId = requestAnimationFrame(animate);\\n            \\n            if (orbitControls.enabled) {\\n                orbitControls.update();\\n            }\\n            \\n            // 更新键盘控制\\n            if (keyboardControls && currentControlMode === 'fps') {\\n                keyboardControls.update();\\n            }\\n            \\n            renderer.render(scene, camera);\\n        }\\n        \\n        // 初始化\\n        init();\\n    </script>\\n</body>\\n</html>\\n      \");\n                        }\n                    }[\"Apartment3DViewer.useEffect.timer.create3DViewerHTML\"];\n                    // 创建iframe并设置内容\n                    const iframe = iframeRef.current;\n                    if (iframe) {\n                        var _iframe_contentWindow;\n                        const doc = iframe.contentDocument || ((_iframe_contentWindow = iframe.contentWindow) === null || _iframe_contentWindow === void 0 ? void 0 : _iframe_contentWindow.document);\n                        if (doc) {\n                            doc.open();\n                            doc.write(create3DViewerHTML());\n                            doc.close();\n                            setIsLoading(false);\n                        }\n                    }\n                }\n            }[\"Apartment3DViewer.useEffect.timer\"], 100) // 100ms延迟\n            ;\n            return ({\n                \"Apartment3DViewer.useEffect\": ()=>{\n                    clearTimeout(timer);\n                }\n            })[\"Apartment3DViewer.useEffect\"];\n        }\n    }[\"Apartment3DViewer.useEffect\"], [\n        apartment,\n        iframeKey\n    ]) // 添加iframeKey作为依赖\n    ;\n    // 组件卸载时重置iframe key来强制重新创建\n    (0,react__WEBPACK_IMPORTED_MODULE_1__.useEffect)({\n        \"Apartment3DViewer.useEffect\": ()=>{\n            return ({\n                \"Apartment3DViewer.useEffect\": ()=>{\n                    setIframeKey({\n                        \"Apartment3DViewer.useEffect\": (prev)=>prev + 1\n                    }[\"Apartment3DViewer.useEffect\"]);\n                }\n            })[\"Apartment3DViewer.useEffect\"];\n        }\n    }[\"Apartment3DViewer.useEffect\"], []);\n    // 监听iframe消息\n    (0,react__WEBPACK_IMPORTED_MODULE_1__.useEffect)({\n        \"Apartment3DViewer.useEffect\": ()=>{\n            const handleMessage = {\n                \"Apartment3DViewer.useEffect.handleMessage\": (event)=>{\n                    if (event.data === 'close' && onClose) {\n                        onClose();\n                    }\n                }\n            }[\"Apartment3DViewer.useEffect.handleMessage\"];\n            window.addEventListener('message', handleMessage);\n            return ({\n                \"Apartment3DViewer.useEffect\": ()=>window.removeEventListener('message', handleMessage)\n            })[\"Apartment3DViewer.useEffect\"];\n        }\n    }[\"Apartment3DViewer.useEffect\"], [\n        onClose\n    ]);\n    if (error) {\n        return /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n            className: \"flex items-center justify-center h-full\",\n            children: /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                className: \"text-center p-8\",\n                children: [\n                    /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"p\", {\n                        className: \"text-gray-500 mb-4\",\n                        children: error\n                    }, void 0, false, {\n                        fileName: \"/Users/jason/Project/My_Apartment_Web/components/apartment-3d-viewer.tsx\",\n                        lineNumber: 903,\n                        columnNumber: 11\n                    }, this),\n                    /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"p\", {\n                        className: \"text-sm text-gray-400\",\n                        children: \"该公寓模型正在准备中，敬请期待\"\n                    }, void 0, false, {\n                        fileName: \"/Users/jason/Project/My_Apartment_Web/components/apartment-3d-viewer.tsx\",\n                        lineNumber: 904,\n                        columnNumber: 11\n                    }, this)\n                ]\n            }, void 0, true, {\n                fileName: \"/Users/jason/Project/My_Apartment_Web/components/apartment-3d-viewer.tsx\",\n                lineNumber: 902,\n                columnNumber: 9\n            }, this)\n        }, void 0, false, {\n            fileName: \"/Users/jason/Project/My_Apartment_Web/components/apartment-3d-viewer.tsx\",\n            lineNumber: 901,\n            columnNumber: 7\n        }, this);\n    }\n    return /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n        className: \"w-full h-full relative\",\n        children: [\n            isLoading && /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                className: \"absolute inset-0 flex items-center justify-center bg-white z-10\",\n                children: /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                    className: \"text-center\",\n                    children: [\n                        /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                            className: \"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-500 mx-auto mb-4\"\n                        }, void 0, false, {\n                            fileName: \"/Users/jason/Project/My_Apartment_Web/components/apartment-3d-viewer.tsx\",\n                            lineNumber: 915,\n                            columnNumber: 13\n                        }, this),\n                        /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"p\", {\n                            className: \"text-gray-500\",\n                            children: \"正在初始化3D查看器...\"\n                        }, void 0, false, {\n                            fileName: \"/Users/jason/Project/My_Apartment_Web/components/apartment-3d-viewer.tsx\",\n                            lineNumber: 916,\n                            columnNumber: 13\n                        }, this)\n                    ]\n                }, void 0, true, {\n                    fileName: \"/Users/jason/Project/My_Apartment_Web/components/apartment-3d-viewer.tsx\",\n                    lineNumber: 914,\n                    columnNumber: 11\n                }, this)\n            }, void 0, false, {\n                fileName: \"/Users/jason/Project/My_Apartment_Web/components/apartment-3d-viewer.tsx\",\n                lineNumber: 913,\n                columnNumber: 9\n            }, this),\n            /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"iframe\", {\n                ref: iframeRef,\n                className: \"w-full h-full border-0\",\n                title: \"\".concat(apartment.title, \" 3D查看器\"),\n                sandbox: \"allow-scripts allow-same-origin allow-downloads allow-pointer-lock\"\n            }, iframeKey, false, {\n                fileName: \"/Users/jason/Project/My_Apartment_Web/components/apartment-3d-viewer.tsx\",\n                lineNumber: 920,\n                columnNumber: 7\n            }, this)\n        ]\n    }, void 0, true, {\n        fileName: \"/Users/jason/Project/My_Apartment_Web/components/apartment-3d-viewer.tsx\",\n        lineNumber: 911,\n        columnNumber: 5\n    }, this);\n}\n_s(Apartment3DViewer, \"v9vXjC02A8v/NliTWBIniYKROxk=\");\n_c = Apartment3DViewer;\nvar _c;\n$RefreshReg$(_c, \"Apartment3DViewer\");\n\n\n;\n    // Wrapped in an IIFE to avoid polluting the global scope\n    ;\n    (function () {\n        var _a, _b;\n        // Legacy CSS implementations will `eval` browser code in a Node.js context\n        // to extract CSS. For backwards compatibility, we need to check we're in a\n        // browser context before continuing.\n        if (typeof self !== 'undefined' &&\n            // AMP / No-JS mode does not inject these helpers:\n            '$RefreshHelpers$' in self) {\n            // @ts-ignore __webpack_module__ is global\n            var currentExports = module.exports;\n            // @ts-ignore __webpack_module__ is global\n            var prevSignature = (_b = (_a = module.hot.data) === null || _a === void 0 ? void 0 : _a.prevSignature) !== null && _b !== void 0 ? _b : null;\n            // This cannot happen in MainTemplate because the exports mismatch between\n            // templating and execution.\n            self.$RefreshHelpers$.registerExportsForReactRefresh(currentExports, module.id);\n            // A module can be accepted automatically based on its exports, e.g. when\n            // it is a Refresh Boundary.\n            if (self.$RefreshHelpers$.isReactRefreshBoundary(currentExports)) {\n                // Save the previous exports signature on update so we can compare the boundary\n                // signatures. We avoid saving exports themselves since it causes memory leaks (https://github.com/vercel/next.js/pull/53797)\n                module.hot.dispose(function (data) {\n                    data.prevSignature =\n                        self.$RefreshHelpers$.getRefreshBoundarySignature(currentExports);\n                });\n                // Unconditionally accept an update to this module, we'll check if it's\n                // still a Refresh Boundary later.\n                // @ts-ignore importMeta is replaced in the loader\n                module.hot.accept();\n                // This field is set when the previous version of this module was a\n                // Refresh Boundary, letting us know we need to check for invalidation or\n                // enqueue an update.\n                if (prevSignature !== null) {\n                    // A boundary can become ineligible if its exports are incompatible\n                    // with the previous exports.\n                    //\n                    // For example, if you add/remove/change exports, we'll want to\n                    // re-execute the importing modules, and force those components to\n                    // re-render. Similarly, if you convert a class component to a\n                    // function, we want to invalidate the boundary.\n                    if (self.$RefreshHelpers$.shouldInvalidateReactRefreshBoundary(prevSignature, self.$RefreshHelpers$.getRefreshBoundarySignature(currentExports))) {\n                        module.hot.invalidate();\n                    }\n                    else {\n                        self.$RefreshHelpers$.scheduleUpdate();\n                    }\n                }\n            }\n            else {\n                // Since we just executed the code for the module, it's possible that the\n                // new exports made it ineligible for being a boundary.\n                // We only care about the case when we were _previously_ a boundary,\n                // because we already accepted this update (accidental side effect).\n                var isNoLongerABoundary = prevSignature !== null;\n                if (isNoLongerABoundary) {\n                    module.hot.invalidate();\n                }\n            }\n        }\n    })();\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKGFwcC1wYWdlcy1icm93c2VyKS8uL2NvbXBvbmVudHMvYXBhcnRtZW50LTNkLXZpZXdlci50c3giLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7O0FBRW1EO0FBUTVDLFNBQVNHLGtCQUFrQixLQUE4QztRQUE5QyxFQUFFQyxTQUFTLEVBQUVDLE9BQU8sRUFBMEIsR0FBOUM7O0lBQ2hDLE1BQU1DLFlBQVlMLDZDQUFNQSxDQUFvQjtJQUM1QyxNQUFNLENBQUNNLFdBQVdDLGFBQWEsR0FBR04sK0NBQVFBLENBQUM7SUFDM0MsTUFBTSxDQUFDTyxPQUFPQyxTQUFTLEdBQUdSLCtDQUFRQSxDQUFnQjtJQUNsRCxNQUFNLENBQUNTLFdBQVdDLGFBQWEsR0FBR1YsK0NBQVFBLENBQUMsR0FBRyxxQkFBcUI7O0lBRW5FRixnREFBU0E7dUNBQUM7WUFDUixJQUFJLENBQUNJLFVBQVVTLFFBQVEsRUFBRTtnQkFDdkJILFNBQVM7Z0JBQ1RGLGFBQWE7Z0JBQ2I7WUFDRjtZQUVBLE9BQU87WUFDUEUsU0FBUztZQUNURixhQUFhO1lBRWIsdUJBQXVCO1lBQ3ZCLE1BQU1NLFFBQVFDO3FEQUFXO29CQUN2QixpQkFBaUI7b0JBQ2pCLE1BQU1DO2dGQUFxQjs0QkFDekIsT0FBTyxzS0F5TnVDWixPQW5OekNBLFVBQVVhLEtBQUssRUFBQyw0dktBb05pRGIsT0FEeEJBLFVBQVVhLEtBQUssRUFBQyx1RkE2Q3pCYixPQTVDaUNBLFVBQVVjLFdBQVcsRUFBQyxvNkRBdUZsRUMsT0EzQ1dmLFVBQVVnQixNQUFNLENBQUNDLE1BQU0sQ0FBQ0MsTUFBTSxFQUFDLDIwREE0Qy9DbEIsT0FES2UsS0FBS0ksU0FBUyxDQUFDbkIsVUFBVWdCLE1BQU0sR0FBRSxrQ0FDbEIsT0FBcEJoQixVQUFVb0IsU0FBUyxFQUFDO3dCQTBnQjNDOztvQkFFQSxnQkFBZ0I7b0JBQ2hCLE1BQU1DLFNBQVNuQixVQUFVb0IsT0FBTztvQkFDaEMsSUFBSUQsUUFBUTs0QkFDNEJBO3dCQUF0QyxNQUFNRSxNQUFNRixPQUFPRyxlQUFlLE1BQUlILHdCQUFBQSxPQUFPSSxhQUFhLGNBQXBCSiw0Q0FBQUEsc0JBQXNCSyxRQUFRO3dCQUNwRSxJQUFJSCxLQUFLOzRCQUNQQSxJQUFJSSxJQUFJOzRCQUNSSixJQUFJSyxLQUFLLENBQUNoQjs0QkFDVlcsSUFBSU0sS0FBSzs0QkFDVHpCLGFBQWE7d0JBQ2Y7b0JBQ0Y7Z0JBQ0Y7b0RBQUcsS0FBSyxVQUFVOztZQUVsQjsrQ0FBTztvQkFDTDBCLGFBQWFwQjtnQkFDZjs7UUFDRjtzQ0FBRztRQUFDVjtRQUFXTztLQUFVLEVBQUUsa0JBQWtCOztJQUU3QywyQkFBMkI7SUFDM0JYLGdEQUFTQTt1Q0FBQztZQUNSOytDQUFPO29CQUNMWTt1REFBYXVCLENBQUFBLE9BQVFBLE9BQU87O2dCQUM5Qjs7UUFDRjtzQ0FBRyxFQUFFO0lBRUwsYUFBYTtJQUNibkMsZ0RBQVNBO3VDQUFDO1lBQ1IsTUFBTW9DOzZEQUFnQixDQUFDQztvQkFDckIsSUFBSUEsTUFBTUMsSUFBSSxLQUFLLFdBQVdqQyxTQUFTO3dCQUNyQ0E7b0JBQ0Y7Z0JBQ0Y7O1lBRUFrQyxPQUFPQyxnQkFBZ0IsQ0FBQyxXQUFXSjtZQUNuQzsrQ0FBTyxJQUFNRyxPQUFPRSxtQkFBbUIsQ0FBQyxXQUFXTDs7UUFDckQ7c0NBQUc7UUFBQy9CO0tBQVE7SUFFWixJQUFJSSxPQUFPO1FBQ1QscUJBQ0UsOERBQUNpQztZQUFJQyxXQUFVO3NCQUNiLDRFQUFDRDtnQkFBSUMsV0FBVTs7a0NBQ2IsOERBQUNDO3dCQUFFRCxXQUFVO2tDQUFzQmxDOzs7Ozs7a0NBQ25DLDhEQUFDbUM7d0JBQUVELFdBQVU7a0NBQXdCOzs7Ozs7Ozs7Ozs7Ozs7OztJQUk3QztJQUVBLHFCQUNFLDhEQUFDRDtRQUFJQyxXQUFVOztZQUNacEMsMkJBQ0MsOERBQUNtQztnQkFBSUMsV0FBVTswQkFDYiw0RUFBQ0Q7b0JBQUlDLFdBQVU7O3NDQUNiLDhEQUFDRDs0QkFBSUMsV0FBVTs7Ozs7O3NDQUNmLDhEQUFDQzs0QkFBRUQsV0FBVTtzQ0FBZ0I7Ozs7Ozs7Ozs7Ozs7Ozs7OzBCQUluQyw4REFBQ2xCO2dCQUNDb0IsS0FBS3ZDO2dCQUVMcUMsV0FBVTtnQkFDVjFCLE9BQU8sR0FBbUIsT0FBaEJiLFVBQVVhLEtBQUssRUFBQztnQkFDMUI2QixTQUFRO2VBSEhuQzs7Ozs7Ozs7Ozs7QUFPYjtHQXQ1QmdCUjtLQUFBQSIsInNvdXJjZXMiOlsiL1VzZXJzL2phc29uL1Byb2plY3QvTXlfQXBhcnRtZW50X1dlYi9jb21wb25lbnRzL2FwYXJ0bWVudC0zZC12aWV3ZXIudHN4Il0sInNvdXJjZXNDb250ZW50IjpbIlwidXNlIGNsaWVudFwiXG5cbmltcG9ydCB7IHVzZUVmZmVjdCwgdXNlUmVmLCB1c2VTdGF0ZSB9IGZyb20gXCJyZWFjdFwiXG5pbXBvcnQgeyBBcGFydG1lbnREYXRhIH0gZnJvbSBcIkAvdXRpbHMvYXBhcnRtZW50LWRhdGFcIlxuXG5pbnRlcmZhY2UgQXBhcnRtZW50M0RWaWV3ZXJQcm9wcyB7XG4gIGFwYXJ0bWVudDogQXBhcnRtZW50RGF0YVxuICBvbkNsb3NlPzogKCkgPT4gdm9pZFxufVxuXG5leHBvcnQgZnVuY3Rpb24gQXBhcnRtZW50M0RWaWV3ZXIoeyBhcGFydG1lbnQsIG9uQ2xvc2UgfTogQXBhcnRtZW50M0RWaWV3ZXJQcm9wcykge1xuICBjb25zdCBpZnJhbWVSZWYgPSB1c2VSZWY8SFRNTElGcmFtZUVsZW1lbnQ+KG51bGwpXG4gIGNvbnN0IFtpc0xvYWRpbmcsIHNldElzTG9hZGluZ10gPSB1c2VTdGF0ZSh0cnVlKVxuICBjb25zdCBbZXJyb3IsIHNldEVycm9yXSA9IHVzZVN0YXRlPHN0cmluZyB8IG51bGw+KG51bGwpXG4gIGNvbnN0IFtpZnJhbWVLZXksIHNldElmcmFtZUtleV0gPSB1c2VTdGF0ZSgwKSAvLyDmt7vliqBrZXnmnaXlvLrliLbph43mlrDliJvlu7ppZnJhbWVcblxuICB1c2VFZmZlY3QoKCkgPT4ge1xuICAgIGlmICghYXBhcnRtZW50Lmhhc01vZGVsKSB7XG4gICAgICBzZXRFcnJvcihcIuivpeWFrOWvk+aaguaXoDNE5qih5Z6LXCIpXG4gICAgICBzZXRJc0xvYWRpbmcoZmFsc2UpXG4gICAgICByZXR1cm5cbiAgICB9XG5cbiAgICAvLyDph43nva7nirbmgIFcbiAgICBzZXRFcnJvcihudWxsKVxuICAgIHNldElzTG9hZGluZyh0cnVlKVxuICAgIFxuICAgIC8vIOW7tui/n+S4gOeCueaXtumXtOehruS/nWlmcmFtZeWujOWFqOmHjeaWsOWIm+W7ulxuICAgIGNvbnN0IHRpbWVyID0gc2V0VGltZW91dCgoKSA9PiB7XG4gICAgICAvLyDliJvlu7ozROafpeeci+WZqOeahEhUTUzlhoXlrrlcbiAgICAgIGNvbnN0IGNyZWF0ZTNEVmlld2VySFRNTCA9ICgpID0+IHtcbiAgICAgICAgcmV0dXJuIGBcbjwhRE9DVFlQRSBodG1sPlxuPGh0bWwgbGFuZz1cInpoLUNOXCI+XG48aGVhZD5cbiAgICA8bWV0YSBjaGFyc2V0PVwiVVRGLThcIj5cbiAgICA8bWV0YSBuYW1lPVwidmlld3BvcnRcIiBjb250ZW50PVwid2lkdGg9ZGV2aWNlLXdpZHRoLCBpbml0aWFsLXNjYWxlPTEuMFwiPlxuICAgIDx0aXRsZT4ke2FwYXJ0bWVudC50aXRsZX0gLSAzROafpeeci+WZqDwvdGl0bGU+XG4gICAgPHN0eWxlPlxuICAgICAgICBib2R5IHtcbiAgICAgICAgICAgIG1hcmdpbjogMDtcbiAgICAgICAgICAgIHBhZGRpbmc6IDA7XG4gICAgICAgICAgICBmb250LWZhbWlseTogLWFwcGxlLXN5c3RlbSwgQmxpbmtNYWNTeXN0ZW1Gb250LCAnU2Vnb2UgVUknLCBSb2JvdG8sIHNhbnMtc2VyaWY7XG4gICAgICAgICAgICBiYWNrZ3JvdW5kOiAjZjVmNWY1O1xuICAgICAgICAgICAgb3ZlcmZsb3c6IGhpZGRlbjtcbiAgICAgICAgfVxuICAgICAgICBcbiAgICAgICAgLnZpZXdlci1jb250YWluZXIge1xuICAgICAgICAgICAgZGlzcGxheTogZmxleDtcbiAgICAgICAgICAgIGhlaWdodDogMTAwdmg7XG4gICAgICAgICAgICB3aWR0aDogMTAwdnc7XG4gICAgICAgIH1cbiAgICAgICAgXG4gICAgICAgIC5zaWRlYmFyIHtcbiAgICAgICAgICAgIHdpZHRoOiAyODBweDtcbiAgICAgICAgICAgIGJhY2tncm91bmQ6IHdoaXRlO1xuICAgICAgICAgICAgYm9yZGVyLXJpZ2h0OiAxcHggc29saWQgI2U1ZTVlNTtcbiAgICAgICAgICAgIHBhZGRpbmc6IDIwcHg7XG4gICAgICAgICAgICBvdmVyZmxvdy15OiBhdXRvO1xuICAgICAgICAgICAgYm94LXNoYWRvdzogMnB4IDAgMTBweCByZ2JhKDAsMCwwLDAuMSk7XG4gICAgICAgIH1cbiAgICAgICAgXG4gICAgICAgIC5tb2RlbC12aWV3IHtcbiAgICAgICAgICAgIGZsZXg6IDE7XG4gICAgICAgICAgICBwb3NpdGlvbjogcmVsYXRpdmU7XG4gICAgICAgICAgICBiYWNrZ3JvdW5kOiAjZjBmMGYwO1xuICAgICAgICB9XG4gICAgICAgIFxuICAgICAgICAjbW9kZWxDb250YWluZXIge1xuICAgICAgICAgICAgd2lkdGg6IDEwMCU7XG4gICAgICAgICAgICBoZWlnaHQ6IDEwMCU7XG4gICAgICAgICAgICBwb3NpdGlvbjogcmVsYXRpdmU7XG4gICAgICAgIH1cbiAgICAgICAgXG4gICAgICAgIC5wYW5lbCB7XG4gICAgICAgICAgICBiYWNrZ3JvdW5kOiAjZjhmOWZhO1xuICAgICAgICAgICAgYm9yZGVyOiAxcHggc29saWQgI2U5ZWNlZjtcbiAgICAgICAgICAgIGJvcmRlci1yYWRpdXM6IDhweDtcbiAgICAgICAgICAgIHBhZGRpbmc6IDE2cHg7XG4gICAgICAgICAgICBtYXJnaW4tYm90dG9tOiAxNnB4O1xuICAgICAgICB9XG4gICAgICAgIFxuICAgICAgICAucGFuZWwgaDMge1xuICAgICAgICAgICAgbWFyZ2luOiAwIDAgMTJweCAwO1xuICAgICAgICAgICAgZm9udC1zaXplOiAxNHB4O1xuICAgICAgICAgICAgZm9udC13ZWlnaHQ6IDYwMDtcbiAgICAgICAgICAgIGNvbG9yOiAjMzMzO1xuICAgICAgICAgICAgZGlzcGxheTogZmxleDtcbiAgICAgICAgICAgIGFsaWduLWl0ZW1zOiBjZW50ZXI7XG4gICAgICAgICAgICBnYXA6IDhweDtcbiAgICAgICAgfVxuICAgICAgICBcbiAgICAgICAgLmJ0biB7XG4gICAgICAgICAgICBiYWNrZ3JvdW5kOiAjMDA3YmZmO1xuICAgICAgICAgICAgY29sb3I6IHdoaXRlO1xuICAgICAgICAgICAgYm9yZGVyOiBub25lO1xuICAgICAgICAgICAgcGFkZGluZzogOHB4IDE2cHg7XG4gICAgICAgICAgICBib3JkZXItcmFkaXVzOiA2cHg7XG4gICAgICAgICAgICBjdXJzb3I6IHBvaW50ZXI7XG4gICAgICAgICAgICBmb250LXNpemU6IDEzcHg7XG4gICAgICAgICAgICBtYXJnaW46IDRweDtcbiAgICAgICAgICAgIHRyYW5zaXRpb246IGJhY2tncm91bmQtY29sb3IgMC4ycztcbiAgICAgICAgfVxuICAgICAgICBcbiAgICAgICAgLmJ0bjpob3ZlciB7XG4gICAgICAgICAgICBiYWNrZ3JvdW5kOiAjMDA1NmIzO1xuICAgICAgICB9XG4gICAgICAgIFxuICAgICAgICAuYnRuLnNlY29uZGFyeSB7XG4gICAgICAgICAgICBiYWNrZ3JvdW5kOiAjNmM3NTdkO1xuICAgICAgICB9XG4gICAgICAgIFxuICAgICAgICAuYnRuLnNlY29uZGFyeTpob3ZlciB7XG4gICAgICAgICAgICBiYWNrZ3JvdW5kOiAjNTQ1YjYyO1xuICAgICAgICB9XG4gICAgICAgIFxuICAgICAgICAuYnRuLmZ1bGwtd2lkdGgge1xuICAgICAgICAgICAgd2lkdGg6IDEwMCU7XG4gICAgICAgICAgICBtYXJnaW46IDRweCAwO1xuICAgICAgICB9XG4gICAgICAgIFxuICAgICAgICAuY29udHJvbHMtZ3JvdXAge1xuICAgICAgICAgICAgZGlzcGxheTogZmxleDtcbiAgICAgICAgICAgIGZsZXgtd3JhcDogd3JhcDtcbiAgICAgICAgICAgIGdhcDogNHB4O1xuICAgICAgICAgICAgbWFyZ2luLXRvcDogOHB4O1xuICAgICAgICB9XG4gICAgICAgIFxuICAgICAgICAuY29udHJvbHMtZ3JvdXAgLmJ0biB7XG4gICAgICAgICAgICBmbGV4OiAxO1xuICAgICAgICAgICAgbWluLXdpZHRoOiA4MHB4O1xuICAgICAgICB9XG4gICAgICAgIFxuICAgICAgICBzZWxlY3Qge1xuICAgICAgICAgICAgd2lkdGg6IDEwMCU7XG4gICAgICAgICAgICBwYWRkaW5nOiA4cHg7XG4gICAgICAgICAgICBib3JkZXI6IDFweCBzb2xpZCAjZGRkO1xuICAgICAgICAgICAgYm9yZGVyLXJhZGl1czogNHB4O1xuICAgICAgICAgICAgZm9udC1zaXplOiAxM3B4O1xuICAgICAgICAgICAgbWFyZ2luLXRvcDogOHB4O1xuICAgICAgICB9XG4gICAgICAgIFxuICAgICAgICAudmlldy1pbmZvIHtcbiAgICAgICAgICAgIHBvc2l0aW9uOiBhYnNvbHV0ZTtcbiAgICAgICAgICAgIHRvcDogMjBweDtcbiAgICAgICAgICAgIHJpZ2h0OiAyMHB4O1xuICAgICAgICAgICAgYmFja2dyb3VuZDogcmdiYSgwLDAsMCwwLjcpO1xuICAgICAgICAgICAgY29sb3I6IHdoaXRlO1xuICAgICAgICAgICAgcGFkZGluZzogOHB4IDEycHg7XG4gICAgICAgICAgICBib3JkZXItcmFkaXVzOiA2cHg7XG4gICAgICAgICAgICBmb250LXNpemU6IDEycHg7XG4gICAgICAgICAgICB6LWluZGV4OiAxMDA7XG4gICAgICAgIH1cbiAgICAgICAgXG4gICAgICAgIC5lc2MtcHJvbXB0IHtcbiAgICAgICAgICAgIHBvc2l0aW9uOiBhYnNvbHV0ZTtcbiAgICAgICAgICAgIHRvcDogMjBweDtcbiAgICAgICAgICAgIGxlZnQ6IDIwcHg7XG4gICAgICAgICAgICBiYWNrZ3JvdW5kOiByZ2JhKDI1NSwwLDAsMC44KTtcbiAgICAgICAgICAgIGNvbG9yOiB3aGl0ZTtcbiAgICAgICAgICAgIHBhZGRpbmc6IDhweCAxMnB4O1xuICAgICAgICAgICAgYm9yZGVyLXJhZGl1czogNnB4O1xuICAgICAgICAgICAgZm9udC1zaXplOiAxMnB4O1xuICAgICAgICAgICAgei1pbmRleDogMTAwO1xuICAgICAgICB9XG4gICAgICAgIFxuICAgICAgICAuZXNjLXByb21wdC5oaWRkZW4ge1xuICAgICAgICAgICAgZGlzcGxheTogbm9uZTtcbiAgICAgICAgfVxuICAgICAgICBcbiAgICAgICAgI2xvYWRpbmdPdmVybGF5IHtcbiAgICAgICAgICAgIHBvc2l0aW9uOiBhYnNvbHV0ZTtcbiAgICAgICAgICAgIHRvcDogMDtcbiAgICAgICAgICAgIGxlZnQ6IDA7XG4gICAgICAgICAgICB3aWR0aDogMTAwJTtcbiAgICAgICAgICAgIGhlaWdodDogMTAwJTtcbiAgICAgICAgICAgIGJhY2tncm91bmQ6IHJnYmEoMjU1LDI1NSwyNTUsMC45KTtcbiAgICAgICAgICAgIGRpc3BsYXk6IGZsZXg7XG4gICAgICAgICAgICBmbGV4LWRpcmVjdGlvbjogY29sdW1uO1xuICAgICAgICAgICAganVzdGlmeS1jb250ZW50OiBjZW50ZXI7XG4gICAgICAgICAgICBhbGlnbi1pdGVtczogY2VudGVyO1xuICAgICAgICAgICAgei1pbmRleDogMTAwMDtcbiAgICAgICAgfVxuICAgICAgICBcbiAgICAgICAgLnNwaW5uZXIge1xuICAgICAgICAgICAgd2lkdGg6IDQwcHg7XG4gICAgICAgICAgICBoZWlnaHQ6IDQwcHg7XG4gICAgICAgICAgICBib3JkZXI6IDRweCBzb2xpZCAjZjNmM2YzO1xuICAgICAgICAgICAgYm9yZGVyLXRvcDogNHB4IHNvbGlkICMwMDdiZmY7XG4gICAgICAgICAgICBib3JkZXItcmFkaXVzOiA1MCU7XG4gICAgICAgICAgICBhbmltYXRpb246IHNwaW4gMXMgbGluZWFyIGluZmluaXRlO1xuICAgICAgICB9XG4gICAgICAgIFxuICAgICAgICBAa2V5ZnJhbWVzIHNwaW4ge1xuICAgICAgICAgICAgMCUgeyB0cmFuc2Zvcm06IHJvdGF0ZSgwZGVnKTsgfVxuICAgICAgICAgICAgMTAwJSB7IHRyYW5zZm9ybTogcm90YXRlKDM2MGRlZyk7IH1cbiAgICAgICAgfVxuICAgICAgICBcbiAgICAgICAgLmxvYWRpbmctdGV4dCB7XG4gICAgICAgICAgICBtYXJnaW4tdG9wOiAxNnB4O1xuICAgICAgICAgICAgZm9udC1zaXplOiAxNHB4O1xuICAgICAgICAgICAgY29sb3I6ICM2NjY7XG4gICAgICAgIH1cbiAgICAgICAgXG4gICAgICAgIC5jZW50ZXItc2NyZWVuIHtcbiAgICAgICAgICAgIHBvc2l0aW9uOiBhYnNvbHV0ZTtcbiAgICAgICAgICAgIHRvcDogNTAlO1xuICAgICAgICAgICAgbGVmdDogNTAlO1xuICAgICAgICAgICAgdHJhbnNmb3JtOiB0cmFuc2xhdGUoLTUwJSwgLTUwJSk7XG4gICAgICAgICAgICB6LWluZGV4OiAyMDA7XG4gICAgICAgIH1cbiAgICAgICAgXG4gICAgICAgIC5jZW50ZXItc2NyZWVuLmhpZGRlbiB7XG4gICAgICAgICAgICBkaXNwbGF5OiBub25lO1xuICAgICAgICB9XG4gICAgICAgIFxuICAgICAgICAucHJvbXB0LWNvbnRlbnQge1xuICAgICAgICAgICAgYmFja2dyb3VuZDogd2hpdGU7XG4gICAgICAgICAgICBwYWRkaW5nOiAyMHB4O1xuICAgICAgICAgICAgYm9yZGVyLXJhZGl1czogOHB4O1xuICAgICAgICAgICAgYm94LXNoYWRvdzogMCA0cHggMjBweCByZ2JhKDAsMCwwLDAuMyk7XG4gICAgICAgIH1cbiAgICAgICAgXG4gICAgICAgIC5jbG9zZS1idG4ge1xuICAgICAgICAgICAgcG9zaXRpb246IGFic29sdXRlO1xuICAgICAgICAgICAgdG9wOiAxMHB4O1xuICAgICAgICAgICAgcmlnaHQ6IDEwcHg7XG4gICAgICAgICAgICBiYWNrZ3JvdW5kOiByZ2JhKDAsMCwwLDAuNSk7XG4gICAgICAgICAgICBjb2xvcjogd2hpdGU7XG4gICAgICAgICAgICBib3JkZXI6IG5vbmU7XG4gICAgICAgICAgICB3aWR0aDogMzBweDtcbiAgICAgICAgICAgIGhlaWdodDogMzBweDtcbiAgICAgICAgICAgIGJvcmRlci1yYWRpdXM6IDUwJTtcbiAgICAgICAgICAgIGN1cnNvcjogcG9pbnRlcjtcbiAgICAgICAgICAgIGZvbnQtc2l6ZTogMTZweDtcbiAgICAgICAgICAgIHotaW5kZXg6IDEwMDE7XG4gICAgICAgIH1cbiAgICAgICAgXG4gICAgICAgIC5jbG9zZS1idG46aG92ZXIge1xuICAgICAgICAgICAgYmFja2dyb3VuZDogcmdiYSgwLDAsMCwwLjcpO1xuICAgICAgICB9XG4gICAgPC9zdHlsZT5cbjwvaGVhZD5cbjxib2R5PlxuICAgIDxkaXYgY2xhc3M9XCJ2aWV3ZXItY29udGFpbmVyXCI+XG4gICAgICAgIDxkaXYgY2xhc3M9XCJzaWRlYmFyXCI+XG4gICAgICAgICAgICA8ZGl2IGNsYXNzPVwicGFuZWxcIj5cbiAgICAgICAgICAgICAgICA8aDM+8J+PoCDlhazlr5Pkv6Hmga88L2gzPlxuICAgICAgICAgICAgICAgIDxoNCBzdHlsZT1cIm1hcmdpbjogMDsgY29sb3I6ICMzMzM7XCI+JHthcGFydG1lbnQudGl0bGV9PC9oND5cbiAgICAgICAgICAgICAgICA8cCBzdHlsZT1cImZvbnQtc2l6ZTogMTJweDsgY29sb3I6ICM2NjY7IG1hcmdpbjogOHB4IDAgMCAwO1wiPiR7YXBhcnRtZW50LmRlc2NyaXB0aW9ufTwvcD5cbiAgICAgICAgICAgIDwvZGl2PlxuXG4gICAgICAgICAgICA8ZGl2IGNsYXNzPVwicGFuZWxcIj5cbiAgICAgICAgICAgICAgICA8aDM+8J+OriDop4bop5LmjqfliLY8L2gzPlxuICAgICAgICAgICAgICAgIDxkaXYgY2xhc3M9XCJjb250cm9scy1ncm91cFwiPlxuICAgICAgICAgICAgICAgICAgICA8YnV0dG9uIGlkPVwidG9nZ2xlQ29udHJvbE1vZGVCdG5cIiBjbGFzcz1cImJ0biBmdWxsLXdpZHRoXCI+XG4gICAgICAgICAgICAgICAgICAgICAgICA8c3BhbiBpZD1cImNvbnRyb2xNb2RlVGV4dFwiPuWIh+aNouWIsEZQU+aooeW8jzwvc3Bhbj5cbiAgICAgICAgICAgICAgICAgICAgPC9idXR0b24+XG4gICAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICAgICAgPGRpdiBjbGFzcz1cImNvbnRyb2xzLWdyb3VwXCI+XG4gICAgICAgICAgICAgICAgICAgIDxidXR0b24gaWQ9XCJ2aWV3VG9wQnRuXCIgY2xhc3M9XCJidG4gc2Vjb25kYXJ5XCI+6aG26KeG5Zu+PC9idXR0b24+XG4gICAgICAgICAgICAgICAgICAgIDxidXR0b24gaWQ9XCJ2aWV3RnJvbnRCdG5cIiBjbGFzcz1cImJ0biBzZWNvbmRhcnlcIj7mraPop4blm748L2J1dHRvbj5cbiAgICAgICAgICAgICAgICAgICAgPGJ1dHRvbiBpZD1cInZpZXdTaWRlQnRuXCIgY2xhc3M9XCJidG4gc2Vjb25kYXJ5XCI+5L6n6KeG5Zu+PC9idXR0b24+XG4gICAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICAgICAgPGRpdiBjbGFzcz1cImNvbnRyb2xzLWdyb3VwXCI+XG4gICAgICAgICAgICAgICAgICAgIDxidXR0b24gaWQ9XCJyZXNldFZpZXdCdG5cIiBjbGFzcz1cImJ0biBmdWxsLXdpZHRoXCI+6YeN572u6KeG5Zu+PC9idXR0b24+XG4gICAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICAgICAgPGRpdiBjbGFzcz1cImNvbnRyb2xzLWdyb3VwXCI+XG4gICAgICAgICAgICAgICAgICAgIDxidXR0b24gaWQ9XCJ0b2dnbGVXaXJlZnJhbWVCdG5cIiBjbGFzcz1cImJ0biBzZWNvbmRhcnkgZnVsbC13aWR0aFwiPuWIh+aNoue6v+ahhuaooeW8jzwvYnV0dG9uPlxuICAgICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgPC9kaXY+XG5cbiAgICAgICAgICAgIDxkaXYgY2xhc3M9XCJwYW5lbFwiPlxuICAgICAgICAgICAgICAgIDxoMz7impnvuI8g6LSo6YeP5o6n5Yi2PC9oMz5cbiAgICAgICAgICAgICAgICA8bGFiZWwgZm9yPVwicXVhbGl0eVNlbGVjdG9yXCI+5riy5p+T6LSo6YePOjwvbGFiZWw+XG4gICAgICAgICAgICAgICAgPHNlbGVjdCBpZD1cInF1YWxpdHlTZWxlY3RvclwiPlxuICAgICAgICAgICAgICAgICAgICA8b3B0aW9uIHZhbHVlPVwibG93XCI+5L2OICjmm7TmtYHnlYUpPC9vcHRpb24+XG4gICAgICAgICAgICAgICAgICAgIDxvcHRpb24gdmFsdWU9XCJtZWRpdW1cIiBzZWxlY3RlZD7kuK0gKOW5s+ihoSk8L29wdGlvbj5cbiAgICAgICAgICAgICAgICAgICAgPG9wdGlvbiB2YWx1ZT1cImhpZ2hcIj7pq5ggKOabtOa4heaZsCk8L29wdGlvbj5cbiAgICAgICAgICAgICAgICA8L3NlbGVjdD5cbiAgICAgICAgICAgIDwvZGl2PlxuXG4gICAgICAgICAgICA8ZGl2IGNsYXNzPVwicGFuZWxcIj5cbiAgICAgICAgICAgICAgICA8aDM+8J+TtyDmiKrlm748L2gzPlxuICAgICAgICAgICAgICAgIDxidXR0b24gaWQ9XCJzY3JlZW5zaG90QnRuXCIgY2xhc3M9XCJidG4gZnVsbC13aWR0aFwiPuS/neWtmOaIquWbvjwvYnV0dG9uPlxuICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgIDwvZGl2PlxuXG4gICAgICAgIDxkaXYgY2xhc3M9XCJtb2RlbC12aWV3XCI+XG4gICAgICAgICAgICA8YnV0dG9uIGNsYXNzPVwiY2xvc2UtYnRuXCIgb25jbGljaz1cIndpbmRvdy5wYXJlbnQucG9zdE1lc3NhZ2UoJ2Nsb3NlJywgJyonKVwiIHRpdGxlPVwi5YWz6ZetXCI+w5c8L2J1dHRvbj5cbiAgICAgICAgICAgIDxkaXYgaWQ9XCJtb2RlbENvbnRhaW5lclwiPlxuICAgICAgICAgICAgICAgIDxkaXYgY2xhc3M9XCJ2aWV3LWluZm9cIj5cbiAgICAgICAgICAgICAgICAgICAgPGRpdiBpZD1cInJvdGF0aW9uSW5mb1wiPuinhuinkjogMMKwPC9kaXY+XG4gICAgICAgICAgICAgICAgICAgIDxkaXYgaWQ9XCJ6b29tSW5mb1wiPumrmOW6pjogJHthcGFydG1lbnQuY29uZmlnLmNhbWVyYS5oZWlnaHR9bTwvZGl2PlxuICAgICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgICAgIDxkaXYgaWQ9XCJlc2NFeGl0UHJvbXB0XCIgY2xhc3M9XCJlc2MtcHJvbXB0IGhpZGRlblwiPlxuICAgICAgICAgICAgICAgICAgICDmjIlFU0PpgIDlh7pGUFPmqKHlvI9cbiAgICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgICAgICA8ZGl2IGlkPVwibG9hZGluZ092ZXJsYXlcIj5cbiAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzcz1cInNwaW5uZXJcIj48L2Rpdj5cbiAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzcz1cImxvYWRpbmctdGV4dFwiPuato+WcqOWKoOi9veaooeWeiy4uLjwvZGl2PlxuICAgICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgICAgIDxkaXYgaWQ9XCJwb2ludGVyTG9ja1Byb21wdFwiIGNsYXNzPVwiY2VudGVyLXNjcmVlbiBoaWRkZW5cIj5cbiAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzcz1cInByb21wdC1jb250ZW50XCI+XG4gICAgICAgICAgICAgICAgICAgICAgICA8YnV0dG9uIGlkPVwiZW50ZXJGUFNCdG5cIiBjbGFzcz1cImJ0biBmdWxsLXdpZHRoXCIgc3R5bGU9XCJmb250LXNpemU6MS4xcmVtO3BhZGRpbmc6MWVtIDJlbTtcIj7ngrnlh7vku6XlkK/nlKhGUFPmjqfliLY8L2J1dHRvbj5cbiAgICAgICAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgPC9kaXY+XG4gICAgPC9kaXY+XG5cbiAgICA8IS0tIFRocmVlLmpzIOW6kyAtLT5cbiAgICA8c2NyaXB0IHNyYz1cImh0dHBzOi8vY2RuanMuY2xvdWRmbGFyZS5jb20vYWpheC9saWJzL3RocmVlLmpzL3IxMjgvdGhyZWUubWluLmpzXCI+PC9zY3JpcHQ+XG4gICAgPHNjcmlwdCBzcmM9XCJodHRwczovL2Nkbi5qc2RlbGl2ci5uZXQvbnBtL3RocmVlQDAuMTI4LjAvZXhhbXBsZXMvanMvY29udHJvbHMvT3JiaXRDb250cm9scy5taW4uanNcIj48L3NjcmlwdD5cbiAgICA8c2NyaXB0IHNyYz1cImh0dHBzOi8vY2RuLmpzZGVsaXZyLm5ldC9ucG0vdGhyZWVAMC4xMjguMC9leGFtcGxlcy9qcy9jb250cm9scy9Qb2ludGVyTG9ja0NvbnRyb2xzLm1pbi5qc1wiPjwvc2NyaXB0PlxuICAgIDxzY3JpcHQgc3JjPVwiaHR0cHM6Ly9jZG4uanNkZWxpdnIubmV0L25wbS90aHJlZUAwLjEyOC4wL2V4YW1wbGVzL2pzL2xvYWRlcnMvT0JKTG9hZGVyLm1pbi5qc1wiPjwvc2NyaXB0PlxuICAgIDxzY3JpcHQgc3JjPVwiaHR0cHM6Ly9jZG4uanNkZWxpdnIubmV0L25wbS90aHJlZUAwLjEyOC4wL2V4YW1wbGVzL2pzL2xvYWRlcnMvTVRMTG9hZGVyLm1pbi5qc1wiPjwvc2NyaXB0PlxuICAgIFxuICAgIDxzY3JpcHQ+XG4gICAgICAgIC8vIOW8uuWItumHjee9ruaJgOacieWFqOWxgOWPmOmHj1xuICAgICAgICBpZiAod2luZG93LnNjZW5lKSB7XG4gICAgICAgICAgICB3aW5kb3cuc2NlbmUuY2xlYXIoKTtcbiAgICAgICAgfVxuICAgICAgICBpZiAod2luZG93LnJlbmRlcmVyKSB7XG4gICAgICAgICAgICB3aW5kb3cucmVuZGVyZXIuZGlzcG9zZSgpO1xuICAgICAgICB9XG4gICAgICAgIFxuICAgICAgICAvLyAzROafpeeci+WZqOWIneWni+WMluiEmuacrFxuICAgICAgICBsZXQgc2NlbmUsIGNhbWVyYSwgcmVuZGVyZXIsIGNvbnRyb2xzLCBtb2RlbDtcbiAgICAgICAgbGV0IG9yYml0Q29udHJvbHMsIHBvaW50ZXJMb2NrQ29udHJvbHM7XG4gICAgICAgIGxldCBpc1dpcmVmcmFtZSA9IGZhbHNlO1xuICAgICAgICBsZXQgY3VycmVudENvbnRyb2xNb2RlID0gJ29yYml0JzsgLy8gJ29yYml0JyBvciAnZnBzJ1xuICAgICAgICBsZXQgYW5pbWF0aW9uSWQgPSBudWxsOyAvLyDnlKjkuo7muIXnkIbliqjnlLvlvqrnjq9cbiAgICAgICAgbGV0IGtleWJvYXJkQ29udHJvbHMgPSBudWxsOyAvLyDplK7nm5jmjqfliLblmahcbiAgICAgICAgXG4gICAgICAgIC8vIOWFrOWvk+mFjee9rlxuICAgICAgICBjb25zdCBhcGFydG1lbnRDb25maWcgPSAke0pTT04uc3RyaW5naWZ5KGFwYXJ0bWVudC5jb25maWcpfTtcbiAgICAgICAgY29uc3QgbW9kZWxQYXRoID0gXCIke2FwYXJ0bWVudC5tb2RlbFBhdGh9XCI7XG4gICAgICAgIFxuICAgICAgICAvLyDplK7nm5jmjqfliLbnsbsgLSDlrozmlbTnmoRXQVNE56e75Yqo6YC76L6RXG4gICAgICAgIGNsYXNzIEtleWJvYXJkQ29udHJvbHMge1xuICAgICAgICAgICAgY29uc3RydWN0b3IoY2FtZXJhLCBzY2VuZSwgZG9tRWxlbWVudCkge1xuICAgICAgICAgICAgICAgIHRoaXMuY2FtZXJhID0gY2FtZXJhO1xuICAgICAgICAgICAgICAgIHRoaXMuc2NlbmUgPSBzY2VuZTtcbiAgICAgICAgICAgICAgICB0aGlzLmRvbUVsZW1lbnQgPSBkb21FbGVtZW50O1xuICAgICAgICAgICAgICAgIFxuICAgICAgICAgICAgICAgIC8vIOaOp+WItueKtuaAgVxuICAgICAgICAgICAgICAgIHRoaXMuZW5hYmxlZCA9IGZhbHNlO1xuICAgICAgICAgICAgICAgIHRoaXMuaXNNb3ZpbmcgPSBmYWxzZTtcbiAgICAgICAgICAgICAgICBcbiAgICAgICAgICAgICAgICAvLyDnp7vliqjlj4LmlbBcbiAgICAgICAgICAgICAgICB0aGlzLm1vdmVtZW50U3BlZWQgPSAwLjA1O1xuICAgICAgICAgICAgICAgIHRoaXMuZml4ZWRIZWlnaHQgPSB0aGlzLmNhbWVyYS5wb3NpdGlvbi55O1xuICAgICAgICAgICAgICAgIFxuICAgICAgICAgICAgICAgIC8vIOaMiemUrueKtuaAgVxuICAgICAgICAgICAgICAgIHRoaXMua2V5cyA9IHtcbiAgICAgICAgICAgICAgICAgICAgODc6IGZhbHNlLCAvLyBXXG4gICAgICAgICAgICAgICAgICAgIDgzOiBmYWxzZSwgLy8gU1xuICAgICAgICAgICAgICAgICAgICA2NTogZmFsc2UsIC8vIEFcbiAgICAgICAgICAgICAgICAgICAgNjg6IGZhbHNlLCAvLyBEXG4gICAgICAgICAgICAgICAgICAgIDM4OiBmYWxzZSwgLy8g5LiK566t5aS0XG4gICAgICAgICAgICAgICAgICAgIDQwOiBmYWxzZSwgLy8g5LiL566t5aS0XG4gICAgICAgICAgICAgICAgICAgIDM3OiBmYWxzZSwgLy8g5bem566t5aS0XG4gICAgICAgICAgICAgICAgICAgIDM5OiBmYWxzZSAgLy8g5Y+z566t5aS0XG4gICAgICAgICAgICAgICAgfTtcbiAgICAgICAgICAgICAgICBcbiAgICAgICAgICAgICAgICAvLyDnu5Hlrprkuovku7blpITnkIblh73mlbBcbiAgICAgICAgICAgICAgICB0aGlzLl9vbktleURvd24gPSB0aGlzLl9vbktleURvd24uYmluZCh0aGlzKTtcbiAgICAgICAgICAgICAgICB0aGlzLl9vbktleVVwID0gdGhpcy5fb25LZXlVcC5iaW5kKHRoaXMpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgXG4gICAgICAgICAgICBlbmFibGUoKSB7XG4gICAgICAgICAgICAgICAgaWYgKHRoaXMuZW5hYmxlZCkgcmV0dXJuO1xuICAgICAgICAgICAgICAgIFxuICAgICAgICAgICAgICAgIHRoaXMuZW5hYmxlZCA9IHRydWU7XG4gICAgICAgICAgICAgICAgZG9jdW1lbnQuYWRkRXZlbnRMaXN0ZW5lcigna2V5ZG93bicsIHRoaXMuX29uS2V5RG93biwgZmFsc2UpO1xuICAgICAgICAgICAgICAgIGRvY3VtZW50LmFkZEV2ZW50TGlzdGVuZXIoJ2tleXVwJywgdGhpcy5fb25LZXlVcCwgZmFsc2UpO1xuICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKCfplK7nm5jmjqfliLblt7LlkK/nlKgnKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIFxuICAgICAgICAgICAgZGlzYWJsZSgpIHtcbiAgICAgICAgICAgICAgICBpZiAoIXRoaXMuZW5hYmxlZCkgcmV0dXJuO1xuICAgICAgICAgICAgICAgIFxuICAgICAgICAgICAgICAgIHRoaXMuZW5hYmxlZCA9IGZhbHNlO1xuICAgICAgICAgICAgICAgIGRvY3VtZW50LnJlbW92ZUV2ZW50TGlzdGVuZXIoJ2tleWRvd24nLCB0aGlzLl9vbktleURvd24sIGZhbHNlKTtcbiAgICAgICAgICAgICAgICBkb2N1bWVudC5yZW1vdmVFdmVudExpc3RlbmVyKCdrZXl1cCcsIHRoaXMuX29uS2V5VXAsIGZhbHNlKTtcbiAgICAgICAgICAgICAgICBcbiAgICAgICAgICAgICAgICAvLyDph43nva7mjInplK7nirbmgIFcbiAgICAgICAgICAgICAgICBmb3IgKGxldCBrZXkgaW4gdGhpcy5rZXlzKSB7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMua2V5c1trZXldID0gZmFsc2U7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIHRoaXMuaXNNb3ZpbmcgPSBmYWxzZTtcbiAgICAgICAgICAgICAgICBjb25zb2xlLmxvZygn6ZSu55uY5o6n5Yi25bey56aB55SoJyk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBcbiAgICAgICAgICAgIF9vbktleURvd24oZXZlbnQpIHtcbiAgICAgICAgICAgICAgICBpZiAoIXRoaXMuZW5hYmxlZCkgcmV0dXJuO1xuICAgICAgICAgICAgICAgIFxuICAgICAgICAgICAgICAgIGNvbnN0IGtleUNvZGUgPSBldmVudC5rZXlDb2RlO1xuICAgICAgICAgICAgICAgIFxuICAgICAgICAgICAgICAgIC8vIOajgOafpeenu+WKqOmUrlxuICAgICAgICAgICAgICAgIGlmIChldmVudC5rZXkgPT09ICd3JyB8fCBldmVudC5rZXkgPT09ICdXJyB8fCBrZXlDb2RlID09PSA4NyB8fCBrZXlDb2RlID09PSAzOCkge1xuICAgICAgICAgICAgICAgICAgICB0aGlzLmtleXNbODddID0gdHJ1ZTtcbiAgICAgICAgICAgICAgICB9IGVsc2UgaWYgKGV2ZW50LmtleSA9PT0gJ3MnIHx8IGV2ZW50LmtleSA9PT0gJ1MnIHx8IGtleUNvZGUgPT09IDgzIHx8IGtleUNvZGUgPT09IDQwKSB7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMua2V5c1s4M10gPSB0cnVlO1xuICAgICAgICAgICAgICAgIH0gZWxzZSBpZiAoZXZlbnQua2V5ID09PSAnYScgfHwgZXZlbnQua2V5ID09PSAnQScgfHwga2V5Q29kZSA9PT0gNjUgfHwga2V5Q29kZSA9PT0gMzcpIHtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5rZXlzWzY1XSA9IHRydWU7XG4gICAgICAgICAgICAgICAgfSBlbHNlIGlmIChldmVudC5rZXkgPT09ICdkJyB8fCBldmVudC5rZXkgPT09ICdEJyB8fCBrZXlDb2RlID09PSA2OCB8fCBrZXlDb2RlID09PSAzOSkge1xuICAgICAgICAgICAgICAgICAgICB0aGlzLmtleXNbNjhdID0gdHJ1ZTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgXG4gICAgICAgICAgICAgICAgLy8g6Zi75q2i6buY6K6k6KGM5Li6XG4gICAgICAgICAgICAgICAgaWYgKFszMiwgMzcsIDM4LCAzOSwgNDAsIDg3LCA4MywgNjUsIDY4XS5pbmNsdWRlcyhrZXlDb2RlKSkge1xuICAgICAgICAgICAgICAgICAgICBldmVudC5wcmV2ZW50RGVmYXVsdCgpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIFxuICAgICAgICAgICAgX29uS2V5VXAoZXZlbnQpIHtcbiAgICAgICAgICAgICAgICBpZiAoIXRoaXMuZW5hYmxlZCkgcmV0dXJuO1xuICAgICAgICAgICAgICAgIFxuICAgICAgICAgICAgICAgIGNvbnN0IGtleUNvZGUgPSBldmVudC5rZXlDb2RlO1xuICAgICAgICAgICAgICAgIFxuICAgICAgICAgICAgICAgIC8vIOajgOafpeenu+WKqOmUrlxuICAgICAgICAgICAgICAgIGlmIChldmVudC5rZXkgPT09ICd3JyB8fCBldmVudC5rZXkgPT09ICdXJyB8fCBrZXlDb2RlID09PSA4NyB8fCBrZXlDb2RlID09PSAzOCkge1xuICAgICAgICAgICAgICAgICAgICB0aGlzLmtleXNbODddID0gZmFsc2U7XG4gICAgICAgICAgICAgICAgfSBlbHNlIGlmIChldmVudC5rZXkgPT09ICdzJyB8fCBldmVudC5rZXkgPT09ICdTJyB8fCBrZXlDb2RlID09PSA4MyB8fCBrZXlDb2RlID09PSA0MCkge1xuICAgICAgICAgICAgICAgICAgICB0aGlzLmtleXNbODNdID0gZmFsc2U7XG4gICAgICAgICAgICAgICAgfSBlbHNlIGlmIChldmVudC5rZXkgPT09ICdhJyB8fCBldmVudC5rZXkgPT09ICdBJyB8fCBrZXlDb2RlID09PSA2NSB8fCBrZXlDb2RlID09PSAzNykge1xuICAgICAgICAgICAgICAgICAgICB0aGlzLmtleXNbNjVdID0gZmFsc2U7XG4gICAgICAgICAgICAgICAgfSBlbHNlIGlmIChldmVudC5rZXkgPT09ICdkJyB8fCBldmVudC5rZXkgPT09ICdEJyB8fCBrZXlDb2RlID09PSA2OCB8fCBrZXlDb2RlID09PSAzOSkge1xuICAgICAgICAgICAgICAgICAgICB0aGlzLmtleXNbNjhdID0gZmFsc2U7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgXG4gICAgICAgICAgICB1cGRhdGUoKSB7XG4gICAgICAgICAgICAgICAgaWYgKCF0aGlzLmVuYWJsZWQpIHJldHVybjtcbiAgICAgICAgICAgICAgICBcbiAgICAgICAgICAgICAgICB0cnkge1xuICAgICAgICAgICAgICAgICAgICAvLyDmo4Dmn6XmjInplK7nirbmgIFcbiAgICAgICAgICAgICAgICAgICAgY29uc3QgbW92aW5nRm9yd2FyZCA9IHRoaXMua2V5c1s4N107IC8vIFdcbiAgICAgICAgICAgICAgICAgICAgY29uc3QgbW92aW5nQmFja3dhcmQgPSB0aGlzLmtleXNbODNdOyAvLyBTXG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IG1vdmluZ0xlZnQgPSB0aGlzLmtleXNbNjVdOyAvLyBBXG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IG1vdmluZ1JpZ2h0ID0gdGhpcy5rZXlzWzY4XTsgLy8gRFxuICAgICAgICAgICAgICAgICAgICBcbiAgICAgICAgICAgICAgICAgICAgLy8g5aaC5p6c5rKh5pyJ5oyJ6ZSu5oyJ5LiL77yM55u05o6l6L+U5ZueXG4gICAgICAgICAgICAgICAgICAgIGlmICghKG1vdmluZ0ZvcndhcmQgfHwgbW92aW5nQmFja3dhcmQgfHwgbW92aW5nTGVmdCB8fCBtb3ZpbmdSaWdodCkpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmICh0aGlzLmlzTW92aW5nKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5pc01vdmluZyA9IGZhbHNlO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIFxuICAgICAgICAgICAgICAgICAgICAvLyDojrflj5bnm7jmnLrnmoTmnJ3lkJFcbiAgICAgICAgICAgICAgICAgICAgY29uc3QgZGlyZWN0aW9uID0gbmV3IFRIUkVFLlZlY3RvcjMoKTtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5jYW1lcmEuZ2V0V29ybGREaXJlY3Rpb24oZGlyZWN0aW9uKTtcbiAgICAgICAgICAgICAgICAgICAgZGlyZWN0aW9uLm5vcm1hbGl6ZSgpO1xuICAgICAgICAgICAgICAgICAgICBcbiAgICAgICAgICAgICAgICAgICAgLy8g6I635Y+W5Y+z5ZCR6YePXG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IHJpZ2h0ID0gbmV3IFRIUkVFLlZlY3RvcjMoKTtcbiAgICAgICAgICAgICAgICAgICAgcmlnaHQuY3Jvc3NWZWN0b3JzKGRpcmVjdGlvbiwgbmV3IFRIUkVFLlZlY3RvcjMoMCwgMSwgMCkpLm5vcm1hbGl6ZSgpO1xuICAgICAgICAgICAgICAgICAgICBcbiAgICAgICAgICAgICAgICAgICAgLy8g6K6h566X56e75Yqo5ZCR6YePXG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IG1vdmVWZWN0b3IgPSBuZXcgVEhSRUUuVmVjdG9yMygwLCAwLCAwKTtcbiAgICAgICAgICAgICAgICAgICAgXG4gICAgICAgICAgICAgICAgICAgIGlmIChtb3ZpbmdGb3J3YXJkKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBtb3ZlVmVjdG9yLmFkZChkaXJlY3Rpb24pO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIGlmIChtb3ZpbmdCYWNrd2FyZCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgbW92ZVZlY3Rvci5zdWIoZGlyZWN0aW9uKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICBpZiAobW92aW5nUmlnaHQpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIG1vdmVWZWN0b3IuYWRkKHJpZ2h0KTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICBpZiAobW92aW5nTGVmdCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgbW92ZVZlY3Rvci5zdWIocmlnaHQpO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIFxuICAgICAgICAgICAgICAgICAgICAvLyDlvZLkuIDljJbnp7vliqjlkJHph49cbiAgICAgICAgICAgICAgICAgICAgbW92ZVZlY3Rvci5ub3JtYWxpemUoKTtcbiAgICAgICAgICAgICAgICAgICAgbW92ZVZlY3Rvci5tdWx0aXBseVNjYWxhcih0aGlzLm1vdmVtZW50U3BlZWQpO1xuICAgICAgICAgICAgICAgICAgICBcbiAgICAgICAgICAgICAgICAgICAgLy8g5Y+q5ZyoeHrlubPpnaLnp7vliqhcbiAgICAgICAgICAgICAgICAgICAgbW92ZVZlY3Rvci55ID0gMDtcbiAgICAgICAgICAgICAgICAgICAgXG4gICAgICAgICAgICAgICAgICAgIC8vIOabtOaWsOebuOacuuS9jee9rlxuICAgICAgICAgICAgICAgICAgICB0aGlzLmNhbWVyYS5wb3NpdGlvbi5hZGQobW92ZVZlY3Rvcik7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMuY2FtZXJhLnBvc2l0aW9uLnkgPSB0aGlzLmZpeGVkSGVpZ2h0O1xuICAgICAgICAgICAgICAgICAgICBcbiAgICAgICAgICAgICAgICAgICAgaWYgKCF0aGlzLmlzTW92aW5nKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLmlzTW92aW5nID0gdHJ1ZTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICAgICAgICAgICAgICAgIGNvbnNvbGUuZXJyb3IoJ+mUruebmOaOp+WItuabtOaWsOaXtuWHuumUmTonLCBlcnJvcik7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgXG4gICAgICAgICAgICBzZXRGaXhlZEhlaWdodChoZWlnaHQpIHtcbiAgICAgICAgICAgICAgICB0aGlzLmZpeGVkSGVpZ2h0ID0gaGVpZ2h0O1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgXG4gICAgICAgICAgICBzZXRNb3ZlbWVudFNwZWVkKHNwZWVkKSB7XG4gICAgICAgICAgICAgICAgdGhpcy5tb3ZlbWVudFNwZWVkID0gc3BlZWQ7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgXG4gICAgICAgIC8vIOa4heeQhuS5i+WJjeeahOi1hOa6kFxuICAgICAgICBmdW5jdGlvbiBjbGVhbnVwKCkge1xuICAgICAgICAgICAgaWYgKGFuaW1hdGlvbklkKSB7XG4gICAgICAgICAgICAgICAgY2FuY2VsQW5pbWF0aW9uRnJhbWUoYW5pbWF0aW9uSWQpO1xuICAgICAgICAgICAgICAgIGFuaW1hdGlvbklkID0gbnVsbDtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIFxuICAgICAgICAgICAgaWYgKGtleWJvYXJkQ29udHJvbHMpIHtcbiAgICAgICAgICAgICAgICBrZXlib2FyZENvbnRyb2xzLmRpc2FibGUoKTtcbiAgICAgICAgICAgICAgICBrZXlib2FyZENvbnRyb2xzID0gbnVsbDtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIFxuICAgICAgICAgICAgaWYgKHJlbmRlcmVyKSB7XG4gICAgICAgICAgICAgICAgcmVuZGVyZXIuZGlzcG9zZSgpO1xuICAgICAgICAgICAgICAgIHJlbmRlcmVyLmZvcmNlQ29udGV4dExvc3MoKTtcbiAgICAgICAgICAgICAgICBpZiAocmVuZGVyZXIuZG9tRWxlbWVudCAmJiByZW5kZXJlci5kb21FbGVtZW50LnBhcmVudE5vZGUpIHtcbiAgICAgICAgICAgICAgICAgICAgcmVuZGVyZXIuZG9tRWxlbWVudC5wYXJlbnROb2RlLnJlbW92ZUNoaWxkKHJlbmRlcmVyLmRvbUVsZW1lbnQpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIFxuICAgICAgICAgICAgaWYgKHNjZW5lKSB7XG4gICAgICAgICAgICAgICAgc2NlbmUuY2xlYXIoKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIFxuICAgICAgICAgICAgLy8g5riF55CG5LqL5Lu255uR5ZCs5ZmoXG4gICAgICAgICAgICB3aW5kb3cucmVtb3ZlRXZlbnRMaXN0ZW5lcigncmVzaXplJywgb25XaW5kb3dSZXNpemUpO1xuICAgICAgICAgICAgZG9jdW1lbnQucmVtb3ZlRXZlbnRMaXN0ZW5lcigna2V5ZG93bicsIG9uS2V5RG93bik7XG4gICAgICAgIH1cbiAgICAgICAgXG4gICAgICAgIC8vIOWIneWni+WMljNE5Zy65pmvXG4gICAgICAgIGZ1bmN0aW9uIGluaXQoKSB7XG4gICAgICAgICAgICB0cnkge1xuICAgICAgICAgICAgICAgIC8vIOWFiOa4heeQhuS5i+WJjeeahOi1hOa6kFxuICAgICAgICAgICAgICAgIGNsZWFudXAoKTtcbiAgICAgICAgICAgICAgICBcbiAgICAgICAgICAgICAgICAvLyDliJvlu7rlnLrmma9cbiAgICAgICAgICAgICAgICBzY2VuZSA9IG5ldyBUSFJFRS5TY2VuZSgpO1xuICAgICAgICAgICAgICAgIHNjZW5lLmJhY2tncm91bmQgPSBuZXcgVEhSRUUuQ29sb3IoMHhmMGYwZjApO1xuICAgICAgICAgICAgICAgIFxuICAgICAgICAgICAgICAgIC8vIOWIm+W7uuebuOaculxuICAgICAgICAgICAgICAgIGNhbWVyYSA9IG5ldyBUSFJFRS5QZXJzcGVjdGl2ZUNhbWVyYSg3NSwgd2luZG93LmlubmVyV2lkdGggLyB3aW5kb3cuaW5uZXJIZWlnaHQsIDAuMSwgMTAwMCk7XG4gICAgICAgICAgICAgICAgY2FtZXJhLnBvc2l0aW9uLnNldChhcGFydG1lbnRDb25maWcuY2FtZXJhLmluaXRfcG9pbnRbMF0sIGFwYXJ0bWVudENvbmZpZy5jYW1lcmEuaGVpZ2h0LCBhcGFydG1lbnRDb25maWcuY2FtZXJhLmluaXRfcG9pbnRbMV0pO1xuICAgICAgICAgICAgICAgIFxuICAgICAgICAgICAgICAgIC8vIOWIm+W7uua4suafk+WZqFxuICAgICAgICAgICAgICAgIHJlbmRlcmVyID0gbmV3IFRIUkVFLldlYkdMUmVuZGVyZXIoeyBhbnRpYWxpYXM6IHRydWUgfSk7XG4gICAgICAgICAgICAgICAgcmVuZGVyZXIuc2V0U2l6ZSh3aW5kb3cuaW5uZXJXaWR0aCAtIDI4MCwgd2luZG93LmlubmVySGVpZ2h0KTtcbiAgICAgICAgICAgICAgICByZW5kZXJlci5zaGFkb3dNYXAuZW5hYmxlZCA9IHRydWU7XG4gICAgICAgICAgICAgICAgcmVuZGVyZXIuc2hhZG93TWFwLnR5cGUgPSBUSFJFRS5QQ0ZTb2Z0U2hhZG93TWFwO1xuICAgICAgICAgICAgICAgIFxuICAgICAgICAgICAgICAgIGNvbnN0IGNvbnRhaW5lciA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdtb2RlbENvbnRhaW5lcicpO1xuICAgICAgICAgICAgICAgIGNvbnN0IGNhbnZhcyA9IGNvbnRhaW5lci5xdWVyeVNlbGVjdG9yKCdjYW52YXMnKTtcbiAgICAgICAgICAgICAgICBpZiAoY2FudmFzKSB7XG4gICAgICAgICAgICAgICAgICAgIGNvbnRhaW5lci5yZW1vdmVDaGlsZChjYW52YXMpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBjb250YWluZXIuYXBwZW5kQ2hpbGQocmVuZGVyZXIuZG9tRWxlbWVudCk7XG4gICAgICAgICAgICAgICAgXG4gICAgICAgICAgICAgICAgLy8g5Yib5bu65o6n5Yi25ZmoXG4gICAgICAgICAgICAgICAgc2V0dXBDb250cm9scygpO1xuICAgICAgICAgICAgICAgIFxuICAgICAgICAgICAgICAgIC8vIOa3u+WKoOWFiea6kFxuICAgICAgICAgICAgICAgIHNldHVwTGlnaHRpbmcoKTtcbiAgICAgICAgICAgICAgICBcbiAgICAgICAgICAgICAgICAvLyDliqDovb3mqKHlnotcbiAgICAgICAgICAgICAgICBsb2FkTW9kZWwoKTtcbiAgICAgICAgICAgICAgICBcbiAgICAgICAgICAgICAgICAvLyDorr7nva7kuovku7bnm5HlkKxcbiAgICAgICAgICAgICAgICBzZXR1cEV2ZW50TGlzdGVuZXJzKCk7XG4gICAgICAgICAgICAgICAgXG4gICAgICAgICAgICAgICAgLy8g5byA5aeL5riy5p+T5b6q546vXG4gICAgICAgICAgICAgICAgYW5pbWF0ZSgpO1xuICAgICAgICAgICAgICAgIFxuICAgICAgICAgICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgICAgICAgICAgICBjb25zb2xlLmVycm9yKCfliJ3lp4vljJYzROWcuuaZr+Wksei0pTonLCBlcnJvcik7XG4gICAgICAgICAgICAgICAgY29uc3QgbG9hZGluZ092ZXJsYXkgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnbG9hZGluZ092ZXJsYXknKTtcbiAgICAgICAgICAgICAgICBpZiAobG9hZGluZ092ZXJsYXkpIHtcbiAgICAgICAgICAgICAgICAgICAgbG9hZGluZ092ZXJsYXkuaW5uZXJIVE1MID0gJzxkaXYgc3R5bGU9XCJjb2xvcjogcmVkO1wiPjNE5Zy65pmv5Yid5aeL5YyW5aSx6LSlPC9kaXY+JztcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgXG4gICAgICAgIGZ1bmN0aW9uIHNldHVwQ29udHJvbHMoKSB7XG4gICAgICAgICAgICAvLyDovajpgZPmjqfliLblmahcbiAgICAgICAgICAgIG9yYml0Q29udHJvbHMgPSBuZXcgVEhSRUUuT3JiaXRDb250cm9scyhjYW1lcmEsIHJlbmRlcmVyLmRvbUVsZW1lbnQpO1xuICAgICAgICAgICAgb3JiaXRDb250cm9scy5lbmFibGVEYW1waW5nID0gdHJ1ZTtcbiAgICAgICAgICAgIG9yYml0Q29udHJvbHMuZGFtcGluZ0ZhY3RvciA9IDAuMDU7XG4gICAgICAgICAgICBvcmJpdENvbnRyb2xzLnRhcmdldC5zZXQoMCwgMCwgMCk7XG4gICAgICAgICAgICBcbiAgICAgICAgICAgIC8vIEZQU+aOp+WItuWZqFxuICAgICAgICAgICAgcG9pbnRlckxvY2tDb250cm9scyA9IG5ldyBUSFJFRS5Qb2ludGVyTG9ja0NvbnRyb2xzKGNhbWVyYSwgcmVuZGVyZXIuZG9tRWxlbWVudCk7XG4gICAgICAgICAgICBzY2VuZS5hZGQocG9pbnRlckxvY2tDb250cm9scy5nZXRPYmplY3QoKSk7XG4gICAgICAgICAgICBcbiAgICAgICAgICAgIC8vIOmUruebmOaOp+WItuWZqFxuICAgICAgICAgICAga2V5Ym9hcmRDb250cm9scyA9IG5ldyBLZXlib2FyZENvbnRyb2xzKGNhbWVyYSwgc2NlbmUsIHJlbmRlcmVyLmRvbUVsZW1lbnQpO1xuICAgICAgICAgICAga2V5Ym9hcmRDb250cm9scy5zZXRGaXhlZEhlaWdodChhcGFydG1lbnRDb25maWcuY2FtZXJhLmhlaWdodCk7XG4gICAgICAgICAgICBcbiAgICAgICAgICAgIC8vIOm7mOiupOS9v+eUqOi9qOmBk+aOp+WItuWZqFxuICAgICAgICAgICAgb3JiaXRDb250cm9scy5lbmFibGVkID0gdHJ1ZTtcbiAgICAgICAgICAgIHBvaW50ZXJMb2NrQ29udHJvbHMuZW5hYmxlZCA9IGZhbHNlO1xuICAgICAgICAgICAga2V5Ym9hcmRDb250cm9scy5kaXNhYmxlKCk7XG4gICAgICAgIH1cbiAgICAgICAgXG4gICAgICAgIGZ1bmN0aW9uIHNldHVwTGlnaHRpbmcoKSB7XG4gICAgICAgICAgICAvLyDnjq/looPlhYlcbiAgICAgICAgICAgIGNvbnN0IGFtYmllbnRMaWdodCA9IG5ldyBUSFJFRS5BbWJpZW50TGlnaHQoMHg0MDQwNDAsIDAuNik7XG4gICAgICAgICAgICBzY2VuZS5hZGQoYW1iaWVudExpZ2h0KTtcbiAgICAgICAgICAgIFxuICAgICAgICAgICAgLy8g5pa55ZCR5YWJXG4gICAgICAgICAgICBjb25zdCBkaXJlY3Rpb25hbExpZ2h0ID0gbmV3IFRIUkVFLkRpcmVjdGlvbmFsTGlnaHQoMHhmZmZmZmYsIDAuOCk7XG4gICAgICAgICAgICBkaXJlY3Rpb25hbExpZ2h0LnBvc2l0aW9uLnNldCgxMCwgMTAsIDUpO1xuICAgICAgICAgICAgZGlyZWN0aW9uYWxMaWdodC5jYXN0U2hhZG93ID0gdHJ1ZTtcbiAgICAgICAgICAgIHNjZW5lLmFkZChkaXJlY3Rpb25hbExpZ2h0KTtcbiAgICAgICAgICAgIFxuICAgICAgICAgICAgLy8g54K55YWJ5rqQXG4gICAgICAgICAgICBjb25zdCBwb2ludExpZ2h0ID0gbmV3IFRIUkVFLlBvaW50TGlnaHQoMHhmZmZmZmYsIDAuNSk7XG4gICAgICAgICAgICBwb2ludExpZ2h0LnBvc2l0aW9uLnNldCgwLCA1LCAwKTtcbiAgICAgICAgICAgIHNjZW5lLmFkZChwb2ludExpZ2h0KTtcbiAgICAgICAgfVxuICAgICAgICBcbiAgICAgICAgZnVuY3Rpb24gbG9hZE1vZGVsKCkge1xuICAgICAgICAgICAgY29uc3QgbG9hZGluZ092ZXJsYXkgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnbG9hZGluZ092ZXJsYXknKTtcbiAgICAgICAgICAgIFxuICAgICAgICAgICAgLy8gTVRM5Yqg6L295ZmoXG4gICAgICAgICAgICBjb25zdCBtdGxMb2FkZXIgPSBuZXcgVEhSRUUuTVRMTG9hZGVyKCk7XG4gICAgICAgICAgICBtdGxMb2FkZXIuc2V0UGF0aChtb2RlbFBhdGggKyAnLycpO1xuICAgICAgICAgICAgXG4gICAgICAgICAgICBtdGxMb2FkZXIubG9hZCgndGV4dHVyZWRfb3V0cHV0Lm10bCcsIGZ1bmN0aW9uKG1hdGVyaWFscykge1xuICAgICAgICAgICAgICAgIG1hdGVyaWFscy5wcmVsb2FkKCk7XG4gICAgICAgICAgICAgICAgXG4gICAgICAgICAgICAgICAgLy8gT0JK5Yqg6L295ZmoXG4gICAgICAgICAgICAgICAgY29uc3Qgb2JqTG9hZGVyID0gbmV3IFRIUkVFLk9CSkxvYWRlcigpO1xuICAgICAgICAgICAgICAgIG9iakxvYWRlci5zZXRNYXRlcmlhbHMobWF0ZXJpYWxzKTtcbiAgICAgICAgICAgICAgICBvYmpMb2FkZXIuc2V0UGF0aChtb2RlbFBhdGggKyAnLycpO1xuICAgICAgICAgICAgICAgIFxuICAgICAgICAgICAgICAgIG9iakxvYWRlci5sb2FkKCd0ZXh0dXJlZF9vdXRwdXQub2JqJywgXG4gICAgICAgICAgICAgICAgICAgIGZ1bmN0aW9uKG9iamVjdCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgLy8g5qih5Z6L5Yqg6L295oiQ5YqfXG4gICAgICAgICAgICAgICAgICAgICAgICBtb2RlbCA9IG9iamVjdDtcbiAgICAgICAgICAgICAgICAgICAgICAgIHNjZW5lLmFkZChtb2RlbCk7XG4gICAgICAgICAgICAgICAgICAgICAgICBcbiAgICAgICAgICAgICAgICAgICAgICAgIC8vIOiuoeeul+aooeWei+i+ueeVjOebklxuICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgYm94ID0gbmV3IFRIUkVFLkJveDMoKS5zZXRGcm9tT2JqZWN0KG1vZGVsKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IGNlbnRlciA9IGJveC5nZXRDZW50ZXIobmV3IFRIUkVFLlZlY3RvcjMoKSk7XG4gICAgICAgICAgICAgICAgICAgICAgICBjb25zdCBzaXplID0gYm94LmdldFNpemUobmV3IFRIUkVFLlZlY3RvcjMoKSk7XG4gICAgICAgICAgICAgICAgICAgICAgICBcbiAgICAgICAgICAgICAgICAgICAgICAgIC8vIOiwg+aVtOebuOacuuS9jee9rlxuICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgbWF4RGltID0gTWF0aC5tYXgoc2l6ZS54LCBzaXplLnksIHNpemUueik7XG4gICAgICAgICAgICAgICAgICAgICAgICBjb25zdCBmb3YgPSBjYW1lcmEuZm92ICogKE1hdGguUEkgLyAxODApO1xuICAgICAgICAgICAgICAgICAgICAgICAgbGV0IGNhbWVyYVogPSBNYXRoLmFicyhtYXhEaW0gLyAyIC8gTWF0aC50YW4oZm92IC8gMikpO1xuICAgICAgICAgICAgICAgICAgICAgICAgY2FtZXJhWiAqPSAxLjU7IC8vIOWinuWKoOS4gOS6m+i3neemu1xuICAgICAgICAgICAgICAgICAgICAgICAgXG4gICAgICAgICAgICAgICAgICAgICAgICBjYW1lcmEucG9zaXRpb24uc2V0KGNlbnRlci54LCBjZW50ZXIueSArIGFwYXJ0bWVudENvbmZpZy5jYW1lcmEuaGVpZ2h0LCBjZW50ZXIueiArIGNhbWVyYVopO1xuICAgICAgICAgICAgICAgICAgICAgICAgb3JiaXRDb250cm9scy50YXJnZXQuY29weShjZW50ZXIpO1xuICAgICAgICAgICAgICAgICAgICAgICAgXG4gICAgICAgICAgICAgICAgICAgICAgICAvLyDpmpDol4/liqDovb3nlYzpnaJcbiAgICAgICAgICAgICAgICAgICAgICAgIGxvYWRpbmdPdmVybGF5LnN0eWxlLmRpc3BsYXkgPSAnbm9uZSc7XG4gICAgICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgICAgIGZ1bmN0aW9uKHByb2dyZXNzKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAvLyDliqDovb3ov5vluqZcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKCdMb2FkaW5nIHByb2dyZXNzOicsIHByb2dyZXNzKTtcbiAgICAgICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICAgICAgZnVuY3Rpb24oZXJyb3IpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIC8vIOWKoOi9vemUmeivr1xuICAgICAgICAgICAgICAgICAgICAgICAgY29uc29sZS5lcnJvcignRXJyb3IgbG9hZGluZyBtb2RlbDonLCBlcnJvcik7XG4gICAgICAgICAgICAgICAgICAgICAgICBsb2FkaW5nT3ZlcmxheS5pbm5lckhUTUwgPSAnPGRpdiBzdHlsZT1cImNvbG9yOiByZWQ7XCI+5qih5Z6L5Yqg6L295aSx6LSlPC9kaXY+JztcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICk7XG4gICAgICAgICAgICB9LCB1bmRlZmluZWQsIGZ1bmN0aW9uKGVycm9yKSB7XG4gICAgICAgICAgICAgICAgY29uc29sZS5lcnJvcignRXJyb3IgbG9hZGluZyBtYXRlcmlhbHM6JywgZXJyb3IpO1xuICAgICAgICAgICAgICAgIGxvYWRpbmdPdmVybGF5LmlubmVySFRNTCA9ICc8ZGl2IHN0eWxlPVwiY29sb3I6IHJlZDtcIj7mnZDotKjliqDovb3lpLHotKU8L2Rpdj4nO1xuICAgICAgICAgICAgfSk7XG4gICAgICAgIH1cbiAgICAgICAgXG4gICAgICAgIGZ1bmN0aW9uIHNldHVwRXZlbnRMaXN0ZW5lcnMoKSB7XG4gICAgICAgICAgICAvLyDmjqfliLbmqKHlvI/liIfmjaJcbiAgICAgICAgICAgIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCd0b2dnbGVDb250cm9sTW9kZUJ0bicpLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgdG9nZ2xlQ29udHJvbE1vZGUpO1xuICAgICAgICAgICAgXG4gICAgICAgICAgICAvLyDop4bop5LmjInpkq5cbiAgICAgICAgICAgIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCd2aWV3VG9wQnRuJykuYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCAoKSA9PiBzZXRWaWV3KCd0b3AnKSk7XG4gICAgICAgICAgICBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgndmlld0Zyb250QnRuJykuYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCAoKSA9PiBzZXRWaWV3KCdmcm9udCcpKTtcbiAgICAgICAgICAgIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCd2aWV3U2lkZUJ0bicpLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgKCkgPT4gc2V0Vmlldygnc2lkZScpKTtcbiAgICAgICAgICAgIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdyZXNldFZpZXdCdG4nKS5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIHJlc2V0Vmlldyk7XG4gICAgICAgICAgICBcbiAgICAgICAgICAgIC8vIOe6v+ahhuaooeW8j1xuICAgICAgICAgICAgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ3RvZ2dsZVdpcmVmcmFtZUJ0bicpLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgdG9nZ2xlV2lyZWZyYW1lKTtcbiAgICAgICAgICAgIFxuICAgICAgICAgICAgLy8g5oiq5Zu+XG4gICAgICAgICAgICBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnc2NyZWVuc2hvdEJ0bicpLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgdGFrZVNjcmVlbnNob3QpO1xuICAgICAgICAgICAgXG4gICAgICAgICAgICAvLyDotKjph4/mjqfliLZcbiAgICAgICAgICAgIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdxdWFsaXR5U2VsZWN0b3InKS5hZGRFdmVudExpc3RlbmVyKCdjaGFuZ2UnLCBjaGFuZ2VRdWFsaXR5KTtcbiAgICAgICAgICAgIFxuICAgICAgICAgICAgLy8gRlBT5qih5byP55u45YWzXG4gICAgICAgICAgICBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnZW50ZXJGUFNCdG4nKS5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIGVudGVyRlBTTW9kZSk7XG4gICAgICAgICAgICBcbiAgICAgICAgICAgIC8vIOmUruebmOS6i+S7tlxuICAgICAgICAgICAgZG9jdW1lbnQuYWRkRXZlbnRMaXN0ZW5lcigna2V5ZG93bicsIG9uS2V5RG93bik7XG4gICAgICAgICAgICBcbiAgICAgICAgICAgIC8vIOeql+WPo+Wkp+Wwj+iwg+aVtFxuICAgICAgICAgICAgd2luZG93LmFkZEV2ZW50TGlzdGVuZXIoJ3Jlc2l6ZScsIG9uV2luZG93UmVzaXplKTtcbiAgICAgICAgfVxuICAgICAgICBcbiAgICAgICAgZnVuY3Rpb24gdG9nZ2xlQ29udHJvbE1vZGUoKSB7XG4gICAgICAgICAgICBpZiAoY3VycmVudENvbnRyb2xNb2RlID09PSAnb3JiaXQnKSB7XG4gICAgICAgICAgICAgICAgLy8g5YiH5o2i5YiwRlBT5qih5byPXG4gICAgICAgICAgICAgICAgY3VycmVudENvbnRyb2xNb2RlID0gJ2Zwcyc7XG4gICAgICAgICAgICAgICAgb3JiaXRDb250cm9scy5lbmFibGVkID0gZmFsc2U7XG4gICAgICAgICAgICAgICAgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ3BvaW50ZXJMb2NrUHJvbXB0JykuY2xhc3NMaXN0LnJlbW92ZSgnaGlkZGVuJyk7XG4gICAgICAgICAgICAgICAgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2NvbnRyb2xNb2RlVGV4dCcpLnRleHRDb250ZW50ID0gJ+WIh+aNouWIsOm8oOagh+aooeW8jyc7XG4gICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgIC8vIOWIh+aNouWIsOi9qOmBk+aooeW8j1xuICAgICAgICAgICAgICAgIGV4aXRGUFNNb2RlKCk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgXG4gICAgICAgIGZ1bmN0aW9uIGVudGVyRlBTTW9kZSgpIHtcbiAgICAgICAgICAgIC8vIOi/m+WFpeaMh+mSiOmUgeWumueKtuaAgVxuICAgICAgICAgICAgcG9pbnRlckxvY2tDb250cm9scy5sb2NrKCk7XG4gICAgICAgICAgICBwb2ludGVyTG9ja0NvbnRyb2xzLmVuYWJsZWQgPSB0cnVlO1xuICAgICAgICAgICAga2V5Ym9hcmRDb250cm9scy5lbmFibGUoKTsgLy8g5ZCv55So6ZSu55uY5o6n5Yi2XG4gICAgICAgICAgICBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgncG9pbnRlckxvY2tQcm9tcHQnKS5jbGFzc0xpc3QuYWRkKCdoaWRkZW4nKTtcbiAgICAgICAgICAgIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdlc2NFeGl0UHJvbXB0JykuY2xhc3NMaXN0LnJlbW92ZSgnaGlkZGVuJyk7XG4gICAgICAgIH1cbiAgICAgICAgXG4gICAgICAgIGZ1bmN0aW9uIGV4aXRQb2ludGVyTG9jaygpIHtcbiAgICAgICAgICAgIC8vIOmAgOWHuuaMh+mSiOmUgeWumueKtuaAge+8jOS9huS7jeWcqEZQU+aooeW8j1xuICAgICAgICAgICAgcG9pbnRlckxvY2tDb250cm9scy51bmxvY2soKTtcbiAgICAgICAgICAgIHBvaW50ZXJMb2NrQ29udHJvbHMuZW5hYmxlZCA9IGZhbHNlO1xuICAgICAgICAgICAga2V5Ym9hcmRDb250cm9scy5kaXNhYmxlKCk7IC8vIOemgeeUqOmUruebmOaOp+WItlxuICAgICAgICAgICAgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2VzY0V4aXRQcm9tcHQnKS5jbGFzc0xpc3QuYWRkKCdoaWRkZW4nKTtcbiAgICAgICAgICAgIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdwb2ludGVyTG9ja1Byb21wdCcpLmNsYXNzTGlzdC5yZW1vdmUoJ2hpZGRlbicpO1xuICAgICAgICB9XG4gICAgICAgIFxuICAgICAgICBmdW5jdGlvbiBleGl0RlBTTW9kZSgpIHtcbiAgICAgICAgICAgIC8vIOWujOWFqOmAgOWHukZQU+aooeW8j++8jOWbnuWIsOi9qOmBk+aooeW8j1xuICAgICAgICAgICAgcG9pbnRlckxvY2tDb250cm9scy51bmxvY2soKTtcbiAgICAgICAgICAgIGN1cnJlbnRDb250cm9sTW9kZSA9ICdvcmJpdCc7XG4gICAgICAgICAgICBvcmJpdENvbnRyb2xzLmVuYWJsZWQgPSB0cnVlO1xuICAgICAgICAgICAgcG9pbnRlckxvY2tDb250cm9scy5lbmFibGVkID0gZmFsc2U7XG4gICAgICAgICAgICBrZXlib2FyZENvbnRyb2xzLmRpc2FibGUoKTsgLy8g56aB55So6ZSu55uY5o6n5Yi2XG4gICAgICAgICAgICBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnZXNjRXhpdFByb21wdCcpLmNsYXNzTGlzdC5hZGQoJ2hpZGRlbicpO1xuICAgICAgICAgICAgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ3BvaW50ZXJMb2NrUHJvbXB0JykuY2xhc3NMaXN0LmFkZCgnaGlkZGVuJyk7XG4gICAgICAgICAgICBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnY29udHJvbE1vZGVUZXh0JykudGV4dENvbnRlbnQgPSAn5YiH5o2i5YiwRlBT5qih5byPJztcbiAgICAgICAgfVxuICAgICAgICBcbiAgICAgICAgZnVuY3Rpb24gc2V0Vmlldyh2aWV3VHlwZSkge1xuICAgICAgICAgICAgaWYgKCFtb2RlbCkgcmV0dXJuO1xuICAgICAgICAgICAgXG4gICAgICAgICAgICBjb25zdCBib3ggPSBuZXcgVEhSRUUuQm94MygpLnNldEZyb21PYmplY3QobW9kZWwpO1xuICAgICAgICAgICAgY29uc3QgY2VudGVyID0gYm94LmdldENlbnRlcihuZXcgVEhSRUUuVmVjdG9yMygpKTtcbiAgICAgICAgICAgIGNvbnN0IHNpemUgPSBib3guZ2V0U2l6ZShuZXcgVEhSRUUuVmVjdG9yMygpKTtcbiAgICAgICAgICAgIGNvbnN0IG1heERpbSA9IE1hdGgubWF4KHNpemUueCwgc2l6ZS55LCBzaXplLnopO1xuICAgICAgICAgICAgXG4gICAgICAgICAgICBzd2l0Y2godmlld1R5cGUpIHtcbiAgICAgICAgICAgICAgICBjYXNlICd0b3AnOlxuICAgICAgICAgICAgICAgICAgICBjYW1lcmEucG9zaXRpb24uc2V0KGNlbnRlci54LCBjZW50ZXIueSArIG1heERpbSwgY2VudGVyLnopO1xuICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICBjYXNlICdmcm9udCc6XG4gICAgICAgICAgICAgICAgICAgIGNhbWVyYS5wb3NpdGlvbi5zZXQoY2VudGVyLngsIGNlbnRlci55LCBjZW50ZXIueiArIG1heERpbSk7XG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgIGNhc2UgJ3NpZGUnOlxuICAgICAgICAgICAgICAgICAgICBjYW1lcmEucG9zaXRpb24uc2V0KGNlbnRlci54ICsgbWF4RGltLCBjZW50ZXIueSwgY2VudGVyLnopO1xuICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIFxuICAgICAgICAgICAgb3JiaXRDb250cm9scy50YXJnZXQuY29weShjZW50ZXIpO1xuICAgICAgICAgICAgb3JiaXRDb250cm9scy51cGRhdGUoKTtcbiAgICAgICAgfVxuICAgICAgICBcbiAgICAgICAgZnVuY3Rpb24gcmVzZXRWaWV3KCkge1xuICAgICAgICAgICAgaWYgKCFtb2RlbCkgcmV0dXJuO1xuICAgICAgICAgICAgXG4gICAgICAgICAgICBjb25zdCBib3ggPSBuZXcgVEhSRUUuQm94MygpLnNldEZyb21PYmplY3QobW9kZWwpO1xuICAgICAgICAgICAgY29uc3QgY2VudGVyID0gYm94LmdldENlbnRlcihuZXcgVEhSRUUuVmVjdG9yMygpKTtcbiAgICAgICAgICAgIGNvbnN0IHNpemUgPSBib3guZ2V0U2l6ZShuZXcgVEhSRUUuVmVjdG9yMygpKTtcbiAgICAgICAgICAgIGNvbnN0IG1heERpbSA9IE1hdGgubWF4KHNpemUueCwgc2l6ZS55LCBzaXplLnopO1xuICAgICAgICAgICAgXG4gICAgICAgICAgICBjYW1lcmEucG9zaXRpb24uc2V0KGNlbnRlci54LCBjZW50ZXIueSArIGFwYXJ0bWVudENvbmZpZy5jYW1lcmEuaGVpZ2h0LCBjZW50ZXIueiArIG1heERpbSAqIDEuNSk7XG4gICAgICAgICAgICBvcmJpdENvbnRyb2xzLnRhcmdldC5jb3B5KGNlbnRlcik7XG4gICAgICAgICAgICBvcmJpdENvbnRyb2xzLnVwZGF0ZSgpO1xuICAgICAgICB9XG4gICAgICAgIFxuICAgICAgICBmdW5jdGlvbiB0b2dnbGVXaXJlZnJhbWUoKSB7XG4gICAgICAgICAgICBpZiAoIW1vZGVsKSByZXR1cm47XG4gICAgICAgICAgICBcbiAgICAgICAgICAgIGlzV2lyZWZyYW1lID0gIWlzV2lyZWZyYW1lO1xuICAgICAgICAgICAgbW9kZWwudHJhdmVyc2UoZnVuY3Rpb24oY2hpbGQpIHtcbiAgICAgICAgICAgICAgICBpZiAoY2hpbGQuaXNNZXNoKSB7XG4gICAgICAgICAgICAgICAgICAgIGNoaWxkLm1hdGVyaWFsLndpcmVmcmFtZSA9IGlzV2lyZWZyYW1lO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9XG4gICAgICAgIFxuICAgICAgICBmdW5jdGlvbiB0YWtlU2NyZWVuc2hvdCgpIHtcbiAgICAgICAgICAgIGNvbnN0IGxpbmsgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdhJyk7XG4gICAgICAgICAgICBsaW5rLmRvd25sb2FkID0gXFxgXFwke2FwYXJ0bWVudENvbmZpZy5uYW1lfV9zY3JlZW5zaG90LnBuZ1xcYDtcbiAgICAgICAgICAgIGxpbmsuaHJlZiA9IHJlbmRlcmVyLmRvbUVsZW1lbnQudG9EYXRhVVJMKCk7XG4gICAgICAgICAgICBsaW5rLmNsaWNrKCk7XG4gICAgICAgIH1cbiAgICAgICAgXG4gICAgICAgIGZ1bmN0aW9uIGNoYW5nZVF1YWxpdHkoZXZlbnQpIHtcbiAgICAgICAgICAgIGNvbnN0IHF1YWxpdHkgPSBldmVudC50YXJnZXQudmFsdWU7XG4gICAgICAgICAgICBsZXQgcGl4ZWxSYXRpbztcbiAgICAgICAgICAgIFxuICAgICAgICAgICAgc3dpdGNoKHF1YWxpdHkpIHtcbiAgICAgICAgICAgICAgICBjYXNlICdsb3cnOlxuICAgICAgICAgICAgICAgICAgICBwaXhlbFJhdGlvID0gMC41O1xuICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICBjYXNlICdtZWRpdW0nOlxuICAgICAgICAgICAgICAgICAgICBwaXhlbFJhdGlvID0gMTtcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgY2FzZSAnaGlnaCc6XG4gICAgICAgICAgICAgICAgICAgIHBpeGVsUmF0aW8gPSBNYXRoLm1pbih3aW5kb3cuZGV2aWNlUGl4ZWxSYXRpbywgMik7XG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgXG4gICAgICAgICAgICByZW5kZXJlci5zZXRQaXhlbFJhdGlvKHBpeGVsUmF0aW8pO1xuICAgICAgICB9XG4gICAgICAgIFxuICAgICAgICBmdW5jdGlvbiBvbktleURvd24oZXZlbnQpIHtcbiAgICAgICAgICAgIC8vIOWPquWkhOeQhkVTQ+mUru+8jOWFtuS7lumUruiuqemUruebmOaOp+WItuWZqOWkhOeQhlxuICAgICAgICAgICAgaWYgKGV2ZW50LmNvZGUgPT09ICdFc2NhcGUnICYmIGN1cnJlbnRDb250cm9sTW9kZSA9PT0gJ2ZwcycpIHtcbiAgICAgICAgICAgICAgICBleGl0RlBTTW9kZSgpO1xuICAgICAgICAgICAgICAgIGV2ZW50LnByZXZlbnREZWZhdWx0KCk7XG4gICAgICAgICAgICAgICAgZXZlbnQuc3RvcFByb3BhZ2F0aW9uKCk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgXG4gICAgICAgIGZ1bmN0aW9uIG9uV2luZG93UmVzaXplKCkge1xuICAgICAgICAgICAgY2FtZXJhLmFzcGVjdCA9ICh3aW5kb3cuaW5uZXJXaWR0aCAtIDI4MCkgLyB3aW5kb3cuaW5uZXJIZWlnaHQ7XG4gICAgICAgICAgICBjYW1lcmEudXBkYXRlUHJvamVjdGlvbk1hdHJpeCgpO1xuICAgICAgICAgICAgcmVuZGVyZXIuc2V0U2l6ZSh3aW5kb3cuaW5uZXJXaWR0aCAtIDI4MCwgd2luZG93LmlubmVySGVpZ2h0KTtcbiAgICAgICAgfVxuICAgICAgICBcbiAgICAgICAgZnVuY3Rpb24gYW5pbWF0ZSgpIHtcbiAgICAgICAgICAgIGFuaW1hdGlvbklkID0gcmVxdWVzdEFuaW1hdGlvbkZyYW1lKGFuaW1hdGUpO1xuICAgICAgICAgICAgXG4gICAgICAgICAgICBpZiAob3JiaXRDb250cm9scy5lbmFibGVkKSB7XG4gICAgICAgICAgICAgICAgb3JiaXRDb250cm9scy51cGRhdGUoKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIFxuICAgICAgICAgICAgLy8g5pu05paw6ZSu55uY5o6n5Yi2XG4gICAgICAgICAgICBpZiAoa2V5Ym9hcmRDb250cm9scyAmJiBjdXJyZW50Q29udHJvbE1vZGUgPT09ICdmcHMnKSB7XG4gICAgICAgICAgICAgICAga2V5Ym9hcmRDb250cm9scy51cGRhdGUoKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIFxuICAgICAgICAgICAgcmVuZGVyZXIucmVuZGVyKHNjZW5lLCBjYW1lcmEpO1xuICAgICAgICB9XG4gICAgICAgIFxuICAgICAgICAvLyDliJ3lp4vljJZcbiAgICAgICAgaW5pdCgpO1xuICAgIDwvc2NyaXB0PlxuPC9ib2R5PlxuPC9odG1sPlxuICAgICAgYFxuICAgICAgfVxuXG4gICAgICAvLyDliJvlu7ppZnJhbWXlubborr7nva7lhoXlrrlcbiAgICAgIGNvbnN0IGlmcmFtZSA9IGlmcmFtZVJlZi5jdXJyZW50XG4gICAgICBpZiAoaWZyYW1lKSB7XG4gICAgICAgIGNvbnN0IGRvYyA9IGlmcmFtZS5jb250ZW50RG9jdW1lbnQgfHwgaWZyYW1lLmNvbnRlbnRXaW5kb3c/LmRvY3VtZW50XG4gICAgICAgIGlmIChkb2MpIHtcbiAgICAgICAgICBkb2Mub3BlbigpXG4gICAgICAgICAgZG9jLndyaXRlKGNyZWF0ZTNEVmlld2VySFRNTCgpKVxuICAgICAgICAgIGRvYy5jbG9zZSgpXG4gICAgICAgICAgc2V0SXNMb2FkaW5nKGZhbHNlKVxuICAgICAgICB9XG4gICAgICB9XG4gICAgfSwgMTAwKSAvLyAxMDBtc+W7tui/n1xuXG4gICAgcmV0dXJuICgpID0+IHtcbiAgICAgIGNsZWFyVGltZW91dCh0aW1lcilcbiAgICB9XG4gIH0sIFthcGFydG1lbnQsIGlmcmFtZUtleV0pIC8vIOa3u+WKoGlmcmFtZUtleeS9nOS4uuS+nei1llxuXG4gIC8vIOe7hOS7tuWNuOi9veaXtumHjee9rmlmcmFtZSBrZXnmnaXlvLrliLbph43mlrDliJvlu7pcbiAgdXNlRWZmZWN0KCgpID0+IHtcbiAgICByZXR1cm4gKCkgPT4ge1xuICAgICAgc2V0SWZyYW1lS2V5KHByZXYgPT4gcHJldiArIDEpXG4gICAgfVxuICB9LCBbXSlcblxuICAvLyDnm5HlkKxpZnJhbWXmtojmga9cbiAgdXNlRWZmZWN0KCgpID0+IHtcbiAgICBjb25zdCBoYW5kbGVNZXNzYWdlID0gKGV2ZW50OiBNZXNzYWdlRXZlbnQpID0+IHtcbiAgICAgIGlmIChldmVudC5kYXRhID09PSAnY2xvc2UnICYmIG9uQ2xvc2UpIHtcbiAgICAgICAgb25DbG9zZSgpXG4gICAgICB9XG4gICAgfVxuXG4gICAgd2luZG93LmFkZEV2ZW50TGlzdGVuZXIoJ21lc3NhZ2UnLCBoYW5kbGVNZXNzYWdlKVxuICAgIHJldHVybiAoKSA9PiB3aW5kb3cucmVtb3ZlRXZlbnRMaXN0ZW5lcignbWVzc2FnZScsIGhhbmRsZU1lc3NhZ2UpXG4gIH0sIFtvbkNsb3NlXSlcblxuICBpZiAoZXJyb3IpIHtcbiAgICByZXR1cm4gKFxuICAgICAgPGRpdiBjbGFzc05hbWU9XCJmbGV4IGl0ZW1zLWNlbnRlciBqdXN0aWZ5LWNlbnRlciBoLWZ1bGxcIj5cbiAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJ0ZXh0LWNlbnRlciBwLThcIj5cbiAgICAgICAgICA8cCBjbGFzc05hbWU9XCJ0ZXh0LWdyYXktNTAwIG1iLTRcIj57ZXJyb3J9PC9wPlxuICAgICAgICAgIDxwIGNsYXNzTmFtZT1cInRleHQtc20gdGV4dC1ncmF5LTQwMFwiPuivpeWFrOWvk+aooeWei+ato+WcqOWHhuWkh+S4re+8jOaVrOivt+acn+W+hTwvcD5cbiAgICAgICAgPC9kaXY+XG4gICAgICA8L2Rpdj5cbiAgICApXG4gIH1cblxuICByZXR1cm4gKFxuICAgIDxkaXYgY2xhc3NOYW1lPVwidy1mdWxsIGgtZnVsbCByZWxhdGl2ZVwiPlxuICAgICAge2lzTG9hZGluZyAmJiAoXG4gICAgICAgIDxkaXYgY2xhc3NOYW1lPVwiYWJzb2x1dGUgaW5zZXQtMCBmbGV4IGl0ZW1zLWNlbnRlciBqdXN0aWZ5LWNlbnRlciBiZy13aGl0ZSB6LTEwXCI+XG4gICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJ0ZXh0LWNlbnRlclwiPlxuICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJhbmltYXRlLXNwaW4gcm91bmRlZC1mdWxsIGgtMTIgdy0xMiBib3JkZXItYi0yIGJvcmRlci1ibHVlLTUwMCBteC1hdXRvIG1iLTRcIj48L2Rpdj5cbiAgICAgICAgICAgIDxwIGNsYXNzTmFtZT1cInRleHQtZ3JheS01MDBcIj7mraPlnKjliJ3lp4vljJYzROafpeeci+WZqC4uLjwvcD5cbiAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgPC9kaXY+XG4gICAgICApfVxuICAgICAgPGlmcmFtZVxuICAgICAgICByZWY9e2lmcmFtZVJlZn1cbiAgICAgICAga2V5PXtpZnJhbWVLZXl9XG4gICAgICAgIGNsYXNzTmFtZT1cInctZnVsbCBoLWZ1bGwgYm9yZGVyLTBcIlxuICAgICAgICB0aXRsZT17YCR7YXBhcnRtZW50LnRpdGxlfSAzROafpeeci+WZqGB9XG4gICAgICAgIHNhbmRib3g9XCJhbGxvdy1zY3JpcHRzIGFsbG93LXNhbWUtb3JpZ2luIGFsbG93LWRvd25sb2FkcyBhbGxvdy1wb2ludGVyLWxvY2tcIlxuICAgICAgLz5cbiAgICA8L2Rpdj5cbiAgKVxufSAiXSwibmFtZXMiOlsidXNlRWZmZWN0IiwidXNlUmVmIiwidXNlU3RhdGUiLCJBcGFydG1lbnQzRFZpZXdlciIsImFwYXJ0bWVudCIsIm9uQ2xvc2UiLCJpZnJhbWVSZWYiLCJpc0xvYWRpbmciLCJzZXRJc0xvYWRpbmciLCJlcnJvciIsInNldEVycm9yIiwiaWZyYW1lS2V5Iiwic2V0SWZyYW1lS2V5IiwiaGFzTW9kZWwiLCJ0aW1lciIsInNldFRpbWVvdXQiLCJjcmVhdGUzRFZpZXdlckhUTUwiLCJ0aXRsZSIsImRlc2NyaXB0aW9uIiwiSlNPTiIsImNvbmZpZyIsImNhbWVyYSIsImhlaWdodCIsInN0cmluZ2lmeSIsIm1vZGVsUGF0aCIsImlmcmFtZSIsImN1cnJlbnQiLCJkb2MiLCJjb250ZW50RG9jdW1lbnQiLCJjb250ZW50V2luZG93IiwiZG9jdW1lbnQiLCJvcGVuIiwid3JpdGUiLCJjbG9zZSIsImNsZWFyVGltZW91dCIsInByZXYiLCJoYW5kbGVNZXNzYWdlIiwiZXZlbnQiLCJkYXRhIiwid2luZG93IiwiYWRkRXZlbnRMaXN0ZW5lciIsInJlbW92ZUV2ZW50TGlzdGVuZXIiLCJkaXYiLCJjbGFzc05hbWUiLCJwIiwicmVmIiwic2FuZGJveCJdLCJpZ25vcmVMaXN0IjpbXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(app-pages-browser)/./components/apartment-3d-viewer.tsx\n"));

/***/ })

});